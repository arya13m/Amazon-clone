(function(b){var d=window.AmazonUIPageJS||window.P,k=d._namespace||d.attributeErrors,g=k?k("DetailPageSnSAssets@commonAssets","DetailPageSnSAssets"):d;g.guardFatal?g.guardFatal(b)(g,window):g.execute(function(){b(g,window)})})(function(b,d,k){b.when("A","sns-logger-utils","ready").register("sns-frequency-utils",function(g,c){function h(a){return a.split("|").map(function(a){return a.trim()})}function a(a,e){return a?a.find(function(a){return a.value===e}):null}var e=function(a){if(!a||"string"!==
typeof a)return c.emitCounterMetric("ExtractFrequencyComponents:Error:InvalidInput"),null;a=h(a);if(!(2===a.length&&2<=a[0].length))return c.emitCounterMetric("ExtractFrequencyComponents:Error:InvalidFormat"),null;var e=a[0].charAt(0);return{unit:a[0].charAt(1),value:e,type:a[1]}};return{extractFrequencyComponentsFromValue:e,extractFrequencyStateData:function(h){var b=g.state("sns-frequency-params");if(!b)return c.emitCounterMetric("ExtractFrequencyState:Error:DataAbsent"),null;var f=e(h);if(!f||
!f.type)return c.emitCounterMetric("ExtractFrequencyState:Error:InvalidInput"),null;var d;f=f.type;try{d=JSON.parse(b["onml"===f?"onmlFrequencyParamsMap":"snsFrequencyParamsMap"])}catch(k){c.emitMetricAndLogError("ExtractFrequencyState:Error:ParsingError","Exception caught while parsing frequency page state for frequencyParam"+b+" for type "+f+" with exception",k),d=null}return a(d,h)}}});"use strict";b.when("A").register("sns-aui-utils",function(g){var c=g.$;return{disableButton:function(c){b.when("a-button").execute(function(a){a=
a(c);c&&a.disable()})},enableButton:function(c){b.when("a-button").execute(function(a){a=a(c);c&&a.enable()})},refreshSheetContentWithPageRefresh:function(g,a,e){b.when("a-sheet").execute(function(b){if((b=b.get(g))&&"function"===typeof b.getContentContainer&&(b=b.getContentContainer().find(a),0!==b.length)){var d=c(e).removeClass("aok-hidden");0!==d.length&&d.html()&&b.replaceWith(d)}})}}});b.register("sns-logger-utils",function(){function g(a){d.ue&&d.ue.count(a,(ue.count(a)||0)+1)}var c=function(a,
e){b.log(e?a+" : "+e:a,"FATAL","SubscribeAndSaveJS")},h=function(a,e){b.log(e?a+" : "+e:a,"ERROR","SubscribeAndSaveJS")};return{emitMetricAndLogFatal:function(a,e,b){g(a);c(e,b)},emitMetricAndLogError:function(a,b,c){g(a);h(b,c)},logFatal:c,logError:h,emitCounterMetric:g}});b.when("A","sns-logger-utils").register("sns-weblab-trigger-utils",function(b,c){return{getWeblabTreatmentAndTrigger:function(b,a,e,g,d){var f=new XMLHttpRequest;f.addEventListener("load",function(){400>f.status&&300<=f.status?
(c.emitCounterMetric("getWeblabTreatmentAndTrigger."+a+".3xx"),d(e+"e")):500>f.status&&400<=f.status?(c.emitCounterMetric("getWeblabTreatmentAndTrigger."+a+".4xx"),d(e+"e")):600>f.status&&500<=f.status?(c.emitCounterMetric("getWeblabTreatmentAndTrigger."+a+".5xx"),d(e+"e")):(c.emitCounterMetric("getWeblabTreatmentAndTrigger."+a+".success"),g(e,f))});f.addEventListener("timeout",function(){c.emitCounterMetric("getWeblabTreatmentAndTrigger."+a+".timeout");d(e+"t")});f.addEventListener("error",function(){c.emitCounterMetric("getWeblabTreatmentAndTrigger."+
a+".error");d(e+"e")});f.open("POST","/auto-deliveries/ajax/triggerWeblab");f.setRequestHeader("Content-Type","application/json");f.send(JSON.stringify({weblabId:b}))}}});b.when("A").register("sns-xhr-utils",function(b){function c(a){try{JSON.parse(a)}catch(b){return!1}return!0}function d(a){try{return a.getResponseHeader("content-Type")&&a.getResponseHeader("content-Type").includes("application/json")}catch(b){return!1}}return{isJsonFormat:c,isJsonResponseType:d,isXhrResponseInJsonFormat:function(a){return d(a)&&
c(a.response)}}})});
/* ******** */
(function(p){var m=window.AmazonUIPageJS||window.P,t=m._namespace||m.attributeErrors,d=t?t("DetailPageSnSAssets@dpxAssets","DetailPageSnSAssets"):m;d.guardFatal?d.guardFatal(p)(d,window):d.execute(function(){p(d,window)})})(function(p,m,t){p.when("sns-join-prime-endpoint","sns-subscribe-constants").register("sns-buybox-constants",function(d,b){return{SNS_QUANTITY_FIELD:"#mobileQuantityDropDown, #tabletQuantityDropDown",SNS_FREQUENCY_NAME:"rcxOrdFreq",SNS_OPT_IN_NAME:"snsOptIn",QUANTITY_CONTAINER:"#selectQuantity, #mobileQuantitySelection, #sns",
QUANTITY:"[name\x3dquantity]",SNS_QUANTITY:"[name\x3drcxsubsQuan]",SNS_SELECTED_FREQUENCY:"#rcxOrdFreqSns",ONML_SELECTED_FREQUENCY:"#rcxOrdFreqOnml",SNS_MOBILE_QUANTITY:".snsQuantityRadio input[name\x3d'quantity']:checked",SNS_FREQUENCY_FORM_FIELD:"[name\x3drcxOrdFreq]",SNS_FREQUENCY_FORM_FIELD_MOBILE:".rcxOrdFreq",SNS_ONMLV2_FREQUENCY_TRIGGER_DROPDOWN:"a:dropdown:rcxOrdFreq:select",SNS_ONMLV2_FREQUENCY_TRIGGER_RADIO_BUTTON:".snsOrdFreqRadio",SNS_ONMLV2_QUANTITY_TRIGGER_DROPDOWN:"a:dropdown:rcxsubsQuan:select",
SNS_ONMLV2_QUANTITY_TRIGGER_RADIO_BUTTON:".snsQuantityRadio",SNS_ONMLV2_FREQUENCY_FORM_FIELD:"#onmlv2FormFields [name\x3d'rcxOrdFreq']",SNS_SUBSCRIBE_BUTTON_FREQUENCY_FORM_FIELD:"#subscribeButtonFormFields [name\x3d'rcxOrdFreq']",SNS_ONMLV2_QUANTITY_FORM_FIELD:"#onmlv2FormFields [name\x3d'quantity']",SNS_SUBSCRIBE_BUTTON_QUANTITY_FORM_FIELD:"#subscribeButtonFormFields [name\x3d'quantity']",SNS_ONMLV2_DELIVERY_OPTION_FORM_FIELD:'#onmlv2FormFields [name\x3d"snsDeliveryOption"]',SNS_SUBSCRIBE_BUTTON_DELIVERY_OPTION_FORM_FIELD:'#subscribeButtonFormFields [name\x3d"snsDeliveryOption"]',
ONML_SELECTED_DELIVERY_OPTION_STATE:"onml-selected-delivery-option-state",RCX_ORD_FREQ_ONML_WRAPPER:"#rcxOrdFreqOnmlWrapper",RCX_ORD_FREQ_SNS_WRAPPER:"#rcxOrdFreqSnsWrapper",SNS_ONMLV2_QUANTITY_TRIGGER_DESKTOP:"#rcxsubsQuan",SNS_ONMLV2_QUANTITY_TRIGGER_MOBILE:".snsQuantityRadio",SNS_DP_FREQUENCY_TRIGGER:"#sns-dp-frequency-trigger span",SNS_OPT_IN_CHECKBOX:"#snsOptInCheckbox",SNS_OFFER_LISTING_FIELD:"#snsOfferListingID",OFFER_LISTING_FIELD:"[name\x3dofferListingID]",SNS_FREQUENCY_SECTION:"#snsFrequencySection",
SNS_SELECTED_FREQUENCY_LABEL:"#snsSelectedFrequencyLabel",SNS_FIRST_RECURRING_DELIVERY_DATE:"[id\x3dsnsFirstRecurringDeliveryDate]",SNS_BUY_USED_BUTTON:"#usedBuySection, #usedAccordionRow .a-accordion-row-a11y",ONE_CLICK_BUTTON:".onml-one-click-button",ONE_CLICK_BUTTON_ICON:".onml-one-click-button i",ONE_CLICK_BUTTON_TEXT:".onml-one-click-button input+span",BUY_NOW_BUTTON:".onml-buy-now-button",BUY_NOW_BUTTON_ICON:".onml-buy-now-button i",BUY_NOW_BUTTON_TEXT:".onml-buy-now-button input+span",ADD_TO_CART_BUTTON:"#add-to-cart-button",
ADD_TO_CART_DIV:"#addToCart",DSK_BB:"#sns",DSK_BB_DPV1:"#snsBuyBox",MOBILE_ADD_TO_CART_DIV:"#sns",MOBILE_SNS_BUYBOX:"#snsBuyBox",TABLET_ADD_TO_CART_DIV:"#snsTablet",SNS_OPT_IN_FORM_FIELD:"[name\x3dsnsOptIn]",LEGACY_SPC_FORM_INPUT:"[name\x3d'submit.rcx-subscribe']",LEGACY_SPC_FORM_INPUT_X:"[name\x3d'submit.rcx-subscribe.x']",SNS_OFFER_FORM_FIELD:".snsONMLOffer",SNS_DISCOUNT_PILL:"#snsDiscountPill",SNS_ONML_BUYBOX_UPSELL_MESSAGE_NON_TIERED:"#sns-onml-buybox-upsell-message-non-tiered",SNS_ONML_BUYBOX_UPSELL_MESSAGE_TIERED:"#sns-onml-buybox-upsell-message-tiered",
SNS_ONML_FRDD:".sns-onml-frdd",SNS_ONMLV2_FRDD:".sns-onmlv2-frdd",SNS_FREQ_BOTTOMSHEET_SELECTOR:"[id\x3dsnsFrequencyBottomSheet]",SNS_OPT_IN_FEATURE_DIV:"#snsOptIn_div",SNS_OPT_IN_INPUT_ID:"[name\x3dsnsOptIn]",SNS_ONML_INIT_INPUT_ID:"isOnmlInitialized",SNS_ONML_INIT_INPUT_SELECTOR:"#isOnmlInitialized",SNS_DATA_UPDATE_EVENT:"sns-declarative-data-update",SNS_ONML_MERCHANT_INFO:"#snsOnmlMerchantInfo",SNS_BUY_NEW_PRICE:"#onml_snsBuyNew",CBB_BUY_NEW_PRICE:"#buyNew_cbb",NON_CBB_BUY_NEW_PRICE:"#buyNew_noncbb",
SNS_PRICE_IN_BUY_USED_SECTION:"#usedBuySection #onml_snsBuyNew",CBB_SNS_BUY_NEW_PRICE:"#onml_snsBuyNew_cbb",SNS_CBB_ACCORDION_ROW:"#snsAccordionRow, #snsAccordionRowMobile, #snsAccordionRowMobileApp, #snsAccordionRowMovedUp, #snsAccordionRowMobileMovedUp, #snsAccordionRowMobileAppMovedUp, #snsAccordionRowMiddle, #snsAccordionRowMobileMiddle, #snsAccordionRowMobileAppMiddle",SNS_ONMLV2_FORM_FIELDS:"#onmlv2FormFields",SUBSCRIBE_BUTTON_FORM_FIELDS:"#subscribeButtonFormFields",SNS_ACCORDION_HEADER_RADIO_BUTTON:'#snsAccordionRow [role\x3d"radio"], #snsAccordionRowMobile [role\x3d"radio"], #snsAccordionRowMobileApp [role\x3d"radio"], #snsAccordionRowMovedUp [role\x3d"radio"], #snsAccordionRowMobileMovedUp [role\x3d"radio"], #snsAccordionRowMobileAppMovedUp [role\x3d"radio"], #snsAccordionRowMiddle [role\x3d"radio"], #snsAccordionRowMobileMiddle [role\x3d"radio"], #snsAccordionRowMobileAppMiddle [role\x3d"radio"]',
SNS_CBB_PRIME_SHIPPING:"#sns-cbb-prime-shipping-header, #sns-cbb-prime-shipping-row",DPV2_BUY_NEW_PRICE:"#buyNew_dpv2",SUBSCRIBE_ONLY_LINK:"#subscribe-only",SUBSCRIBE_ONLY_FORM:"#sns-onml-subscribe-only",JUST_SUBSCRIBE_DIV:"#just-subscribe-button-container",GOLDBOX_DISCOUNT_MESSAGE:"#onml-goldbox-discount-message",SUBSCRIBE_ONLY_FORM_ATTRIBUTES:{name:"sns-onml-subscribe-only",id:"sns-onml-subscribe-only",method:"POST",action:"/gp/product/handle-buy-box/ref\x3donml_so_l"},SUBSCRIBE_ADD_TO_CART_FORM_ATTRIBUTES:b.SUBSCRIBE_FORM_ATTRIBUTES,
JUST_SUBSCRIBE_FORM_ATTRIBUTES:{name:"sns-onmlv2-just-subscribe",id:"sns-onmlv2-just-subscribe",method:"POST",action:"/gp/subscribe-and-save/pipeline/subscribe.html"},BUY_NOW_FORM_ATTRIBUTES:{name:"sns-onmlv2-buy-now",id:"sns-onmlv2-buy-now",method:"POST",action:""},SNS_LEGACY_SUBSCRIBE_FORM_ATTRIBUTES:{name:"sns-legacy-subscribe",id:"sns-legacy-subscribe",method:"POST",action:"/gp/product/handle-buy-box"},SNS_JOIN_PRIME_FORM_ATTRIBUTES:{name:"sns-join-prime",id:"sns-join-prime",method:"POST",action:""},
SNS_JOIN_PRIME_FORM_ATTRIBUTES_VMF:{name:"sns-join-prime-vmf",id:"sns-join-prime-vmf",method:"POST",action:d.endpoint},SUBSCRIBE_FORM_ATTRIBUTES:b.SUBSCRIBE_ADD_TO_CART_FORM_ATTRIBUTES,SNS_ATC_DECLARATIVE:"#addToCart_feature_div #atc-declarative",SNS_SUBMIT_SECTION_ID:"#snsSubmitSection",SNS_SWITCH_SUBMIT_SECTION_ID:"#snsSwitchSubmitSection",SNS_BUY_NOW_BUTTON:"#snsBuyNowSubmit",SNS_SUBSCRIBE_ONLY_BUTTON:"#snsSubscribeOnlySubmit",SNS_DECLARATIVE_ACTION:"#sns-submit-declarative",SNS_SUBSCRIBE_ONLY_ACTION:"sns-subscribe-only",
SNS_BUY_BOX_PARAMS:"sns-buybox-message-params",SNS_BUY_BOX_PARAM_MAP:"buyboxMessageParamsMap",SNS_SELECT_DELIVERY_URL:"/gp/subscribe-and-save/dp/delivery.html/ref\x3drcxsubs_sns_delivery_url?app-nav-type\x3dmodal",SNS_SELECT_DELIVERY_OPTION_ID:"#snsDeliveryOption",SNS_DELIVERY_OPTION_SNS:"sns",SNS_DELIVERY_OPTION_ONML:"onml",SNS_BASE_PRICE:"#sns-base-price",SNS_TIERED_PRICE:"#sns-tiered-price",SNS_DELIVERY_OPTION_DIV:"#snsDeliveryOpt",ONML_DELIVERY_OPTION_DIV:"#onmlDeliveryOpt",SNS_MOD_ACCORDION_HEADER_FEATURES:"#sns-cbb-prime-shipping-header-wrapper, #accordion-header-delivery-link",
SNS_SUBSCRIPTION_PRICE:"#subscriptionPrice",SNS_DELIVERY_OPTION_SNS_LINK:"#sns-delivery-link",SNS_DELIVERY_OPTION_SNS_LINK_TEXT_IDENTIFIER:"#snsDeliveryChangeLinkText",ACCORDION_HEADER_DELIVERY_OPTION_SNS_LINK:"#accordion-header-sns-delivery-link",SNS_DELIVERY_OPTION_ONML_LINK:"#onml-delivery-link",SNS_DELIVERY_OPTION_ONML_LINK_TEXT_IDENTIFIER:"#onmlDeliveryChangeLinkText",ACCORDION_HEADER_DELIVERY_OPTION_ONML_LINK:"#accordion-header-onml-delivery-link",SNS_DELIVERY_BOTTOM_SHEET:"#snsDeliveryDateBottomSheet",
SNS_DELIVERY_BOTTOM_SHEET_SPINNER:"#snsDeliveryDateBottomSheetSpinner",SNS_DELIVERY_BOTTOM_SHEET_CONTENT:"#snsDeliveryDateBottomSheetContent",SNS_SUBSCRIBE_SUBMIT_BUTTON:"#rcx-subscribe-submit-button",SNS_DELIVERY_UPSELL:"#sns-delivery-buybox-upsell-message",SNS_DELIVERY_NEW_OR_UNRECOGNIZED_UPSELL:"#sns-delivery-buybox-upsell-message-new-or-unrecognized",SNS_DELIVERY_NON_TIERED_UPSELL:"#sns-delivery-buybox-upsell-message-non-tiered",SNS_DELIVERY_TIERED_UPSELL:"#sns-delivery-buybox-upsell-message-tiered",
ONML_DELIVERY_UPSELL:"#onml-delivery-buybox-upsell-message",ONML_DELIVERY_NEW_OR_UNRECOGNIZED_UPSELL:"#onml-delivery-buybox-upsell-message-new-or-unrecognized-sns-customer",ONML_DELIVERY_NON_TIERED_UPSELL:"#onml-delivery-buybox-upsell-message-non-tiered",ONML_DELIVERY_TIERED_UPSELL:"#onml-delivery-buybox-upsell-message-tiered",SNS_ADD_TO_CART_FORM:"#sns-onmlv2-add-to-cart",SNS_SUBSCRIBE_FORM:"#sns-onmlv2-subscribe",JUST_SUBSCRIBE_FORM:"#sns-onmlv2-just-subscribe",BUY_NOW_FORM:"#sns-onmlv2-buy-now",
SNS_LEGACY_SUBSCRIBE_FORM:"#sns-legacy-subscribe",SNS_JOIN_PRIME_FORM:"#sns-join-prime",SNS_DELIVERY_PILL:"#sns-delivery-pill",SNS_DELIVERY_NEW_OR_UNRECOGNIZED_PILL:"#sns-delivery-new-or-unrecognized-sns-customer-pill",SNS_DELIVERY_NON_TIERED_PILL:"#sns-delivery-non-tiered-pill",SNS_DELIVERY_TIERED_PILL:"#sns-delivery-tiered-pill",ONML_DELIVERY_PILL:"#onml-delivery-pill",ONML_DELIVERY_NEW_OR_UNRECOGNIZED_PILL:"#onml-delivery-new-or-unrecognized-sns-customer-pill",ONML_DELIVERY_NON_TIERED_PILL:"#onml-delivery-non-tiered-pill",
ONML_DELIVERY_TIERED_PILL:"#onml-delivery-tiered-pill",SNS_TOGGLE_BUY_BOX:"[name\x3dtoggleBuyBox]",SNS_ONMLV2_JOIN_PRIME_UPSELL:"#momAEmsg",SNS_ONMLV2_JOIN_PRIME_CHECKBOX:"#chkMom",SNS_ONMLV2_JOIN_PRIME_BUTTON:"#mom-join-button",SNS_DELIVERY_BOTTOMSHEET_IN_BUYBOX:"#snsDeliveryDateBottomSheet",SNS_SWITCH_WIDGET_ONML_URL:"/auto-deliveries/switchWidgetMobile?",SNS_SWITCH_WIDGET_LEGACY_URL:"/auto-deliveries/switchWidgetLegacy?",SNS_SWITCH_WIDGET_LEGACY_CONTINUE_URL:"/gp/subscribe-and-save/pipeline/subscribe.html?",
SNS_SWITCH_WIDGET_ONML_DESKTOP_URL:"/auto-deliveries/ajax/switchWidgetAjax?",SNS_SWITCH_WIDGET_LEGACY_DESKTOP_URL:"/auto-deliveries/ajax/switchWidgetAjaxLegacy?",SNS_SWITCH_WIDGET_PARAMS:"sns-switch-message-params",SNS_SWITCH_WIDGET_PARAM_MAP:"switchMessageParamsMap",DISCOUNT_TYPE_ZERO_BASE:"ZERO_BASE",DISCOUNT_TYPE_ZERO_STATIC:"ZERO_STATIC",GET_MYD_RECOMMENDATIONS_URL:"/auto-deliveries/ajax/viewRecommendationsAjax",SOURCE_PAGE:"dp",VIEW_CART_URL:"/gp/cart/view.html",GO_TO_CHECKOUT_URL:"/gp/cart/desktop/go-to-checkout.html?proceedToCheckout\x3d1",
SNS_HUC_GET_TREATMENT_FORM_ID:"sns-get-huc-treatment",SNS_ONML_MONTH:"M|onml",SUBSCRIBE_FORM_FIELDS:b.FORM_FIELDS,SNS_BASE_DISCOUNT_MESSAGE:".sns-base-discount-message",SNS_TIERED_DISCOUNT_MESSAGE:".sns-tiered-discount-message",SNS_SUBSCRIBER_DISCOUNT_MESSAGE_STATE_ID:"sns-subscriber-discount-message-data",SUBSCRIBER_DISCOUNT_MESSAGE_EXPERIMENT_ID:"CONSUMABLES_DP_SNS_APEX_SUBSCRIBER_DISCOUNT_MESSAGE_921625",REPLENISHMENT_SNS_FREQUENCY_POPOVER_ID:"#replenishment-sns-frequency-popover",REPLENISHMENT_ONML_FREQUENCY_POPOVER_ID:"#replenishment-onml-frequency-popover",
REPLENISHMENT_ONML_FREQUENCY_INFO_POPOVER_ID:"#replenishment-onml-frequency-info-popover",REPLENISHMENT_SNS_FREQUENCY_INFO_POPOVER_ID:"#replenishment-sns-frequency-info-popover",REPLENISHMENT_ONML_FREQUENCY_ACCORDION_ID:"#replenishment-onml-frequency-accordion",REPLENISHMENT_SNS_FREQUENCY_ACCORDION_ID:"#replenishment-sns-frequency-accordion",SHOW_MORE_FREQUENCY_OPTIONS_CLASS:".show-more-frequency-options-class",SHOW_MORE_FREQUENCY_OPTIONS_SECTION:".show-more-frequency-options-section",SNS_FREQUENCY_ACCORDION_ROW_PREFIX:"snsFrequencyAccordionRow-",
ONML_FREQUENCY_ACCORDION_ROW_PREFIX:"onmlFrequencyAccordionRow-",SNS_FREQUENCY_BOTTOMSHEET_SELECTOR:"#replenishment-sns-frequency-bottomsheet",ONML_FREQUENCY_BOTTOMSHEET_SELECTOR:"#replenishment-onml-frequency-bottomsheet",SNS_FREQUENCY_UNIT_WEEKS_BUTTON:"#snsFrequencyUnitButton-weeks",SNS_FREQUENCY_UNIT_MONTHS_BUTTON:"#snsFrequencyUnitButton-months",ONML_FREQUENCY_UNIT_WEEKS_BUTTON:"#onmlFrequencyUnitButton-weeks",ONML_FREQUENCY_UNIT_MONTHS_BUTTON:"#onmlFrequencyUnitButton-months",SNS_FREQUENCY_SHEET_NAME:"replenishmentsnsFrequencyBottomsheet",
SNS_PRELOADED_FREQUENCY_SHEET_CONTENT_SELECTOR:"#replenishmentsnsFrequencyBottomsheet",SNS_REFRESHED_FREQUENCY_SHEET_CONTENT_SELECTOR:"#replenishmentsnsFrequencyBottomsheetContainer #replenishmentsnsFrequencyBottomsheet",ONML_FREQUENCY_SHEET_NAME:"replenishmentonmlFrequencyBottomsheet",ONML_PRELOADED_FREQUENCY_SHEET_CONTENT_SELECTOR:"#replenishmentonmlFrequencyBottomsheet",ONML_REFRESHED_FREQUENCY_SHEET_CONTENT_SELECTOR:"#replenishmentonmlFrequencyBottomsheetContainer #replenishmentonmlFrequencyBottomsheet"}});
p.when("A","sns-utils","sns-constants","sns-buybox-constants","sns-messaging-utils","sns-atc-utils").register("sns-frequency-bottom-sheet",function(d,b,a,e,f,g){return{init:function(){function c(){var a=k(e.SNS_FREQUENCY_FORM_FIELD).val();k(e.SNS_FREQ_BOTTOMSHEET_SELECTOR).find("button[value\x3d"+a+"]").click()}var k=d.$;b.isMobileDevice()&&(b.registerCallbackForNameSpace(a.EVENT_NAMESPACE.FREQUENCY_HIDDEN_INPUT_CHANGE,c),b.registerCallbackForNameSpace(a.EVENT_NAMESPACE.PAGE_UPDATE,c),d.declarative("sns-frequency-selected",
"click",function(c){var h=k(e.SNS_FREQUENCY_FORM_FIELD);c=c.$target;var n=c.val(),q={};q[e.SNS_FREQUENCY_NAME]=n;g.setOnmlDeclaratives(q);h.val(n);m.setTimeout(function(){d.trigger(e.SNS_DATA_UPDATE_EVENT)},0);k(e.SNS_FIRST_RECURRING_DELIVERY_DATE).html(c.data("frdd-label"));k(e.SNS_SELECTED_FREQUENCY_LABEL).html(c.data("freq-button-label"));f.updateMessages(n);b.setOnmlUserPref(a.USER_PREFS_KEYS.SNS_FREQUENCY,n)}))}}});p.when("A","sns-constants","sns-utils","sns-buybox-constants","sns-messaging-utils",
"sns-atc-utils").register("sns-frequency-popover",function(d,b,a,e,f,g){return{init:function(){function c(){var a=k(e.SNS_FREQUENCY_FORM_FIELD).val();k("[data-a-accordion-row-name\x3dfrequencyAccordionRow"+(a-1)+"] a").click()}var k=d.$;a.isMobileDevice()||(a.registerCallbackForNameSpace(b.EVENT_NAMESPACE.FREQUENCY_HIDDEN_INPUT_CHANGE,c),d.on("a:accordion:sns-dp-frequency-accordion:select",function(c){var h=k(e.SNS_FREQUENCY_FORM_FIELD),n=k(e.SNS_DP_FREQUENCY_TRIGGER),q=k(c.selectedRow.$row[0]);c=
q.data().frequencyLabel;var q=q.data().frequencyValue,r={};r[e.SNS_FREQUENCY_NAME]=q;g.setOnmlDeclaratives(r);h.val(q);m.setTimeout(function(){d.trigger(e.SNS_DATA_UPDATE_EVENT)},0);n.text(c);f.updateMessages(q);a.setOnmlUserPref(b.USER_PREFS_KEYS.SNS_FREQUENCY,q)}))}}});p.when("A","sns-utils","sns-constants","sns-buybox-utils","sns-buybox-constants","sns-atc-utils").register("sns-opt-in-checkbox",function(d,b,a,e,f,g){return{init:function(){function c(c){var h=d.$(f.SNS_OPT_IN_CHECKBOX).is(":checked");
c=d.$(f.SNS_OPT_IN_FORM_FIELD);h&&(b.isMobileApp()||b.isTabletApp())&&g.getAddToCartStrings();var k={};k[f.SNS_OPT_IN_NAME]=h;g.setOnmlDeclaratives(k);c.val(h);m.setTimeout(function(){d.trigger(f.SNS_DATA_UPDATE_EVENT)},0);m.setTimeout(function(){e.updateAddToCartButtonLabel(h);e.updateOneClickButtonLabel(h);e.updateBuyNowButtonLabel(h)},0);e.showSnSMerchantInfoIfSnSOptInChecked(h);e.showGoldBoxDiscountMessageIfSnSOptInChecked(h);e.showSubscribeOnlyButtonIfSnSOptInChecked(h);b.setOnmlUserPref(a.USER_PREFS_KEYS.SNS_OPT_IN,
h)}function k(){var a=function(){var a=d.$("#buybox").find(".a-declarative").has("#add-to-cart-button");if(1===a.length)return a;a=d.$("#atc-declarative");return 1===a.length?a:null}();a&&a.click(function(){var c=g.getAddToCartData();if(c.inputs[f.SNS_OPT_IN_NAME]!==t){var e=b.getAStateFromDom(f.SNS_OPT_IN_FEATURE_DIV,"sns-add-to-cart-params","addToCartParams"),k=d.$(f.SNS_OPT_IN_CHECKBOX).is(":checked"),r={},r=e||{};r[f.SNS_OPT_IN_NAME]=k;var u=a.data("awMash");Object.keys(r).forEach(function(a){u.inputs[a]!==
c.inputs[a]&&(u.inputs[a]=c.inputs[a])})}})}b.isSnSEligible()&&c({snsOnLoad:!0});d.declarative("sns-opt-in-checked","change",c);b.registerCallbackForNameSpace(a.EVENT_NAMESPACE.PAGE_UPDATE,c);b.registerCallbackForNameSpace(a.EVENT_NAMESPACE.PAGE_UPDATE,b.enableSnSOptIn);b.isMobileApp()&&(b.registerCallbackForNameSpace(a.EVENT_NAMESPACE.PAGE_UPDATE,k),k());b.enableSnSOptIn()}}});p.when("A","sns-constants","sns-buybox-constants","sns-utils").register("sns-messaging-utils",function(d,b,a,e){var f=function(b,
c){var e=b.firstRecurringDeliveryDates[c-1];d.$(a.SNS_ONML_FRDD).each(function(){d.$(this).html(e)})};return{updateMessages:function(g){var c=e.getAStateFromDom(a.SNS_OPT_IN_FEATURE_DIV,"sns-buybox-message-params","buyboxMessageParamsMap");if(c){var k=d.$(a.SNS_ONML_BUYBOX_UPSELL_MESSAGE_NON_TIERED),l=d.$(a.SNS_ONML_BUYBOX_UPSELL_MESSAGE_TIERED);c.tieredStatusOnRecurringDeliveryDates[g-1]===b.TIERED?(k.addClass("aok-hidden"),l.removeClass("aok-hidden")):(k.removeClass("aok-hidden"),l.addClass("aok-hidden"));
k=c.discountType;l=d.$(a.SNS_DISCOUNT_PILL);c.tieredStatusOnRecurringDeliveryDates[g-1]===b.TIERED?(l.attr("data-tiered-level",b.PREMIUM),k===b.ZERO_BASE&&l.removeClass("aok-hidden")):(l.attr("data-tiered-level",b.BASE),k===b.ZERO_BASE&&l.addClass("aok-hidden"));f(c,g)}}}});p.when("A","sns-buybox-constants","sns-onmlv2-utils","sns-moq-helper").register("sns-buy-now",function(d,b,a,e){var f=d.$;d.declarative("sns-buy-now","click",function(d){if(!e.isSnsLocked()&&!e.isSnsLocked()){d=f("\x3cform\x3e",
{method:b.BUY_NOW_FORM_ATTRIBUTES.method,action:"/gp/subscribe-and-save/buynow/buy-now.html?ref\x3ddp_sns_bb_bn",id:b.BUY_NOW_FORM_ATTRIBUTES.id,name:b.BUY_NOW_FORM_ATTRIBUTES.name});var c="";if(a.isCbbTemplateEnabled())for(var k=[{name:"ASIN"},{name:"offerListingID",fieldName:"snsOfferListingID"},{name:"snsAddressId"},{name:"snsOnmlOfferId"},{name:"snsMostCommonFrequency"},{name:"rcxOrdFreq"},{name:"quantity"}],l=0;l<k.length;l++)var h=k[l].name,n=k[l].fieldName?k[l].fieldName:h,n=a.getOnmlv2FormValueByName(n),
c=c+a.createHiddenInput(h,n);else{a.removeFormFieldsIntroducedByCbb();k=[{name:"ASIN"},{name:"offerListingID",fieldName:"snsOfferListingID"},{name:"rcxOrdFreq"},{name:"snsOnmlOfferId"},{name:"snsMostCommonFrequency"},{name:"snsAddressId"}];for(l=0;l<k.length;l++)h=k[l].name,n=k[l].fieldName?k[l].fieldName:h,n=a.isMobileDevice()?f(b.MOBILE_ADD_TO_CART_DIV+" [name\x3d"+n+"]").val():a.isWeb()?f(b.ADD_TO_CART_DIV+" [name\x3d"+n+"]").val():f(b.TABLET_ADD_TO_CART_DIV+" [name\x3d"+n+"]").val(),c+=a.createHiddenInput(h,
n);k=a.isMobileDevice()?f(b.SNS_MOBILE_QUANTITY):f(b.QUANTITY_CONTAINER).find(b.SNS_QUANTITY);c+=a.createHiddenInput("quantity",k.val())}c+=a.createHiddenInput("submit.buy-now","1");d.html(c);f("body").append(d);f(b.BUY_NOW_FORM).submit();f(b.BUY_NOW_FORM).remove()}})});p.when("sns-join-prime-endpoint").register("sns-subscribe-constants",function(d){return{SUBSCRIBE_ADD_TO_CART_FORM_ATTRIBUTES:{name:"sns-onmlv2-add-to-cart",id:"sns-onmlv2-add-to-cart",method:"POST",action:"/auto-deliveries/checkout/subscribe"},
SUBSCRIBE_FORM_ATTRIBUTES:{name:"sns-onmlv2-subscribe",id:"sns-onmlv2-subscribe",method:"POST",action:"/auto-deliveries/checkout/subscribe"},FORM_FIELDS:[{name:"snsAsin"},{name:"rcxOrdFreqOnml"},{name:"rcxOrdFreqSns"},{name:"offerListingID",fieldName:"snsOfferListingId"},{name:"snsAntiCsrfToken"},{name:"isTangoCheckoutEligible"},{name:"isSubSameDayDeliveryEligible"},{name:"isOnmlPriceLesserThanFreeShippingThreshold"}]}});p.when("A","sns-buybox-constants","sns-onmlv2-utils","sns-moq-helper").register("sns-subscribe-only",
function(d,b,a,e){var f=d.$;d.declarative("sns-subscribe-only","click",function(d){if(!e.isSnsLocked()){d=f("\x3cform\x3e",{method:b.JUST_SUBSCRIBE_FORM_ATTRIBUTES.method,action:b.JUST_SUBSCRIBE_FORM_ATTRIBUTES.action,id:b.JUST_SUBSCRIBE_FORM_ATTRIBUTES.id,name:b.JUST_SUBSCRIBE_FORM_ATTRIBUTES.name});var c="";if(a.isCbbTemplateEnabled())for(var k=[{name:"ASIN"},{name:"snsMerchantID"},{name:"offerListingID",fieldName:"snsOfferListingID"},{name:"longShipAddressId",fieldName:"snsAddressId"},{name:"rcxOrdFreq"},
{name:"quantity"}],l=0;l<k.length;l++)var h=k[l].name,n=k[l].fieldName?k[l].fieldName:h,n=a.getOnmlv2FormValueByName(n),c=c+a.createHiddenInput(h,n);else{a.removeFormFieldsIntroducedByCbb();k=[{name:"ASIN"},{name:"offerListingID",fieldName:"snsOfferListingID"},{name:"rcxOrdFreq"},{name:"snsMerchantID"},{name:"longShipAddressId",fieldName:"snsAddressId"}];for(l=0;l<k.length;l++)h=k[l].name,n=k[l].fieldName?k[l].fieldName:h,n=a.isMobileDevice()?f(b.MOBILE_ADD_TO_CART_DIV+" [name\x3d"+n+"]").val():a.isWeb()?
f(b.ADD_TO_CART_DIV+" [name\x3d"+n+"]").val():f(b.TABLET_ADD_TO_CART_DIV+" [name\x3d"+n+"]").val(),c+=a.createHiddenInput(h,n);k=a.isMobileDevice()?f(b.SNS_MOBILE_QUANTITY):f(b.QUANTITY_CONTAINER).find(b.SNS_QUANTITY);c+=a.createHiddenInput("quantity",k.val())}c+=a.createHiddenInput("ref","sns-subscribe-only");c+=a.createHiddenInput("submit.subscribe-only","1");d.html(c);f("body").append(d);f(b.JUST_SUBSCRIBE_FORM).submit();f(b.JUST_SUBSCRIBE_FORM).remove()}})});p.when("A","a-dropdown","a-modal",
"sns-vmf-utils","sns-onmlv2-utils","sns-buybox-constants","sns-constants").register("sns-select-delivery",function(d,b,a,e,f,g,c){function k(){h("#sns-only-delivery-option-text").length&&(h("#sns-only-delivery-option-text").html(h("#sns-only-delivery-option-text").html().replace(/%_date_%/g,"\x3cspan class \x3d'sns-only-date'\x3e\x3c/span\x3e")),h("#sns-only-delivery-option-text").html(h("#sns-only-delivery-option-text").html().replace(/%_discount_%/g,"\x3cspan class \x3d'sns-only-discount'\x3e\x3c/span\x3e")),
h("#onml-later-delivery-option-text").html(h("#onml-later-delivery-option-text").html().replace(/%_date-more-later_%/g,"\x3cspan class \x3d'sns-ml-date'\x3e\x3c/span\x3e")),h("#onml-later-delivery-option-text").html(h("#onml-later-delivery-option-text").html().replace(/%_discount-more-later_%/g,"\x3cspan class \x3d'sns-ml-discount'\x3e\x3c/span\x3e")),h("#onml-now-delivery-option-text").html(h("#onml-now-delivery-option-text").html().replace(/%_date-one-now_%/g,"\x3cspan class \x3d'sns-one-now-date'\x3e\x3c/span\x3e")),
h("#onml-now-delivery-option-text").html(h("#onml-now-delivery-option-text").html().replace(/%_discount-one-now_%/g,"\x3cspan class \x3d'sns-one-now-discount'\x3e\x3c/span\x3e")));var a=f.getDiscountOptionsParam(),b=f.getDiscountTypeParam(),d=f.getSnsFrequencyParam(),k=f.getOnmlFrequencyParam(),n=f.getOnmlDateParam(),l=e.getFrequencyIndex(c.DELIVERY_OPTION.SNS),q=e.getFrequencyIndex(c.DELIVERY_OPTION.ONML);if("true"!==h("#firstDeliveryOptionMessagesV2").val()){var r=d[l].highlightedDiscount,m=d[q].highlightedDiscount;
b===g.DISCOUNT_TYPE_ZERO_BASE&&0===m?h(".onmlNextDeliveryDate").addClass("aok-hidden"):b===g.DISCOUNT_TYPE_ZERO_STATIC?h(".onmlNextDeliveryDate").addClass("aok-hidden"):h(".onmlNextDeliveryDate").removeClass("aok-hidden");b===g.DISCOUNT_TYPE_ZERO_BASE&&0===r?(h(".snsDeliveryDate").addClass("aok-hidden"),h(".snsDeliveryDateNoDiscount").removeClass("aok-hidden")):b===g.DISCOUNT_TYPE_ZERO_STATIC?(h(".snsDeliveryDate").addClass("aok-hidden"),h(".snsDeliveryDateNoDiscount").removeClass("aok-hidden")):
(h(".snsDeliveryDate").removeClass("aok-hidden"),h(".snsDeliveryDateNoDiscount").addClass("aok-hidden"))}a=a[0];h(".sns-one-now-date").html(n);h(".sns-one-now-discount").html(a);b!==g.DISCOUNT_TYPE_ZERO_BASE&&b!==g.DISCOUNT_TYPE_ZERO_STATIC&&h("#onml-later-delivery-option-text").html(k[q].firstDeliveryOptions[0].text);h("#sns-only-delivery-option-text").html(d[l].firstDeliveryOptions[0].text)}function l(){var a,b,d;h(g.SNS_DELIVERY_OPTION_DIV).is(":checked")?(a=e.getFrequencyIndex(c.DELIVERY_OPTION.SNS),
b=f.getSnsFrequencyParam(),h("#rcxOrdFreqSnsWrapper").removeClass("aok-hidden"),h("#rcxOrdFreqOnmlWrapper").addClass("aok-hidden"),h(g.REPLENISHMENT_SNS_FREQUENCY_POPOVER_ID).removeClass("aok-hidden"),h(g.REPLENISHMENT_ONML_FREQUENCY_POPOVER_ID).addClass("aok-hidden"),h(g.REPLENISHMENT_SNS_FREQUENCY_INFO_POPOVER_ID).removeClass("aok-hidden"),h(g.REPLENISHMENT_ONML_FREQUENCY_INFO_POPOVER_ID).addClass("aok-hidden"),h(g.SNS_FREQUENCY_BOTTOMSHEET_SELECTOR).removeClass("aok-hidden"),h(g.ONML_FREQUENCY_BOTTOMSHEET_SELECTOR).addClass("aok-hidden"),
d=c.DELIVERY_OPTION.SNS):(a=e.getFrequencyIndex(c.DELIVERY_OPTION.ONML),b=f.getOnmlFrequencyParam(),h("#rcxOrdFreqOnmlWrapper").removeClass("aok-hidden"),h("#rcxOrdFreqSnsWrapper").addClass("aok-hidden"),h(g.REPLENISHMENT_ONML_FREQUENCY_POPOVER_ID).removeClass("aok-hidden"),h(g.REPLENISHMENT_SNS_FREQUENCY_POPOVER_ID).addClass("aok-hidden"),h(g.REPLENISHMENT_ONML_FREQUENCY_INFO_POPOVER_ID).removeClass("aok-hidden"),h(g.REPLENISHMENT_SNS_FREQUENCY_INFO_POPOVER_ID).addClass("aok-hidden"),h(g.ONML_FREQUENCY_BOTTOMSHEET_SELECTOR).removeClass("aok-hidden"),
h(g.SNS_FREQUENCY_BOTTOMSHEET_SELECTOR).addClass("aok-hidden"),d=c.DELIVERY_OPTION.ONML);e.selectFrequency(b[a],d)}var h=d.$,n,q,r;p.when("a-sheet").execute("sns-mobile-sheet",function(a){q=a});d.declarative("sns-delivery-date-bottom-sheet","click",function(a){e.updateFrequencyInfoForDeliveryOption();k();n||(a={name:"sns_delivery_bottom_sheet",preloadDomId:"snsDeliveryDateBottomSheet",height:270,closeType:"message",closeMessage:h("#bottomSheetClose").val(),sheetType:"web"},n=q.create(a));q.showSheet(n)});
d.declarative("sns-delivery-date","click",function(c){e.updateFrequencyInfoForDeliveryOption();k();c=h(g.SNS_SUBMIT_SECTION_ID);var b={dataStrategy:"preload",header:h("#deliveryModalTitle").val(),name:"sns-delivery-modal"};r||(r=a.create(c,b));r.show()});d.declarative("sns-delivery-cancel-btn","click",function(a){r.hide()});d.declarative("sns-delivery-change-btn","click",function(a){l();r.hide()});d.on("a:sheet:beforeHide:sns_delivery_bottom_sheet",function(){l()});d.on("a:sheet:beforeShow:sns_delivery_bottom_sheet",
function(){var a=n.getContentContainer().find(g.SNS_DELIVERY_BOTTOM_SHEET),c=h("#a-popover-sns-delivery-modal").find(g.SNS_DELIVERY_BOTTOM_SHEET);c.html()!==t&&null!==c.html()&&a.replaceWith(c)})});p.when("A","sns-buybox-constants","sns-priceblock-constants").register("sns-onmlv2-priceblock-utils",function(d,b,a){var e=d.$;return{updateDesktopPriceBlock:function(f){if(f){var d=f.zeroBaseDiscount,c=0<e(b.SNS_TOGGLE_BUY_BOX).length,k=0<e(a.DP_STRIKE_PRICE).length;e(b.SNS_DELIVERY_OPTION_DIV).is(":checked")?
(e(a.ONE_NOW_SHIPPING_MESSAGE).addClass("aok-hidden"),f.justSubscribeTieredStatus?(e(a.SNS_TIERED_PRICE).removeClass("aok-hidden"),e(a.SNS_BASED_PRICE).addClass("aok-hidden"),e(a.SNS_TIERED_SAVINGS).removeClass("aok-hidden"),e(a.SNS_BASED_SAVINGS).addClass("aok-hidden"),e(a.SNS_SAVINGS_LABEL).removeClass("aok-hidden"),e(a.SNS_SAVINGS_ROW).removeClass("aok-hidden")):d?(e(a.SNS_TIERED_PRICE).addClass("aok-hidden"),e(a.SNS_BASED_PRICE).removeClass("aok-hidden"),e(a.SNS_SAVINGS_ROW).addClass("aok-hidden")):
(e(a.SNS_TIERED_PRICE).addClass("aok-hidden"),e(a.SNS_BASED_PRICE).removeClass("aok-hidden"),e(a.SNS_TIERED_SAVINGS).addClass("aok-hidden"),e(a.SNS_BASED_SAVINGS).removeClass("aok-hidden"),e(a.SNS_SAVINGS_LABEL).removeClass("aok-hidden"),e(a.SNS_SAVINGS_ROW).removeClass("aok-hidden"))):e(b.ONML_DELIVERY_OPTION_DIV).is(":checked")&&(e(a.ONE_NOW_SHIPPING_MESSAGE).removeClass("aok-hidden"),d?(e(a.SNS_TIERED_PRICE).addClass("aok-hidden"),e(a.SNS_BASED_PRICE).removeClass("aok-hidden"),e(a.SNS_SAVINGS_ROW).addClass("aok-hidden"),
k&&(e(b.SNS_TIERED_PRICE).hasClass("aok-hidden")?(e(a.SNS_SAVINGS_ROW).removeClass("aok-hidden"),e(a.SNS_SAVINGS_LABEL).removeClass("aok-hidden"),e(a.SNS_BASED_SAVINGS).removeClass("aok-hidden"),e(a.SNS_TIERED_SAVINGS).addClass("aok-hidden")):e(b.SNS_BASE_PRICE).hasClass("aok-hidden")&&(e(a.SNS_SAVINGS_ROW).removeClass("aok-hidden"),e(a.SNS_SAVINGS_LABEL).removeClass("aok-hidden"),e(a.SNS_TIERED_SAVINGS).removeClass("aok-hidden"),e(a.SNS_BASED_SAVINGS).addClass("aok-hidden")))):(e(a.SNS_TIERED_PRICE).addClass("aok-hidden"),
e(a.SNS_BASED_PRICE).removeClass("aok-hidden"),e(a.SNS_TIERED_SAVINGS).addClass("aok-hidden"),e(a.SNS_BASED_SAVINGS).removeClass("aok-hidden"),e(a.SNS_SAVINGS_LABEL).removeClass("aok-hidden"),e(a.SNS_SAVINGS_ROW).removeClass("aok-hidden")));c&&e(a.SNS_SAVINGS_ROW).addClass("aok-hidden")}},updateBuyboxPriceBlock:function(f){f&&(e(b.SNS_DELIVERY_OPTION_DIV).is(":checked")?(f.oneNowDiscountEligible||e(a.SNS_STRIKETHROUGH_PRICE).removeClass("aok-hidden"),f.justSubscribeTieredStatus?(e(b.SNS_BASE_PRICE).addClass("aok-hidden"),
e(b.SNS_TIERED_PRICE).removeClass("aok-hidden")):(e(b.SNS_BASE_PRICE).removeClass("aok-hidden"),e(b.SNS_TIERED_PRICE).addClass("aok-hidden"))):e(b.ONML_DELIVERY_OPTION_DIV).is(":checked")&&(e(b.SNS_BASE_PRICE).removeClass("aok-hidden"),e(b.SNS_TIERED_PRICE).addClass("aok-hidden"),f.oneNowDiscountEligible||(e(a.SNS_STRIKETHROUGH_PRICE).addClass("aok-hidden"),e(a.SNS_BASED_SAVINGS).addClass("aok-hidden"))))}}});p.when("A","sns-buybox-constants","sns-constants","sns-onmlv2-utils").register("sns-onmlv2-message-utils",
function(d,b,a,e){function f(){c("#sns-delivery-buybox-upsell-message").find([b.SNS_DELIVERY_NEW_OR_UNRECOGNIZED_UPSELL,b.SNS_DELIVERY_NON_TIERED_UPSELL,b.SNS_DELIVERY_TIERED_UPSELL].join()).addClass("aok-hidden");c("#onml-delivery-buybox-upsell-message").find([b.ONML_DELIVERY_NEW_OR_UNRECOGNIZED_UPSELL,b.ONML_DELIVERY_NON_TIERED_UPSELL,b.ONML_DELIVERY_TIERED_UPSELL].join()).addClass("aok-hidden")}function g(){c("#sns-delivery-pill").find([b.SNS_DELIVERY_NEW_OR_UNRECOGNIZED_PILL,b.SNS_DELIVERY_NON_TIERED_PILL,
b.SNS_DELIVERY_TIERED_PILL].join()).addClass("aok-hidden");c("#onml-delivery-pill").find([b.ONML_DELIVERY_NEW_OR_UNRECOGNIZED_PILL,b.ONML_DELIVERY_NON_TIERED_PILL,b.ONML_DELIVERY_TIERED_PILL].join()).addClass("aok-hidden")}var c=d.$;return{updateFirstRecurringDeliveryDate:function(a,e){if(a&&e){var h=a.firstRecurringDeliveryDates[e-1];c(b.SNS_ONMLV2_FRDD).each(function(){c(this).html(h)})}},updateUpsellMessages:function(e,d,h){if(e&&d&&h){var g=d.snsCustomer,q=null==d.snsJustSubscribeOptionEnabled?
d.snsCustomer||!1:d.snsJustSubscribeOptionEnabled||!1,r=c(b.SNS_DELIVERY_NEW_OR_UNRECOGNIZED_UPSELL).length?!0:!1,u=d.suppressSnSOneNowOption||!1,m=d.justSubscribeTieredStatus;d=d.tieredStatusOnRecurringDeliveryDates[h-1]===a.TIERED;e===a.DELIVERY_OPTION.SNS?(c(b.SNS_DELIVERY_UPSELL).removeClass("aok-hidden"),c(b.ONML_DELIVERY_UPSELL).addClass("aok-hidden"),q||u?r&&!g?(f(),c(b.SNS_DELIVERY_NEW_OR_UNRECOGNIZED_UPSELL).removeClass("aok-hidden")):m?(f(),c(b.SNS_DELIVERY_TIERED_UPSELL).removeClass("aok-hidden")):
(f(),c(b.SNS_DELIVERY_NON_TIERED_UPSELL).removeClass("aok-hidden")):f()):e===a.DELIVERY_OPTION.ONML?(c(b.SNS_DELIVERY_UPSELL).addClass("aok-hidden"),c(b.ONML_DELIVERY_UPSELL).removeClass("aok-hidden"),q?r&&!g?(f(),c(b.ONML_DELIVERY_NEW_OR_UNRECOGNIZED_UPSELL).removeClass("aok-hidden")):d?(f(),c(b.ONML_DELIVERY_TIERED_UPSELL).removeClass("aok-hidden")):(f(),c(b.ONML_DELIVERY_NON_TIERED_UPSELL).removeClass("aok-hidden")):(f(),c(b.ONML_DELIVERY_NEW_OR_UNRECOGNIZED_UPSELL).removeClass("aok-hidden"))):
(c(b.SNS_DELIVERY_UPSELL).addClass("aok-hidden"),c(b.ONML_DELIVERY_UPSELL).addClass("aok-hidden"),f())}},updateDiscountPill:function(e,d,h){if(e&&d&&h){var f=d.snsCustomer,q=null==d.snsJustSubscribeOptionEnabled?d.snsCustomer||!1:d.snsJustSubscribeOptionEnabled||!1,r=c(b.SNS_DELIVERY_NEW_OR_UNRECOGNIZED_PILL).length?!0:!1,u=d.suppressSnSOneNowOption||!1,m=d.justSubscribeTieredStatus;h=d.tieredStatusOnRecurringDeliveryDates[h-1]===a.TIERED;d=d.zeroBaseDiscount;e===a.DELIVERY_OPTION.SNS?(c(b.SNS_DELIVERY_PILL).removeClass("aok-hidden"),
c(b.ONML_DELIVERY_PILL).addClass("aok-hidden"),q||u?r&&!f?(g(),d||c(b.SNS_DELIVERY_NEW_OR_UNRECOGNIZED_PILL).removeClass("aok-hidden")):m?(g(),c(b.SNS_DELIVERY_TIERED_PILL).removeClass("aok-hidden")):(g(),d||c(b.SNS_DELIVERY_NON_TIERED_PILL).removeClass("aok-hidden")):g()):e===a.DELIVERY_OPTION.ONML?(c(b.SNS_DELIVERY_PILL).addClass("aok-hidden"),c(b.ONML_DELIVERY_PILL).removeClass("aok-hidden"),q?r&&!f?(g(),d||c(b.ONML_DELIVERY_NEW_OR_UNRECOGNIZED_PILL).removeClass("aok-hidden")):h?(g(),c(b.ONML_DELIVERY_TIERED_PILL).removeClass("aok-hidden")):
(g(),d||c(b.ONML_DELIVERY_NON_TIERED_PILL).removeClass("aok-hidden")):(g(),d||c(b.ONML_DELIVERY_NEW_OR_UNRECOGNIZED_PILL).removeClass("aok-hidden"))):(g(),c(b.SNS_DELIVERY_PILL).addClass("aok-hidden"),c(b.ONML_DELIVERY_PILL).addClass("aok-hidden"))}},updateBuyboxDeliveryOption:function(){c(b.SNS_DELIVERY_OPTION_DIV).is(":checked")?(d.declarative.remove(b.SNS_DECLARATIVE_ACTION),d.declarative.create(b.SNS_DECLARATIVE_ACTION,b.SNS_SUBSCRIBE_ONLY_ACTION),c(b.SNS_ONMLV2_DELIVERY_OPTION_FORM_FIELD).val(b.SNS_DELIVERY_OPTION_SNS),
c(b.SNS_SUBSCRIBE_BUTTON_DELIVERY_OPTION_FORM_FIELD).val(b.SNS_DELIVERY_OPTION_SNS),c(b.SNS_DELIVERY_OPTION_ONML_LINK).addClass("aok-hidden"),c(b.SNS_DELIVERY_OPTION_SNS_LINK).removeClass("aok-hidden"),c(b.ACCORDION_HEADER_DELIVERY_OPTION_ONML_LINK).addClass("aok-hidden"),c(b.ACCORDION_HEADER_DELIVERY_OPTION_SNS_LINK).removeClass("aok-hidden")):c(b.ONML_DELIVERY_OPTION_DIV).is(":checked")&&(d.declarative.remove(b.SNS_DECLARATIVE_ACTION),d.declarative.create(b.SNS_DECLARATIVE_ACTION,e.getOnmlDeclarativeAction()),
c(b.SNS_ONMLV2_DELIVERY_OPTION_FORM_FIELD).val(b.SNS_DELIVERY_OPTION_ONML),c(b.SNS_SUBSCRIBE_BUTTON_DELIVERY_OPTION_FORM_FIELD).val(b.SNS_DELIVERY_OPTION_ONML),c(b.SNS_DELIVERY_OPTION_SNS_LINK).addClass("aok-hidden"),c(b.SNS_DELIVERY_OPTION_ONML_LINK).removeClass("aok-hidden"),c(b.ACCORDION_HEADER_DELIVERY_OPTION_SNS_LINK).addClass("aok-hidden"),c(b.ACCORDION_HEADER_DELIVERY_OPTION_ONML_LINK).removeClass("aok-hidden"))}}});p.when("A","a-dropdown","sns-vmf-utils","sns-onmlv2-utils","sns-metrics-constants",
"sns-savings-utils","sns-constants","sns-buybox-constants","a-popover","ready").execute("sns-onmlv2-frequency-update",function(d,b,a,e,f,g,c,k,l){function h(b,h){if(b&&b.selectedRow&&b.selectedRow.$row&&b.selectedRow.$row.length&&b.selectedRow.$row[0]&&b.selectedRow.$row[0].dataset){var d=b.selectedRow.$row[0].dataset.frequencyValue;b=b.selectedRow.$row[0].dataset.selectedIndex;if(d!==t&&b!==t){a.updateFrequencyPopoverInfo(b);var k;h===c.DELIVERY_OPTION.ONML?(k=e.getOnmlFrequencyParam(),e.emitMetric(f.SNS_ONML_FREQUENCY_POPOVER_SELECTED+
"-"+d)):(k=e.getSnsFrequencyParam(),e.emitMetric(f.SNS_FREQUENCY_POPOVER_SELECTED+"-"+d));a.selectFrequency(k[b],h);b=e.getFrequencyValueExcludingDeliveryType(d);g.checkPreConditionsAndUpdateAnnualSavings(b);g.checkPreConditionsAndUpdatePotentialSavings(d)}else e.emitMetric(f.SNS_INVALID_FREQUENCY_POPOVER_INPUTS)}else e.emitMetric(f.SNS_INVALID_FREQUENCY_POPOVER_DATA_STRUCTURE);h=l.get("replenishment"+h+"FrequencyPopover");null!==h&&h!==t&&h.hide()}function n(c){var b=a.getFrequencyIndex(c);c=d.$("[data-a-accordion-name\x3d'"+
("replenishment-"+c+"-frequency-accordion")+"'] [data-a-accordion-row-name\x3d'"+(c+"FrequencyAccordionRow-"+b)+"'] a");c.length?c.click():e.emitMetric(f.SNS_INVALID_FREQUENCY_ACCORDION_ROW)}function q(a){m.ue&&m.ue.count(a,(ue.count(a)||0)+1)}var r=d.$;d.declarative("onml-show-more-frequency-options-btn-declarative","click",function(a){a=r(k.REPLENISHMENT_ONML_FREQUENCY_ACCORDION_ID).children("[id^\x3d'"+k.ONML_FREQUENCY_ACCORDION_ROW_PREFIX+"']").length;e.showMoreFrequencyOptions(a,c.DELIVERY_OPTION.ONML);
q(f.ONML_SHOW_MORE_FREQUENCY_OPTIONS_BTN_CLICKED)});d.declarative("sns-show-more-frequency-options-btn-declarative","click",function(a){a=r(k.REPLENISHMENT_SNS_FREQUENCY_ACCORDION_ID).children("[id^\x3d'"+k.SNS_FREQUENCY_ACCORDION_ROW_PREFIX+"']").length;e.showMoreFrequencyOptions(a,c.DELIVERY_OPTION.SNS);q(f.SNS_SHOW_MORE_FREQUENCY_OPTIONS_BTN_CLICKED)});d.on("a:dropdown:rcxOrdFreqSns:select",function(b){b=a.getFrequencyIndex(c.DELIVERY_OPTION.SNS);a.updateFrequencyIndex(b);var h=e.getSnsFrequencyParam();
a.selectFrequency(h[b],c.DELIVERY_OPTION.SNS);b=a.getFrequencyValue(c.DELIVERY_OPTION.SNS);h=e.getFrequencyValueExcludingDeliveryType(b);0<b.search("W")?q(f.SNS_LEGACY_WEEKLY_FREQUENCY_SELECT_METRICS):q(f.SNS_LEGACY_MONTHLY_FREQUENCY_SELECT_METRICS);g.checkPreConditionsAndUpdateAnnualSavings(h);g.checkPreConditionsAndUpdatePotentialSavings(b)});d.on("a:dropdown:rcxOrdFreqOnml:select",function(b){b=a.getFrequencyIndex(c.DELIVERY_OPTION.ONML);a.updateFrequencyIndex(b);var h=e.getOnmlFrequencyParam();
a.selectFrequency(h[b],c.DELIVERY_OPTION.ONML);b=a.getFrequencyValue(c.DELIVERY_OPTION.ONML);h=e.getFrequencyValueExcludingDeliveryType(b);0<b.search("W")?q(f.SNS_ONML_WEEKLY_FREQUENCY_SELECT_METRICS):q(f.SNS_ONML_MONTHLY_FREQUENCY_SELECT_METRICS);g.checkPreConditionsAndUpdateAnnualSavings(h);g.checkPreConditionsAndUpdatePotentialSavings(b)});d.on("a:accordion:replenishment-sns-frequency-accordion:select",function(a){h(a,c.DELIVERY_OPTION.SNS);e.emitMetric(f.SNS_FREQUENCY_POPOVER_SELECTED)});d.on("a:accordion:replenishment-onml-frequency-accordion:select",
function(a){h(a,c.DELIVERY_OPTION.ONML);e.emitMetric(f.SNS_ONML_FREQUENCY_POPOVER_SELECTED)});d.on("a:popover:beforeShow:replenishmentsnsFrequencyPopover",function(){n(c.DELIVERY_OPTION.SNS)});d.on("a:popover:beforeShow:replenishmentonmlFrequencyPopover",function(){n(c.DELIVERY_OPTION.ONML)})});p.when("A","sns-buybox-constants").execute("sns-onmlv2-quantity-update",function(d,b){var a=d.$;d.on(b.SNS_ONMLV2_QUANTITY_TRIGGER_DROPDOWN,function(e){e=e.value;a(b.SNS_ONMLV2_QUANTITY_FORM_FIELD).val(e);
a(b.SNS_SUBSCRIBE_BUTTON_QUANTITY_FORM_FIELD).val(e)});a(b.SNS_ONMLV2_QUANTITY_TRIGGER_RADIO_BUTTON).change(function(e){e=e.target.value;a(b.SNS_ONMLV2_QUANTITY_FORM_FIELD).val(e);a(b.SNS_SUBSCRIBE_BUTTON_QUANTITY_FORM_FIELD).val(e)})});p.when("A","sns-onmlv2-utils").execute("sns-accordion-content-update",function(d,b){d.declarative("sns-delivery-change-btn","click",function(a){b.updatePrimeShippingMessage()});d.on("a:sheet:beforeHide:sns_delivery_bottom_sheet",function(){b.updatePrimeShippingMessage()})});
"use strict";p.register("sns-join-prime-endpoint",function(){return{endpoint:"/amazonprime/"}});p.register("sns-priceblock-constants",function(){return{PRICEBLOCK_SNSPRICE_ROW:"#priceblock_snsprice_row",SNS_UPSELL:"#priceblock_snsupsell_row",SNS_SAVINGS:"#snsprice_savings",DP_OUR_PRICE:"#priceblock_ourprice",DP_OUR_PRICE_LABEL:"#priceblock_ourprice_lbl",DP_OUR_PRICE_SAVINGS:"#regularprice_savings",DP_OUR_PRICE_BADGING:"#ourprice_fbabadge",DP_OUR_PRICE_SHIPPING:"#ourprice_shippingmessage",DP_OUR_PRICE_PPU:"#priceblock_ourprice_row #priceblock_ourprice+.a-size-small",
DP_STRIKE_PRICE:"#price .a-text-strike",DP_SALE_PRICE:"#priceblock_saleprice",DP_SALE_PRICE_LABEL:"#priceblock_saleprice_lbl",DP_SALE_PRICE_SHIPPING:"#saleprice_shippingmessage",DP_SALE_PRICE_PPU:"#priceblock_saleprice_row #priceblock_saleprice+.a-size-small",DP_DEAL_PRICE:"#priceblock_dealprice",DP_DEAL_PRICE_SAVINGS:"#dealprice_savings",DP_DEAL_PRICE_SHIPPING:"#dealprice_shippingmessage",DP_DEAL_PRICE_PPU:"#priceblock_dealprice_row #priceblock_dealprice+.a-size-small",SNS_PITCH_PRICE_UPSELL_TEXT:"#onmlPriceBlockUpsellText",
SNS_ATF_REDESIGN_UPSELL_UNCHECKED:"#onml-atf-redesign-upsell-unchecked",SNS_ATF_REDESIGN_UPSELL_CHECKED:"#onml-atf-redesign-upsell-checked",ONML_ATF_REDESIGN_UPSELL:"#onml-atf-redesign-upsell",SNS_PITCH_PRICE_FEATURE:"#snsPitchPrice_feature_div",NEW_PITCH_PRICE_FEATURE:"#newPitchPriceWrapper_feature_div",MOBILE_OUR_PRICE_SHIPPING:"#ourPrice_availability",SHIPPING_DETAILS:'[data-a-sheet*\x3d"shippingDetailsDisplayContent"]',SNS_TIERED_PRICE:"#unifiedPrice_feature_div #priceblock_snsprice_Tiered, #snsPrice #priceblock_snsprice_Tiered",
SNS_BASED_PRICE:"#unifiedPrice_feature_div #priceblock_snsprice_Based, #snsPrice #priceblock_snsprice_Based",SNS_TIERED_SAVINGS:"#unifiedPrice_feature_div #snsSavings_Tiered, #snsPrice #snsSavings_Tiered",SNS_BASED_SAVINGS:"#unifiedPrice_feature_div #snsSavings_NonTiered, #snsPrice #snsSavings_NonTiered",SNS_SAVINGS_LABEL:"#unifiedPrice_feature_div #snsSavings_lbl",SNS_SAVINGS_ROW:"#unifiedPrice_feature_div #priceblock_snsSavings_row, #snsPrice #priceblock_snsSavings_row",ONE_NOW_SHIPPING_MESSAGE:"#priceblock_oneNowShippingMessage, #priceblock_oneNowShippingMessage_dpv2",
SNS_STRIKETHROUGH_PRICE:"#snsStrikeThroughPrice"}});p.when("A","sns-utils","sns-constants","sns-price-utils","sns-buybox-constants","sns-priceblock-constants").register("sns-price-refresh",function(d,b,a,e,f,g){return{init:function(){d.declarative("sns-opt-in-checked","change",function(){e.showSnSPriceIfSnSOptInChecked()});b.registerCallbackForNameSpace(a.EVENT_NAMESPACE.PAGE_UPDATE,e.showSnSPriceIfSnSOptInChecked);e.showSnSPriceIfSnSOptInChecked();d.$(f.SNS_BUY_USED_BUTTON).click(function(){var c=
f.SNS_OPT_IN_CHECKBOX,e=b.getOnmlUserPref(a.USER_PREFS_KEYS.SNS_OPT_IN),l=g.SNS_UPSELL,h=g.SNS_PITCH_PRICE_UPSELL_TEXT,n=g.ONML_ATF_REDESIGN_UPSELL;!0===e&&(d.$(c).click(),b.setOnmlUserPref(a.USER_PREFS_KEYS.SNS_OPT_IN,!0));d.$(n).addClass("aok-hidden");d.$(l).addClass("aok-hidden");d.$(h).addClass("aok-hidden")})}}});p.when("A","sns-utils","sns-priceblock-constants","sns-buybox-constants").register("sns-price-utils",function(d,b,a,e){var f=d.$,g=a.SNS_PITCH_PRICE_UPSELL_TEXT,c=a.SNS_PITCH_PRICE_FEATURE,
k=a.NEW_PITCH_PRICE_FEATURE,l=a.PRICEBLOCK_SNSPRICE_ROW,h=e.SNS_OPT_IN_CHECKBOX,n=a.SNS_UPSELL,q=a.SNS_SAVINGS,r=a.DP_OUR_PRICE,m=a.DP_OUR_PRICE_LABEL,z=a.DP_OUR_PRICE_SAVINGS,p=a.DP_OUR_PRICE_BADGING,t=a.DP_OUR_PRICE_SHIPPING,y=a.DP_SALE_PRICE,A=a.DP_SALE_PRICE_LABEL,B=a.DP_SALE_PRICE_SHIPPING,C=a.DP_DEAL_PRICE,D=a.DP_DEAL_PRICE_SAVINGS,w=a.DP_DEAL_PRICE_SHIPPING,E=a.MOBILE_OUR_PRICE_SHIPPING,F=a.SHIPPING_DETAILS,G=e.SNS_BUY_NEW_PRICE,H=e.NON_CBB_BUY_NEW_PRICE,I=e.CBB_BUY_NEW_PRICE,J=e.SNS_PRICE_IN_BUY_USED_SECTION,
K=e.CBB_SNS_BUY_NEW_PRICE,L=e.DPV2_BUY_NEW_PRICE,M=a.SNS_ATF_REDESIGN_UPSELL_CHECKED,N=a.SNS_ATF_REDESIGN_UPSELL_UNCHECKED;return{showSnSPriceIfSnSOptInChecked:function(){b.isSnSEligible()&&(f(h).is(":checked")?b.shouldShowPrice()&&(f(l).length?(f(l).removeClass("aok-hidden"),f(q).removeClass("a-hidden"),f(n).addClass("aok-hidden"),f(z).addClass("a-hidden"),f(p).addClass("a-hidden"),f(t).addClass("a-hidden"),f(E).addClass("a-hidden"),f(r).addClass("a-text-strike a-size-base a-color-secondary onml-price-inactive").removeClass("a-size-medium a-color-price"),
f(m).addClass("onml-price-inactive"),f(y).addClass("a-text-strike a-size-base a-color-secondary onml-price-inactive").removeClass("a-size-medium a-color-price "),f(A).addClass("onml-price-inactive"),f(B).addClass("a-hidden"),f(C).addClass("a-text-strike a-size-base a-color-secondary onml-price-inactive").removeClass("a-size-medium a-color-price"),f(D).addClass("a-hidden"),f(w).addClass("a-hidden"),f(l).css({display:"table-row",visibility:"visible"}),f(l).prev().has(F).addClass("aok-hidden"),f(H).addClass("aok-hidden"),
f(G).removeClass("aok-hidden"),f(I).addClass("aok-hidden"),f(J).addClass("aok-hidden"),f(K).removeClass("aok-hidden"),f(L).addClass("aok-hidden")):(f(g).addClass("aok-hidden"),f(k).addClass("aok-hidden"),f(c).removeClass("aok-hidden"),f(c).css({display:"block",visibility:"visible"}),f(M).removeClass("aok-hidden"),f(N).addClass("aok-hidden"))):f(l).length?(f(l).addClass("aok-hidden"),f(q).addClass("a-hidden"),f(n).removeClass("aok-hidden"),f(z).removeClass("a-hidden"),f(p).removeClass("a-hidden"),
f(t).removeClass("a-hidden"),f(E).removeClass("a-hidden"),f(r).addClass("a-size-medium a-color-price").removeClass("a-text-strike a-size-base a-color-secondary onml-price-inactive"),f(m).removeClass("onml-price-inactive"),f(y).addClass("a-size-medium a-color-price").removeClass("a-text-strike a-size-base a-color-secondary onml-price-inactive"),f(A).removeClass("onml-price-inactive"),f(B).removeClass("a-hidden"),f(C).addClass("a-size-medium a-color-price").removeClass("a-text-strike a-size-base a-color-secondary onml-price-inactive"),
f(D).removeClass("a-hidden"),f(w).removeClass("a-hidden"),f(l).prev().has(F).removeClass("aok-hidden"),f(H).removeClass("aok-hidden"),f(G).addClass("aok-hidden"),f(I).removeClass("aok-hidden"),f(J).addClass("aok-hidden"),f(K).addClass("aok-hidden"),f(L).removeClass("aok-hidden")):(f(g).removeClass("aok-hidden"),f(k).removeClass("aok-hidden"),f(c).addClass("aok-hidden"),f(g).css({display:"block",visibility:"visible"}),f(N).removeClass("aok-hidden"),f(M).addClass("aok-hidden")))}}});p.when("A","sns-constants",
"sns-buybox-constants","sns-states-loaded-in-dom").register("sns-utils",function(d,b,a){var e=d.$,f={},g={},c=function(a,c,b){var d,f=function(a){if(!a||"object"===typeof a)return a;var b=e.parseJSON;m.JSON&&m.JSON.parse&&(b=JSON.parse);try{return"string"===typeof a?b(a):null}catch(h){return m.ueLogError&&m.ueLogError(h,{logLevel:"ERROR",attribution:"sns",message:"An error occurred when getting onml parameters from page-state. a-state: "+c}),null}};a=e(a||"html");return 1<=a.length&&(a=a.find("script[data-a-state*\x3d'"+
c+"']"))&&1<=a.length?(d=f(a.first().text()),f("object"===typeof d?d[b]:null)):d},k=function(b){var e=c(a.SNS_OPT_IN_FEATURE_DIV,"sns-onml-params","onmlParams");return b?e&&e[b]:e},l=function(){var a=k("deviceType"),c=g[b.USER_PREFS_KEYS.ONML_PARAMS],c=c&&c.deviceType;return a||c};return{isSnSEligible:function(){return k("snsEligible")},getAStateFromDom:c,getOnmlParam:k,shouldShowPrice:function(){return k("showPrice")},getDeviceType:l,registerCallbackForNameSpace:function(a,c){f[a]||(f[a]=[]);-1===
f[a].indexOf(c)&&f[a].push(c)},executeCallbacksForNameSpace:function(a){if((a=f[a])&&a.constructor===Array)for(var c=0;c<a.length;c++)a[c]()},setOnmlUserPref:function(a,c){g[a]=c},getOnmlUserPref:function(a){return g[a]},deleteOnmlUserPref:function(a){delete g[a]},isMobileDevice:function(){var a=l();return"mobile"===a||"mobileApp"===a},isMobileApp:function(){return"mobileApp"===l()},isTabletApp:function(){var a=l();return"iPad"===a||"tabletApp"===a||"tabletLargeApp"===a},isVerucaBuyNowEnabled:function(){return k("verucaBuyNowEnabled")},
isVerucaOneClickEnabled:function(){return k("verucaOneClickEnabled")},enableSnSOptIn:function(){e(a.SNS_OPT_IN_CHECKBOX).removeAttr("disabled")},isSnsCustomer:function(){return k("snsCustomer")}}});p.when("A","a-checkbox","sns-buybox-constants","sns-constants").register("sns-onmlv2-utils",function(d,b,a,e){function f(a,c){return![0,1,3,4,5].includes(c)}function g(a){m.ue&&m.ue.count(a,(ue.count(a)||0)+1)}var c=d.$,k,l=function(a,b,e){var d,f=function(a){if(!a||"object"===typeof a)return a;var e=c.parseJSON;
m.JSON&&m.JSON.parse&&(e=JSON.parse);try{return"string"===typeof a?e(a):null}catch(d){return w("snsGetAStateException","NotDefined"),m.ueLogError&&m.ueLogError(d,{logLevel:"ERROR",attribution:"sns",message:"An error occurred when getting onml parameters from page-state. a-state: "+b+" with string: "+a}),null}};a=c(a||"html");return 1<=a.length&&(a=a.find("script[data-a-state*\x3d'"+b+"']"))&&1<=a.length?(d=f(a.first().text()),f("object"===typeof d?d[e]:null)):d},h=function(a,b,e){var d,f=function(a){if(null===
a||"object"===typeof a||"boolean"===typeof a)return a;var e=c.parseJSON;m.JSON&&m.JSON.parse&&(e=JSON.parse);try{return"string"===typeof a?e(a):null}catch(d){return w("b2bGetAStateException","NotDefined"),m.ueLogError&&m.ueLogError(d,{logLevel:"ERROR",attribution:"b2b",message:"An error occurred when getting onml parameters from page-state. a-state: "+b+" with string: "+a}),null}};a=c(a||"html");return 1<=a.length&&(a=a.find("script[data-a-state*\x3d'"+b+"']"))&&1<=a.length?(d=f(a.first().text()),
f("object"===typeof d?d[e]:null)):d},n=function(a,b,e){var d;a=c(a||"html");if(1<=a.length&&(a=a.find("script[data-a-state*\x3d'"+b+"']"))&&1<=a.length){if((a=a.first().text())&&"object"!==typeof a){var f=c.parseJSON;m.JSON&&m.JSON.parse&&(f=JSON.parse);try{d="string"===typeof a?f(a):null}catch(h){w("snsGetAStateWithoutJsonException","NotDefined"),m.ueLogError&&m.ueLogError(h,{logLevel:"ERROR",attribution:"sns",message:"An error occurred when getting onml parameters from page-state. a-state: "+b+
" with string: "+a}),d=null}}else d=a;return e="object"===typeof d?d[e]:null}return d},q=function(){return l(t,a.SNS_BUY_BOX_PARAMS,a.SNS_BUY_BOX_PARAM_MAP)},r=function(){return l(t,"sns-frequency-params","snsFrequencyParamsMap")},p=function(){return l(t,"sns-frequency-params","onmlFrequencyParamsMap")},z=function(){return c(a.SNS_DELIVERY_OPTION_DIV).is(":checked")?a.SNS_DELIVERY_OPTION_SNS:a.SNS_DELIVERY_OPTION_ONML},v=function(){var a=null,c=p();c&&Array.isArray(c)&&(a=c.find(function(a){if(!0===
a.isDefault)return a}));return a?!0===a.isDefault:!1},x=function(a){var c=q();return c?c.deviceType===a:!1},y=function(){return x("mobile")||x("mobileApp")},A=function(){return x("web")},B=function(){return document.querySelector(a.SNS_ACCORDION_HEADER_RADIO_BUTTON)},C=function(a,c){return a&&c?a.tieredStatusOnRecurringDeliveryDates[c-1]===e.TIERED:!1},D=function(a,c){return a&&c?a.firstRecurringDeliveryDates[c-1]:""},w=function(a,c){m.ue&&m.ue.count(a,(ue.count(a)||0)+1);m.uet&&m.uet("cf",c,{wb:1})},
g=function(a){m.ue&&m.ue.count(a,(ue.count(a)||0)+1)};return{getAStateFromDom:l,getAStateFromDomWithoutJson:n,getDeliveryOption:function(){return c(a.SNS_ONMLV2_DELIVERY_OPTION_FORM_FIELD).val()},getSwitchDeliveryOption:function(){if(!k){var a=q();a&&(k=a.deliveryOption)}return k},getBuyboxMessageParam:q,isMobileDevice:y,isMobileWeb:function(){return x("mobile")},isMobileApp:function(){return x("mobileApp")},isTabletApp:function(){return x("iPad")||x("tabletApp")||x("tabletLargeApp")},isWeb:A,getSnsFrequencyParam:r,
getSnsFrequencyParamForB2B:function(){return h(t,"sns-frequency-params","snsFrequencyParamsMap")},getOnmlFrequencyParam:p,getOnmlFrequencyParamForB2B:function(){return h(t,"sns-frequency-params","onmlFrequencyParamsMap")},getIsCustomerPrimeMap:function(){return h(t,"is-prime-customer","IsPrime")},getIsB2bDiscountWinningMap:function(){return h(t,"is-b2b-discount-winning","isB2bDiscountWinning")},getIsRDProgramWinner:function(){return h(t,"rd-program-params","isRDProgramWinner")},getDeliveryInfoParam:function(){var a;
a=c("#replenishment-onml-frequency-accordion");var b=c("#replenishment-sns-frequency-accordion");a=0!==a.length||0!==b.length?Math.max(a.children().length,b.children().length):Math.max(c("[name\x3drcxOrdFreqSns]").children("option").length,c("[name\x3drcxOrdFreqOnml]").children("option").length);b=l(t,"sns-frequency-params","deliveryInfoParamsMap");6===a&&b.snsDates&&6<b.snsDates.length&&(a=b,a.snsDates=a.snsDates.filter(f),a.onmlDates=a.onmlDates.filter(f),g("filteringWeeklyDeliveryInfoWhenGranularDisabled"),
b=a);return b},getDiscountOptionsParam:function(){return l(t,"sns-frequency-params","discountOptionsParamsMap")},getDiscountTypeParam:function(){return n(t,"sns-frequency-params","deliveryTypeParamsMap")},getOnmlDateParam:function(){return n(t,"sns-frequency-params","onmlDateParamsMap")},createHiddenInput:function(a,c){return'\x3cinput type\x3d"hidden" name\x3d"'+a+'" value\x3d"'+c+'"\x3e'},getBuyNowAction:function(){return y()?c(a.MOBILE_ADD_TO_CART_DIV).attr("action"):A()?c(a.ADD_TO_CART_DIV).attr("action"):
c(a.TABLET_ADD_TO_CART_DIV).attr("action")},getOnmlv2FormValueByName:function(b){return c(a.SNS_ONMLV2_FORM_FIELDS+" [name\x3d'"+b+"']").val()},getSubscribeButtonFormValueByName:function(b){return c(a.SUBSCRIBE_BUTTON_FORM_FIELDS+" [name\x3d'"+b+"']").val()},isCbbTemplateEnabled:function(){return c(a.SNS_CBB_ACCORDION_ROW).length},removeFormFieldsIntroducedByCbb:function(){c(a.SNS_ONMLV2_FORM_FIELDS+" #ASIN").remove();c(a.SNS_ONMLV2_FORM_FIELDS+" #offerListingID").remove();c(a.SNS_ONMLV2_FORM_FIELDS+
" #snsOfferListingID").remove();c(a.SNS_ONMLV2_FORM_FIELDS+" #snsMerchantID").remove();c(a.SNS_ONMLV2_FORM_FIELDS+" #rcxOrdFreq").remove();c(a.SNS_ONMLV2_FORM_FIELDS+" #quantity").remove()},getCbbSnsAccordionRowRadioButton:B,isCbbSnsAccordionRowExpanded:function(){return"true"===B().getAttribute("aria-checked")},isTiered:C,getOnmlFirstRecurringDeliveryDate:D,getOnmlDeclarativeAction:function(){return c("#onmlDeclarativeAction").val()},generateUrlParams:function(b){if(!b){var e=a.SNS_SELECT_DELIVERY_URL;
return e}var d=(y()?c(a.SNS_FREQUENCY_FORM_FIELD_MOBILE):c(a.SNS_FREQUENCY_FORM_FIELD)).val(),f=[];f.subscribeOnlyDate=b.justSubscribeDeliveryDate;f.subscribeOnlyDateShort=b.justSubscribeShortDeliveryDate;f.subscribeOnlyDiscount=b.justSubscribeTieredStatus?b.tieredDiscountPercent:b.baseDiscountPercent;f.onmlDate=b.oneTimeDeliveryDate;f.onmlDateShort=b.oneTimeShortDeliveryDate;f.onmlDiscount=b.baseDiscountPercent;f.onmlNextDate=D(b,d);f.onmlNextDiscount=C(b,d)?b.tieredDiscountPercent:b.baseDiscountPercent;
f.snsDeliveryOption=c(a.SNS_SELECT_DELIVERY_OPTION_ID).val();f.isMobile=y();f.snscsrf=b.deliveryModalCSRFToken;e=a.SNS_SELECT_DELIVERY_URL;Object.keys(f).forEach(function(a){e+="\x26"+a+"\x3d"+encodeURI(f[a])});return e},createUrlParameter:function(a,c){c=encodeURIComponent(c);return a+"\x3d"+c+"\x26"},getDefaultDeliveryOption:function(){return v()?a.SNS_DELIVERY_OPTION_ONML:a.SNS_DELIVERY_OPTION_SNS},isONMLDefault:v,getSelectedDeliveryOption:z,updatePrimeShippingMessage:function(){z()===a.SNS_DELIVERY_OPTION_SNS?
c(a.SNS_CBB_PRIME_SHIPPING).addClass("aok-hidden"):c(a.SNS_CBB_PRIME_SHIPPING).removeClass("aok-hidden")},getDefaultFrequency:function(a){var c=null;(a=a?r():p())&&Array.isArray(a)&&(c=a.find(function(a){if(!0===a.isDefault)return a}));return c?c.value.split("|")[0]:null},getCurrencyCode:function(){return n(t,"sns-huc-data","currencyCode")},emitSsbMetrics:w,emitInvalidFrequencyMetric:function(a,b){var e=c("input[name\x3drcxOrdFreqOnml]").val(),d=c("input[name\x3drcxOrdFreqSns]").val(),f=/^[0-9][M|W]\|onml$/,
h=/^[0-9][M|W]\|sns$/;e===t||null===e||f.test(e)||g(a);d===t||null===d||h.test(d)||g(b)},emitMetric:g,getAnnualSavingsParamMap:function(){return l(t,"sns-upsell-params","annualSavingsParamsMap")},getPotentialSavingsParamMap:function(){return l(t,"sns-upsell-pot-savings-params","potentialSavingsParamsMap")},getAnnualSavingsWeblabTreatment:function(){return n(t,"sns-upsell-params","annualSavingsWeblabTreatment")},getDefaultSavingsValue:function(){return n(t,"sns-upsell-params","defaultAnnualSavingsValue")},
recordWeblabTriggers:function(a,c){try{m.ue&&"function"===typeof m.ue.trigger&&m.ue.trigger(a,c)}catch(b){g("snsWeblabTriggeringException")}},logErrorWithAttribution:function(a,c){m.ueLogError&&m.ueLogError(c,{logLevel:"ERROR",attribution:a})},getSubscriberDiscountMessageWeblabTreatment:function(){return n(t,a.SNS_SUBSCRIBER_DISCOUNT_MESSAGE_STATE_ID,"subscriberDiscountMessageTreatment")},isSnSAccordionActive:function(){var a=d.$(e.ACTIVE_ACCORDION_SELECTOR).data(e.ACCORDION_ROW_NAME_SELECTOR);return a===
e.SNS_ACCORDION_ROW_NAME_DESKTOP||a===e.SNS_ACCORDION_ROW_NAME_MOBILE||a===e.SNS_ACCORDION_ROW_NAME_MOBILE_APP},isSnSSelectedAccordion:function(a){a=a.selectedRow.rowName;return a===e.SNS_ACCORDION_ROW_NAME_DESKTOP||a===e.SNS_ACCORDION_ROW_NAME_MOBILE||a===e.SNS_ACCORDION_ROW_NAME_MOBILE_APP},isSnSAccordionActiveForDeviceType:function(a){var c=d.$(e.ACTIVE_ACCORDION_SELECTOR).data(e.ACCORDION_ROW_NAME_SELECTOR);return a===e.DEVICE_TYPE.DESKTOP?c===e.SNS_ACCORDION_ROW_NAME_DESKTOP:a===e.DEVICE_TYPE.MOBILE?
c===e.SNS_ACCORDION_ROW_NAME_MOBILE:a===e.DEVICE_TYPE.MOBILE_APP?c===e.SNS_ACCORDION_ROW_NAME_MOBILE_APP:!1},isSnSSelectedAccordionForDeviceType:function(a,c){a=a.selectedRow.rowName;return c===e.DEVICE_TYPE.DESKTOP?a===e.SNS_ACCORDION_ROW_NAME_DESKTOP:c===e.DEVICE_TYPE.MOBILE?a===e.SNS_ACCORDION_ROW_NAME_MOBILE:c===e.DEVICE_TYPE.MOBILE_APP?a===e.SNS_ACCORDION_ROW_NAME_MOBILE_APP:!1},showMoreFrequencyOptions:function(b,d){for(var f=0;f<b;f++){var h;h=d===e.DELIVERY_OPTION.SNS?c("#"+a.SNS_FREQUENCY_ACCORDION_ROW_PREFIX+
f):c("#"+a.ONML_FREQUENCY_ACCORDION_ROW_PREFIX+f);h.hasClass("aok-hidden")&&h.removeClass("aok-hidden")}d===e.DELIVERY_OPTION.SNS?c(a.REPLENISHMENT_SNS_FREQUENCY_ACCORDION_ID).find(a.SHOW_MORE_FREQUENCY_OPTIONS_SECTION).addClass("aok-hidden"):c(a.REPLENISHMENT_ONML_FREQUENCY_ACCORDION_ID).find(a.SHOW_MORE_FREQUENCY_OPTIONS_SECTION).addClass("aok-hidden")},getQuantityIndex:function(){var c=d.$(a.SNS_QUANTITY);try{var b=c.prop("selectedIndex");if(0===b)return b;if(0<b)return b-("a-prompt"===c[0].options[0].className?
1:0)}catch(e){g("snsQuantityIndexException")}},getFrequencyValueExcludingDeliveryType:function(a){if(null!==a&&"string"===typeof a)return a.replace(/\|(.*)/,"")}}});p.when("A","a-dropdown","sns-onmlv2-utils","sns-buybox-constants","sns-constants","sns-savings-utils").register("sns-vmf-utils",function(d,b,a,e,f,g){var c=d.$,k=function(a){var e=c("[name\x3drcxOrdFreqSns]"),d=c("[name\x3drcxOrdFreqOnml]");0!==e.length&&0!==d.length&&(e=e[0].options[a].value,a=d[0].options[a].value,b.getSelect(c("[name\x3drcxOrdFreqSns]")).setValue(e),
b.getSelect(c("[name\x3drcxOrdFreqOnml]")).setValue(a))},l=function(b){Object.keys(f.DELIVERY_OPTION).forEach(function(d){d=f.DELIVERY_OPTION[d];var h=d+"FrequencySelectedIndex",k=d===f.DELIVERY_OPTION.SNS?a.getSnsFrequencyParam():a.getOnmlFrequencyParam();c("input[name\x3d'"+h+"']").val(b);h=k[b].label;c("#replenishment-"+d+"-frequency-trigger").text(h);k=k[b].value;c("input[name\x3d'"+(e.SNS_FREQUENCY_NAME+d+"V2")+"']").val(k)})},h=function(a){var b=0;0<c(e.RCX_ORD_FREQ_ONML_WRAPPER).length||0<
c(e.RCX_ORD_FREQ_SNS_WRAPPER).length?b=a===f.DELIVERY_OPTION.SNS?c("[name\x3drcxOrdFreqSns]").prop("selectedIndex"):c("[name\x3drcxOrdFreqOnml]").prop("selectedIndex"):(a+="FrequencySelectedIndex")&&0<a.length&&(b=c("input[name\x3d'"+a+"']").val());return b},n=function(a){var b=c("input[name\x3d'"+("rcxOrdFreq"+a+"V2")+"']");return b!==t&&null!==b&&0!==b.length?b.val():a===f.DELIVERY_OPTION.SNS?c("[name\x3drcxOrdFreqSns]").val():c("[name\x3drcxOrdFreqOnml]").val()};return{updateFrequencyIndex:k,selectFrequency:function(b,
d){c(".sns-delivery-buybox-upsell-message").html(b.upsellInformation.message);c(".sns-delivery-buybox-upsell-additional-message-title").html(b.upsellInformation.additionalMessageTitle);c(".sns-delivery-buybox-upsell-additional-message").html(b.upsellInformation.additionalMessage);if("sns"===d){c(".onml-delivery-link").addClass("aok-hidden");if(-1<b.value.indexOf("W|")){c(".sns-delivery-link").addClass("aok-hidden");c(".sns-delivery-link-weekly").removeClass("aok-hidden");var f=c(".sns-delivery-link-weekly").html()}else c(".sns-delivery-link").removeClass("aok-hidden"),
c(".sns-delivery-link-weekly").addClass("aok-hidden"),f=c(".sns-delivery-link").html();c(e.ACCORDION_HEADER_DELIVERY_OPTION_SNS_LINK).html(f);c(e.ACCORDION_HEADER_DELIVERY_OPTION_ONML_LINK).addClass("aok-hidden");c(e.ACCORDION_HEADER_DELIVERY_OPTION_SNS_LINK).removeClass("aok-hidden");c(e.SNS_DELIVERY_OPTION_SNS_LINK_TEXT_IDENTIFIER).removeClass("aok-hidden");c(e.SNS_DELIVERY_OPTION_ONML_LINK_TEXT_IDENTIFIER).addClass("aok-hidden")}else c(".sns-delivery-link").addClass("aok-hidden"),c(".sns-delivery-link-weekly").addClass("aok-hidden"),
c(".onml-delivery-link").removeClass("aok-hidden"),c(e.ACCORDION_HEADER_DELIVERY_OPTION_ONML_LINK).removeClass("aok-hidden"),c(e.ACCORDION_HEADER_DELIVERY_OPTION_SNS_LINK).addClass("aok-hidden"),c(e.SNS_DELIVERY_OPTION_SNS_LINK_TEXT_IDENTIFIER).addClass("aok-hidden"),c(e.SNS_DELIVERY_OPTION_ONML_LINK_TEXT_IDENTIFIER).removeClass("aok-hidden");b=b.highlightedDiscount;var f=a.getDiscountTypeParam(),h=null!=a.getIsB2bDiscountWinningMap()&&!0===a.getIsB2bDiscountWinningMap()[0],k=null!=a.getIsB2bDiscountWinningMap()&&
!0===a.getIsB2bDiscountWinningMap()[1],l=c(".discountPill \x3e #tieredDiscountText"),m=c(".discountPill \x3e #nonTieredDiscountText");0!==l.length&&0!==m.length&&(0===b?(m.removeClass("aok-hidden"),l.addClass("aok-hidden")):(l.removeClass("aok-hidden"),m.addClass("aok-hidden")));0===b?(c("#subscriptionPrice \x3e #sns-base-price").removeClass("aok-hidden"),c("#subscriptionPrice \x3e #sns-tiered-price").addClass("aok-hidden"),c("#snsDetailPagePrice \x3e #sns-base-price").removeClass("aok-hidden"),c("#snsDetailPagePrice \x3e #sns-tiered-price").addClass("aok-hidden"),
c(e.SNS_BASE_DISCOUNT_MESSAGE).removeClass("aok-hidden"),c(e.SNS_TIERED_DISCOUNT_MESSAGE).addClass("aok-hidden"),c(".discountPillLeft").addClass("pillLightUp"),c(".discountPillRight").removeClass("pillLightUp"),f===e.DISCOUNT_TYPE_ZERO_BASE||h?c("#snsDiscountPill").addClass("aok-hidden"):c("#snsDiscountPill").removeClass("aok-hidden"),h?(c(".sns-ab-price-win-delivery-buybox-upsell-message").removeClass("aok-hidden"),c(".sns-delivery-buybox-upsell-message").addClass("aok-hidden"),c(".sns-delivery-buybox-upsell-additional-message-title").addClass("aok-hidden"),
c(".sns-delivery-buybox-upsell-additional-message").addClass("aok-hidden")):(c(".sns-ab-price-win-delivery-buybox-upsell-message").addClass("aok-hidden"),c(".sns-delivery-buybox-upsell-message").removeClass("aok-hidden"),c(".sns-delivery-buybox-upsell-additional-message-title").removeClass("aok-hidden"),c(".sns-delivery-buybox-upsell-additional-message").removeClass("aok-hidden"))):(c("#subscriptionPrice \x3e #sns-base-price").addClass("aok-hidden"),c("#subscriptionPrice \x3e #sns-tiered-price").removeClass("aok-hidden"),
c("#snsDetailPagePrice \x3e #sns-base-price").addClass("aok-hidden"),c("#snsDetailPagePrice \x3e #sns-tiered-price").removeClass("aok-hidden"),c(e.SNS_BASE_DISCOUNT_MESSAGE).addClass("aok-hidden"),c(e.SNS_TIERED_DISCOUNT_MESSAGE).removeClass("aok-hidden"),c(".discountPillLeft").removeClass("pillLightUp"),c(".discountPillRight").addClass("pillLightUp"),f===e.DISCOUNT_TYPE_ZERO_BASE&&"onml"===d||k?c("#snsDiscountPill").addClass("aok-hidden"):c("#snsDiscountPill").removeClass("aok-hidden"),k?(c(".sns-ab-price-win-delivery-buybox-upsell-message").removeClass("aok-hidden"),
c(".sns-delivery-buybox-upsell-message").addClass("aok-hidden"),c(".sns-delivery-buybox-upsell-additional-message-title").addClass("aok-hidden"),c(".sns-delivery-buybox-upsell-additional-message").addClass("aok-hidden")):(c(".sns-ab-price-win-delivery-buybox-upsell-message").addClass("aok-hidden"),c(".sns-delivery-buybox-upsell-message").removeClass("aok-hidden"),c(".sns-delivery-buybox-upsell-additional-message-title").removeClass("aok-hidden"),c(".sns-delivery-buybox-upsell-additional-message").removeClass("aok-hidden")),
f===e.DISCOUNT_TYPE_ZERO_BASE&&"sns"===d&&(b=a.getSubscriberDiscountMessageWeblabTreatment(),"undefined"===typeof b||null===b?a.emitMetric("snsSdmExperimentTreatmentUndefined"):(a.recordWeblabTriggers(e.SUBSCRIBER_DISCOUNT_MESSAGE_EXPERIMENT_ID,b),a.emitMetric("snsSdmExperimentTriggeringSuccess"))));g.checkPreConditionsAndUpdatePotentialSavings(n(d))},updateFrequencyPopoverInfo:l,getFrequencyIndex:h,updateFrequencyInfoForDeliveryOption:function(){if(0<c(e.RCX_ORD_FREQ_ONML_WRAPPER).length||0<c(e.RCX_ORD_FREQ_SNS_WRAPPER).length)c(e.RCX_ORD_FREQ_ONML_WRAPPER).hasClass("aok-hidden")?
k(c("[name\x3drcxOrdFreqSns]").prop("selectedIndex")):k(c("[name\x3drcxOrdFreqOnml]").prop("selectedIndex"));else{var a=c(e.REPLENISHMENT_ONML_FREQUENCY_POPOVER_ID).hasClass("aok-hidden")||c(e.REPLENISHMENT_ONML_FREQUENCY_INFO_POPOVER_ID).hasClass("aok-hidden")?f.DELIVERY_OPTION.SNS:f.DELIVERY_OPTION.ONML,a=h(a);l(a)}},getFrequencyValue:n,isSelectedFreqSameAsDefaultFreq:function(){var c=a.getDefaultFrequency(!0),b=a.getDefaultFrequency(!1),c=null!==c?c:b,b=(b=a.getSelectedDeliveryOption()===f.DELIVERY_OPTION.SNS?
n(f.DELIVERY_OPTION.SNS):n(f.DELIVERY_OPTION.ONML))?b.split("|")[0]:null;return c===b}}});p.when("A","sns-buybox-constants","ready").register("sns-accessibilty-handler",function(d,b){var a=d.$;d=[b.SNS_QUANTITY,b.SNS_FREQUENCY_FORM_FIELD];var e=function(b){!b||!b instanceof a||0===b.length||b.attr("tabIndex",0)};e(a(b.DSK_BB+", "+b.SNS_CBB_ACCORDION_ROW+", "+b.DSK_BB_DPV1).find(d.join()));return{setZeroTabIndex:e}});p.when("ready").register("sns-stringify-util",function(){return JSON&&"function"===
typeof JSON.stringify?JSON.stringify:function(){var d={'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t"},b=/[\\"\u0000-\u001F\u2028\u2029]/g,a=Object.prototype.toString,e=Array.isArray||function(b){return"[object Array]"===a.call(b)},f=function(a){return d[a]||"\\u"+(a.charCodeAt(0)+65536).toString(16).substr(1)};return function c(d){if(null===d)return"null";if("number"===typeof d)return isFinite(d)?d.toString():"null";if("boolean"===typeof d)return d.toString();if("object"===
typeof d){if("function"===typeof d.toJSON)return c(d.toJSON());if(e(d)){for(var l="[",h=0;h<d.length;h++)l+=(h?", ":"")+c(d[h]);return l+"]"}if("[object Object]"===a.call(d)){l=[];for(h in d)d.hasOwnProperty(h)&&l.push(c(h)+": "+c(d[h]));return"{"+l.join(", ")+"}"}}return'"'+d.toString().replace(b,f)+'"'}}()});p.when("A","sns-stringify-util","ready").register("sns-declarative-util",function(d,b){function a(a){return a&&("object"===typeof a||"object"===typeof a.prototype)}function e(){for(var a=0;a<
arguments.length;a++)if("string"!==typeof arguments[a])throw"Function parameter must be of type string.";}function f(){for(var a=Object.prototype.toString,b=Array.isArray||function(b){return"[object Array]"===a.call(b)},d=0;d<arguments.length;d++){var f=arguments[d];if(b(f)&&0<f.length)for(var g=0;g<f.length;g++)e(f[g]);else throw"Function parameter must be a non empty array.";}}function g(c){var e="data-"+c.getAttribute("data-action"),f=function(){var a=c.getAttribute(e),f=a?d.parseJSON(a):{};f.save=
function(){var a=f.save;delete f.save;var d=b(f);c.setAttribute(e,d);f.save=a};return f};return{hasExactKeyHeirarchy:function(c,b){var e=f();c=c.split(".");for(var d=0<c.length,g=0;g<c.length&&d;g++)var k=c[g],d=a(e)&&e.hasOwnProperty(k),e=e[k];d&&b!==t&&(d=e===b);return d},hasParsableJSON:function(){try{return f().save(),!0}catch(a){return!1}},put:function(c){var b=f();a(b.inputs)||(b.inputs={});d.$.each(c,function(a,c){b.inputs[a]=c});b.save()},getData:f}}return{query:function(c){f(c);var b=[],
l=[],h=[],n,q,r=function(){return{numberOfMatchingActions:b.length,allMatchKeyValue:function(a,c){e(a);for(var d=0<this.numberOfMatchingActions,f=0;f<this.numberOfMatchingActions&&d;f++)d=(d=b[f])&&d.hasExactKeyHeirarchy(a,c);return d},putAll:function(a){for(var c=0;c<this.numberOfMatchingActions;c++)b[c].put(a)},getStrings:function(){for(var a=0;a<this.numberOfMatchingActions;a++){var c=b[a];if(c.getData().strings)return c.getData().strings}return[]},getData:function(){for(var a=0;a<this.numberOfMatchingActions;a++){var c=
b[a];if(c.getData())return c.getData()}return[]}}},m=function(){for(var e=d.$("#buybox").find(".a-declarative").get(),f=0<l.length,n=0;n<e.length;n++){var q=e[n],m;a:{m=q;for(var p=c,t=0;t<p.length;t++){var u;var w=m;u=p[t];a(w)&&"string"===typeof u?(w=w.getAttribute("data-action")||"",u=0===u.localeCompare(w)):u=!1;if(u){m=!0;break a}}m=!1}if(m&&(q=g(q),q.hasParsableJSON()))if(f){m=!0;for(p=0;p<l.length&&m;p++)m=q.hasExactKeyHeirarchy(l[p],h[p]);m&&b.push(q)}else b.push(q)}return r()};n=function(a){e(a);
l.push(a);return{equals:q,equalsAny:function(){return q(t)}}};q=function(a){h.push(a);return{where:n,execute:m}};return{where:n,execute:m}}}});p.when("A","sns-utils","sns-buybox-constants","sns-declarative-util").register("sns-atc-utils",function(d,b,a,e){var f=d.$,g=["aw-mash","add-to-cart","one-click","show-services-interstitial"],c=function(a){e.query(g).where("buttonID").equals("add-to-cart").execute().putAll(a);e.query(g).where("buttonID").equals("buy-now").execute().putAll(a);e.query(g).where("buttonID").equals("buy-now-one-click").execute().putAll(a)};
return{initializeOnmlDeclaratives:function(){if(b.isSnSEligible()){var e=b.getAStateFromDom(a.SNS_OPT_IN_FEATURE_DIV,"sns-add-to-cart-params","addToCartParams");c(e||{});f("\x3cinput type\x3dhidden value\x3dtrue \x3e").prop("id",a.SNS_ONML_INIT_INPUT_ID).appendTo(a.SNS_OPT_IN_FEATURE_DIV)}},setOnmlDeclaratives:c,getAddToCartStrings:function(){return e.query(g).where("buttonID").equals("add-to-cart").execute().getStrings()},getAddToCartData:function(){return e.query(g).where("buttonID").equals("add-to-cart").execute().getData()}}});
p.when("A","sns-utils","sns-constants","sns-atc-utils").register("sns-atc",function(d,b,a,e){return{init:function(){b.registerCallbackForNameSpace(a.EVENT_NAMESPACE.PAGE_UPDATE,e.initializeOnmlDeclaratives);e.initializeOnmlDeclaratives()}}});p.when("A","sns-buybox-constants","sns-onmlv2-utils","sns-moq-helper").register("sns-onmlv2-atc",function(d,b,a,e){function f(c){if(e.isSnsLocked())a.emitMetric("sns-onmlv2-atc-sns-locked-moq");else{var d=g("\x3cform\x3e",{method:b.SUBSCRIBE_ADD_TO_CART_FORM_ATTRIBUTES.method,
action:b.SUBSCRIBE_ADD_TO_CART_FORM_ATTRIBUTES.action,id:b.SUBSCRIBE_ADD_TO_CART_FORM_ATTRIBUTES.id,name:b.SUBSCRIBE_ADD_TO_CART_FORM_ATTRIBUTES.name}),f="";if(a.isCbbTemplateEnabled()){a.emitMetric("sns-onmlv2-atc-cbb-template-enabled");for(var h=[{name:"ASIN"},{name:"offerListingID",fieldName:"snsOfferListingID"},{name:"snsAddressId"},{name:"snsOnmlOfferId"},{name:"snsMostCommonFrequency"},{name:"rcxOrdFreq"},{name:"quantity"}],n=0;n<h.length;n++)var q=h[n].name,r=h[n].fieldName?h[n].fieldName:
q,r=a.getOnmlv2FormValueByName(r),f=f+a.createHiddenInput(q,r)}else{a.emitMetric("sns-onmlv2-atc-cbb-template-not-enabled");a.removeFormFieldsIntroducedByCbb();h=[{name:"ASIN"},{name:"offerListingID",fieldName:"snsOfferListingID"},{name:"rcxOrdFreq"},{name:"snsOnmlOfferId"},{name:"snsMostCommonFrequency"},{name:"snsAddressId"}];for(n=0;n<h.length;n++)q=h[n].name,r=h[n].fieldName?h[n].fieldName:q,r=a.isMobileDevice()?g(b.MOBILE_ADD_TO_CART_DIV+" [name\x3d"+r+"]").val():a.isWeb()?g(b.ADD_TO_CART_DIV+
" [name\x3d"+r+"]").val():g(b.TABLET_ADD_TO_CART_DIV+" [name\x3d"+r+"]").val(),f+=a.createHiddenInput(q,r);h=a.isMobileDevice()?g(b.SNS_MOBILE_QUANTITY):g(b.QUANTITY_CONTAINER).find(b.SNS_QUANTITY);f+=a.createHiddenInput("quantity",h.val())}f+=a.createHiddenInput("ref",c);f+=a.createHiddenInput("submit.add-to-cart","1");d.html(f);g("body").append(d);g(b.SNS_ADD_TO_CART_FORM).submit();g(b.SNS_ADD_TO_CART_FORM).remove()}}var g=d.$;d.declarative("sns-add-to-cart","click",function(c){a.emitMetric("sns-onmlv2-atc-sns-add-to-cart");
f("onmlv2_atc")});return{createAndSubmitAddToCartForm:f}});p.when("A","sns-utils","sns-constants","sns-buybox-constants","sns-atc-utils").register("sns-buybox-utils",function(d,b,a,e){var f=function(a){if(0<a.length)return a.innerWidth()<a[0].scrollWidth},g=function(c,e,f){e=c+"_"+(f?"checkedLabel":"uncheckedLabel")+"_"+("oneClick"===c?e:"all");c=b.getOnmlParam(e);e=(f=b.getOnmlUserPref(a.USER_PREFS_KEYS.ONML_PARAMS))&&f[e];if(c=c||e)return d.$("\x3cp\x3e"+c+"\x3c/p\x3e").text()};return{updateOneClickButtonLabel:function(a){if(b.isVerucaOneClickEnabled()){a=
"boolean"===typeof a?a:d.$(e.SNS_OPT_IN_CHECKBOX).is(":checked");var k=d.$(e.ONE_CLICK_BUTTON),l=d.$(e.ONE_CLICK_BUTTON_ICON),h=d.$(e.ONE_CLICK_BUTTON_TEXT),n=b.getDeviceType(),q=g("oneClick",n,!0),n=g("oneClick",n,!1);q&&n&&(a?(h.text(q),f(h)&&(l.addClass("aok-hidden"),k.removeClass("a-button-icon"))):(h.text(n),l.length&&(k.addClass("a-button-icon"),l.removeClass("aok-hidden"))))}},updateBuyNowButtonLabel:function(a){if(b.isVerucaBuyNowEnabled()){a="boolean"===typeof a?a:d.$(e.SNS_OPT_IN_CHECKBOX).is(":checked");
var k=d.$(e.BUY_NOW_BUTTON),l=d.$(e.BUY_NOW_BUTTON_ICON),h=d.$(e.BUY_NOW_BUTTON_TEXT),n=b.getDeviceType(),q=g("buyNow",n,!0),n=g("buyNow",n,!1);q&&n&&(a?(h.text(q),f(h)&&(l.addClass("aok-hidden"),k.removeClass("a-button-icon"))):(h.text(n),l.length&&(k.addClass("a-button-icon"),l.removeClass("aok-hidden"))))}},updateAddToCartButtonLabel:function(a){a="boolean"===typeof a?a:d.$(e.SNS_OPT_IN_CHECKBOX).is(":checked");var k=d.$(e.ADD_TO_CART_BUTTON).closest(".a-button"),l=k.find(".a-button-inner"),h=
k.find("i.a-icon"),n=k.find("span.a-button-text"),q=b.getDeviceType(),r=g("addToCart",q,!0),q=g("addToCart",q,!1);r&&q&&(a?(n.text(r),l.addClass("sns-onml-sky-button-inner"),n.addClass("sns-onml-sky-button-text"),f(n)&&(h.addClass("aok-hidden"),k.removeClass("a-button-icon"))):(n.text(q),l.removeClass("sns-onml-sky-button-inner"),n.removeClass("sns-onml-sky-button-text"),h.length&&(k.addClass("a-button-icon"),h.removeClass("aok-hidden"))))},showSnSMerchantInfoIfSnSOptInChecked:function(a){var b=d.$(e.SNS_ONML_MERCHANT_INFO);
a="boolean"===typeof a?a:d.$(e.SNS_OPT_IN_CHECKBOX).is(":checked");b.toggleClass("aok-hidden",!a)},showGoldBoxDiscountMessageIfSnSOptInChecked:function(a){var b=d.$(e.GOLDBOX_DISCOUNT_MESSAGE);a="boolean"===typeof a?a:d.$(e.SNS_OPT_IN_CHECKBOX).is(":checked");b.toggleClass("aok-hidden",!a)},showSubscribeOnlyButtonIfSnSOptInChecked:function(a){var b=d.$(e.JUST_SUBSCRIBE_DIV);a="boolean"===typeof a?a:d.$(e.SNS_OPT_IN_CHECKBOX).is(":checked");b.toggleClass("aok-hidden",!a)},logError:function(a,b){m.ueLogError&&
m.ueLogError(a,{logLevel:"ERROR",attribution:b,message:a})}}});p.when("A","sns-buybox-constants","sns-onmlv2-utils","ready").execute("sns-onmlv2-join-prime",function(d,b,a){var e=d.$,f=function(){e(b.SNS_ONMLV2_JOIN_PRIME_CHECKBOX).length&&(e(b.SNS_ONMLV2_JOIN_PRIME_UPSELL).removeClass("aok-hidden"),e(b.SNS_ONMLV2_JOIN_PRIME_CHECKBOX).is(":checked")?(e(b.SNS_ONMLV2_JOIN_PRIME_BUTTON).removeClass("aok-hidden"),e(b.SNS_SUBSCRIBE_SUBMIT_BUTTON).addClass("aok-hidden")):(e(b.SNS_ONMLV2_JOIN_PRIME_BUTTON).addClass("aok-hidden"),
e(b.SNS_SUBSCRIBE_SUBMIT_BUTTON).removeClass("aok-hidden")))};f();e(document).delegate(b.SNS_ONMLV2_JOIN_PRIME_CHECKBOX,"change",function(a){f()});d.declarative("sns-join-prime","click",function(f){f=d.state("momJoinPrimeEndpointState");f=e("\x3cform\x3e",{method:b.SNS_JOIN_PRIME_FORM_ATTRIBUTES.method,action:f&&f.endpoint?f.endpoint:"/gp/prime/pipeline/membersignup/",id:b.SNS_JOIN_PRIME_FORM_ATTRIBUTES.id,name:b.SNS_JOIN_PRIME_FORM_ATTRIBUTES.name});for(var c="",k=[{name:"session-id"},{name:"momAsin"},
{name:"ref"}],l=0;l<k.length;l++)var h=k[l].name,n=a.getSubscribeButtonFormValueByName(h),c=c+a.createHiddenInput(h,n);f.html(c);e("body").append(f);e(b.SNS_JOIN_PRIME_FORM).submit();e(b.SNS_JOIN_PRIME_FORM).remove()})});p.when("A","ready").execute("sns-load-static-images",function(d){var b=d.$;b("#learnMoreBottomSheet .a-manually-loaded").each(function(){d.loadImageManually(b(this))})});p.when("A","sns-buybox-constants","sns-onmlv2-utils").execute("sns-legacy-subscribe",function(d,b,a){var e=d.$;
d.declarative("sns-legacy-subscribe","click",function(d){d=e("\x3cform\x3e",{method:b.SNS_LEGACY_SUBSCRIBE_FORM_ATTRIBUTES.method,action:b.SNS_LEGACY_SUBSCRIBE_FORM_ATTRIBUTES.action,id:b.SNS_LEGACY_SUBSCRIBE_FORM_ATTRIBUTES.id,name:b.SNS_LEGACY_SUBSCRIBE_FORM_ATTRIBUTES.name});for(var g="",c=[{name:"ASIN"},{name:"offerListingID"},{name:"merchantID"},{name:"snsOfferListingID"},{name:"snsMerchantID"},{name:"rcxOrdFreq"},{name:"quantity"}],k=0;k<c.length;k++)var l=c[k].name,h=a.getSubscribeButtonFormValueByName(l),
g=g+a.createHiddenInput(l,h);g+=a.createHiddenInput("ref","sns-legacy-subscribe");g+=a.createHiddenInput("submit.rcx-subscribe","1");d.html(g);e("body").append(d);e(b.SNS_LEGACY_SUBSCRIBE_FORM).submit();e(b.SNS_LEGACY_SUBSCRIBE_FORM).remove()})});p.when("A","sns-subscribe-button-utils").execute("sns-subscribe-button",function(d,b){d.declarative("sns-submit-btn-declarative","click",function(a){b.emitMetric("sns-subscribe-button-sns-submit-btn-declarative-called");b.createAndSubmitSubscribeNowForm("sns-subscribe-btn-dp-vmf-")});
d.declarative("sns-subscribe-poi-declarative","click",function(a){b.emitMetric("sns-subscribe-button-sns-subscribe-poi-declarative-called");b.createAndSubmitSubscribeNowForm(a.data.refTag)});d.declarative("sns-mom-submit-btn-declarative","click",function(a){b.emitMetric("sns-subscribe-button-sns-mom-submit-btn-declarative-called");b.createAndSubmitSubscribeNowForm("sns-mom-btn-dp-vmf-")})});p.when("A","sns-buybox-constants","sns-onmlv2-utils","sns-moq-helper","sns-metrics-constants","sns-vmf-utils",
"sns-constants").register("sns-subscribe-button-utils",function(d,b,a,e,f,g,c){var k=d.$;return{emitMetric:function(a){m.ue&&m.ue.count(a,(ue.count(a)||0)+1)},createAndSubmitSubscribeNowForm:function(l){if(!e.isSnsLocked()){var h,n;k("#chkMom").length&&k("#chkMom").is(":checked")?(h=k("\x3cform\x3e",{method:b.SNS_JOIN_PRIME_FORM_ATTRIBUTES_VMF.method,action:b.SNS_JOIN_PRIME_FORM_ATTRIBUTES_VMF.action,id:b.SNS_JOIN_PRIME_FORM_ATTRIBUTES_VMF.id,name:b.SNS_JOIN_PRIME_FORM_ATTRIBUTES_VMF.name}),n=b.SNS_JOIN_PRIME_FORM_ATTRIBUTES_VMF.id):
(h=k("\x3cform\x3e",{method:b.SUBSCRIBE_FORM_ATTRIBUTES.method,action:b.SUBSCRIBE_FORM_ATTRIBUTES.action,id:b.SUBSCRIBE_FORM_ATTRIBUTES.id,name:b.SUBSCRIBE_FORM_ATTRIBUTES.name}),n=b.SUBSCRIBE_FORM_ATTRIBUTES.id);for(var q="",r=b.SUBSCRIBE_FORM_FIELDS,m=0;m<r.length;m++){var p=r[m].name,v=r[m].fieldName?r[m].fieldName:p;"rcxOrdFreqSns"===v?(v=g.getFrequencyValue(c.DELIVERY_OPTION.SNS),a.emitMetric(f.SNS_CREATE_SUBSCRIPTION_WITH_FREQUENCY+v)):"rcxOrdFreqOnml"===v?(v=g.getFrequencyValue(c.DELIVERY_OPTION.ONML),
a.emitMetric(f.SNS_CREATE_SUBSCRIPTION_WITH_FREQUENCY+v)):v=k("[name\x3d'"+v+"']").val();q+=a.createHiddenInput(p,v)}r=d.$(b.SNS_MOBILE_QUANTITY);if(r===t||r.val()===t)if(r=k("[name\x3d'rcxsubsQuan']"),r===t||r.val()===t)r=k("[id\x3d'rcxsubsQuan']");m=0!==k(b.REPLENISHMENT_ONML_FREQUENCY_POPOVER_ID).length?!k(b.REPLENISHMENT_ONML_FREQUENCY_POPOVER_ID).hasClass("aok-hidden"):0!==k(b.REPLENISHMENT_ONML_FREQUENCY_INFO_POPOVER_ID).length?!k(b.REPLENISHMENT_ONML_FREQUENCY_INFO_POPOVER_ID).hasClass("aok-hidden"):
0!==k(b.ONML_FREQUENCY_BOTTOMSHEET_SELECTOR).length?!k(b.ONML_FREQUENCY_BOTTOMSHEET_SELECTOR).hasClass("aok-hidden"):!k("#rcxOrdFreqOnmlWrapper").hasClass("aok-hidden");m||(p=a.getDeliveryInfoParam().snsDates[g.getFrequencyIndex(c.DELIVERY_OPTION.SNS)],q+=a.createHiddenInput("snsDate",p));q+=a.createHiddenInput("onmlSelected",m);q+=a.createHiddenInput("vmfEnabled","true");q+=a.createHiddenInput("quantity",r.val());q+=a.createHiddenInput("ref",l+(m?"onml":"sns"));q+=a.createHiddenInput("submit.subscribe",
"1");h.html(q);k("body").append(h);a.emitInvalidFrequencyMetric(f.SNS_ONML_INVALID_FREQUENCY_SELECT_METRICS,f.SNS_LEGACY_INVALID_FREQUENCY_SELECT_METRICS);k("#"+n).submit();k("#"+n).remove()}}}});"use strict";p.when("A").register("sns-upsell-message-trigger-handler",function(d){function b(){var a=d.$(".a-accordion-active").data("a-accordion-row-name");return"snsAccordionRowMiddle"===a||"snsAccordionRowMobileMiddle"===a||"snsAccordionRowMobileAppMiddle"===a}var a=!1,e=function(a,b){m.ue&&"function"===
typeof m.ue.trigger&&m.ue.trigger(a,b)},f=function(a){m.ue&&m.ue.count(a,(ue.count(a)||0)+1)};return{handleAnnualSavingsExperimentTriggering:function(g,c){try{a||null===g||0===g.length||(b()?(e("CONSUMABLES_SNS_DP_ANNUAL_SAVINGS_EXPERIMENT_ITERATION_1127144",c),a=!0,f("snsAnnualSavingsReIterationWeblabTriggeringSuccess")):f("snsAccordionNotActiveForAnnualSavingsExperiment"))}catch(k){f("snsAnnualSavingsReIterationWeblabTriggeringFailure")}d.on("a:accordion:buybox-accordion:select",function(b){try{if(!a&&
null!==g&&0!==g.length){var d=b.selectedRow.rowName;"snsAccordionRowMiddle"===d||"snsAccordionRowMobileMiddle"===d||"snsAccordionRowMobileAppMiddle"===d?(e("CONSUMABLES_SNS_DP_ANNUAL_SAVINGS_EXPERIMENT_ITERATION_1127144",c),a=!0,f("snsAnnualSavingsReIterationWeblabTriggeringSuccess")):f("snsAccordionNotSelectedForAnnualSavingsExperiment")}}catch(h){f("snsAnnualSavingsReIterationWeblabTriggeringFailure")}})}}});p.register("sns-constants",function(){return{TIERED:"tiered",NON_TIERED:"nonTiered",BASE:"BASE",
PREMIUM:"PREMIUM",ZERO_BASE:"ZERO_BASE",EVENT_NAMESPACE:{PAGE_UPDATE:"pageUpdate",FREQUENCY_HIDDEN_INPUT_CHANGE:"frequencyHiddenInputChange"},USER_PREFS_KEYS:{SNS_OPT_IN:"snsOptIn",SNS_FREQUENCY:"rcxOrdFreq",ONML_PARAMS:"onmlParams"},DELIVERY_OPTION:{SNS:"sns",ONML:"onml"},WEBLAB_TREATMENT:{C:"C",T1:"T1",T2:"T2"},DEVICE_TYPE:{DESKTOP:"desktop",MOBILE:"mobile",MOBILE_APP:"mobile_app"},ACCORDION_ROW_NAME_SELECTOR:"a-accordion-row-name",ACTIVE_ACCORDION_SELECTOR:".a-accordion-active",SNS_ACCORDION_ROW_NAME_DESKTOP:"snsAccordionRowMiddle",
SNS_ACCORDION_ROW_NAME_MOBILE:"snsAccordionRowMobileMiddle",SNS_ACCORDION_ROW_NAME_MOBILE_APP:"snsAccordionRowMobileAppMiddle"}});p.when("A","sns-utils","sns-constants","sns-buybox-constants").register("sns-event-handler",function(d,b,a,e){return{init:function(){function f(a){for(var b=d.$("\x3cform\x3e",{method:e.SUBSCRIBE_ONLY_FORM_ATTRIBUTES.method,action:e.SUBSCRIBE_ONLY_FORM_ATTRIBUTES.action,id:e.SUBSCRIBE_ONLY_FORM_ATTRIBUTES.id,name:e.SUBSCRIBE_ONLY_FORM_ATTRIBUTES.name}),f=[{name:"ASIN"},
{name:"offerListingID"},{name:"merchantID"},{name:"rcxOrdFreq"},{name:"snsOfferListingID"},{name:"snsMerchantID"}],l="",h=0;h<f.length;h++)var n=f[h].name,m=d.$("[name\x3d"+n+"]").val(),l=l+('\x3cinput type\x3d"hidden" name\x3d"'+n+'" value\x3d"'+m+'"\x3e');l=l+('\x3cinput type\x3d"hidden" name\x3d"ref" value\x3d"'+a+'"\x3e')+'\x3cinput type\x3d"hidden" name\x3d"submit.rcx-subscribe" value\x3d"1"\x3e';a=d.$(e.QUANTITY_CONTAINER).find(e.QUANTITY);l+='\x3cinput type\x3d"hidden" name\x3d"quantity" value\x3d"'+
a.val()+'"\x3e';b.html(l);d.$("body").append(b);d.$(e.SUBSCRIBE_ONLY_FORM).submit()}b.isSnSEligible()&&b.setOnmlUserPref(a.USER_PREFS_KEYS.ONML_PARAMS,b.getOnmlParam());b.registerCallbackForNameSpace(a.EVENT_NAMESPACE.PAGE_UPDATE,function(){var f=b.getOnmlUserPref(a.USER_PREFS_KEYS.ONML_PARAMS)||{},c=f.asin,k=b.getOnmlParam("asin");f.asin=k;b.setOnmlUserPref(a.USER_PREFS_KEYS.ONML_PARAMS,f);f=c!==k;c=b.getOnmlUserPref(a.USER_PREFS_KEYS.SNS_OPT_IN);"undefined"!==typeof c&&d.$(e.SNS_OPT_IN_CHECKBOX).is(":checked")!==
c&&(b.enableSnSOptIn(),d.$(e.SNS_OPT_IN_CHECKBOX).click());(c=b.getOnmlUserPref(a.USER_PREFS_KEYS.SNS_FREQUENCY))&&!f?b.isMobileDevice()?d.$(e.SNS_FREQ_BOTTOMSHEET_SELECTOR).find("button[value\x3d"+c+"]").click():d.$("[data-a-accordion-row-name\x3dfrequencyAccordionRow"+(c-1)+"] a").click():b.deleteOnmlUserPref(a.USER_PREFS_KEYS.SNS_FREQUENCY)});d.$(e.SNS_FREQUENCY_FORM_FIELD).change(function(){b.executeCallbacksForNameSpace(a.EVENT_NAMESPACE.FREQUENCY_HIDDEN_INPUT_CHANGE)});d.on("a:pageUpdate",function(){b.executeCallbacksForNameSpace(a.EVENT_NAMESPACE.PAGE_UPDATE)});
d.declarative("subscribe-only","click",function(a){f("onml_so_l")});d.declarative("just-subscribe","click",function(a){f("onml_justsub_l")})}}});p.when("A","a-popover","sns-onmlv2-utils").register("sns-common-utils",function(d,b,a){return{updateLearnMoreUpsellHeight:function(e){var f=b.get(d.$("#sns-learn-more"));f?e?f.update({height:460}):f.update({height:251}):a.emitMetric("snsLearnMorePopOverAbsent")}}});p.register("sns-metrics-constants",function(){return{METRIC_DELIMITER:".",B2B_BUY_BOX_MESSAGE_UPDATE_SUCCESSFUL:"b2bBuyBoxMessageUpdateSuccessful",
B2B_BUY_BOX_MESSAGE_UPDATE_FAILED:"b2bBuyBoxMessageUpdateFailed",SNS_ONML_EXISTING_SNS_CUSTOMER_CHECK_METRICS:"snsOnmlExistingSnsCustomerCheck",SNS_ONML_NEW_SNS_CUSTOMER_CHECK_METRICS:"snsOnmlNewSnsCustomerCheck",SNS_ONML_EXISTING_SNS_CUSTOMER_UNCHECK_METRICS:"snsOnmlExistingSnsCustomerUncheck",SNS_ONML_NEW_SNS_CUSTOMER_UNCHECK_METRICS:"snsOnmlNewSnsCustomerUncheck",SNS_SIGN_IN_IF_NOT_ALREADY_SIGNED_IN_METRICS:"snsSignInIfNotAlreadySignedIn",SNS_ONML_FREQUENCY_LABEL_CLICK_METRICS:"snsOnmlFrequencyLabelClick",
SNS_ONML_FREQUENCY_CHANGE_METRICS:"snsOnmlFrequencyChange",SNS_ONML_WEEKLY_FREQUENCY_SELECT_METRICS:"snsOnmlWeeklyFrequencySelectMetrics",SNS_ONML_MONTHLY_FREQUENCY_SELECT_METRICS:"snsOnmlMonthlyFrequencySelectMetrics",SNS_ONML_INVALID_FREQUENCY_SELECT_METRICS:"snsOnmlInvalidFrequencySelectMetrics",B2B_ONML_WEEKLY_FREQUENCY_SELECT_METRICS:"b2bOnmlWeeklyFrequencySelectMetrics",B2B_ONML_MONTHLY_FREQUENCY_SELECT_METRICS:"b2bOnmlMonthlyFrequencySelectMetrics",SNS_LEGACY_WEEKLY_FREQUENCY_SELECT_METRICS:"snsLegacyWeeklyFrequencySelectMetrics",
SNS_LEGACY_MONTHLY_FREQUENCY_SELECT_METRICS:"snsLegacyMonthlyFrequencySelectMetrics",SNS_LEGACY_INVALID_FREQUENCY_SELECT_METRICS:"snsLegacyInvalidFrequencySelectMetrics",SNS_ONML_UPSELL_MESSAGE_METRICS:"snsOnmlUpsellMessage",SNS_ONML_SUBSCRIBE_ONLY_METRICS:"snsOnmlSubscribeOnly",SNS_CUSTOMER_RECOGNIZED_BUT_NOT_SIGNED_IN:"snsOnmlCustomerRecognizedButNotSignedIn",SNS_REQUIRE_SIGN_IN_STATUS_FAILED:"snsOnmlRequireSignInStatusFailed",SNS_ONMLV2_POPOVER_TRIGGERS:"justSubscribeLearnMorePopoverNonTiered justSubscribeLearnMorePopoverTiered onmlv2LearnMorePopoverNonTiered onmlv2LearnMorePopoverTiered onmlv2LearnMorePopoverNewOrUnrecognized justSubscribePillPopoverNonTiered justSubscribePillPopoverTiered onmlv2PillPopoverNonTiered onmlv2PillPopoverTiered onmlv2PillPopoverNewOrUnrecognized".split(" "),
SNS_ONMLV2_BOTTOMSHEET_TRIGGERS:"justSubscribeLearnMoreBottomsheetNonTiered justSubscribeLearnMoreBottomsheetTiered onmlv2LearnMoreBottomsheetNonTiered onmlv2LearnMoreBottomsheetTiered onmlv2LearnMoreBottomsheetNewOrUnrecognized justSubscribePillBottomsheetNonTiered justSubscribePillBottomsheetTiered onmlv2PillBottomsheetNonTiered onmlv2PillBottomsheetTiered onmlv2PillBottomsheetNewOrUnrecognized".split(" "),SNS_ONMLV2_DESKTOP_POPOVER_SHOW_METRICS:"snsOnmlv2DesktopPopoverShow",SNS_ONMLV2_MOBILE_BOTTOMSHEET_SHOW_METRICS:"snsOnmlv2MobileBottomsheetShow",
SNS_ONMLV2_DELIVERY_OPTION_CLICK_METRICS:"snsOnmlv2DeliveryOptionClick",SNS_ONMLV2_DELIVERY_OPTION_CLICK_MOBILE_METRICS:"snsOnmlv2DeliveryOptionClickMobile",SNS_ONMLV2_SWITCH_TO_SNS_METRICS:"snsOnmlv2SwitchToSns",SNS_ONMLV2_SWITCH_TO_ONML_METRICS:"snsOnmlv2SwitchToOnml",SNS_ONMLV2_SWITCH_TO_SNS_MOBILE_METRICS:"snsOnmlv2SwitchToSnsMobile",SNS_ONMLV2_SWITCH_TO_ONML_MOBILE_METRICS:"snsOnmlv2SwitchToOnmlMobile",SNS_ONMLV2_SUBSCRIBE_NOW_WITH_ONML_DELIVERY_METRICS:"snsOnmlv2SubscribeNowWithOnmlDelivery",
SNS_ONMLV2_SUBSCRIBE_NOW_WITH_SNS_DELIVERY_METRICS:"snsOnmlv2SubscribeNowWithSnsDelivery",SNS_ONMLV2_SUBSCRIBE_NOW_WITH_ONML_DELIVERY_MOBILE_METRICS:"snsOnmlv2SubscribeNowWithOnmlDeliveryMobile",SNS_ONMLV2_SUBSCRIBE_NOW_WITH_SNS_DELIVERY_MOBILE_METRICS:"snsOnmlv2SubscribeNowWithSnsDeliveryMobile",SNS_QUANTITY_SELECT_DESKTOP:"snsQuantitySelectDesktop",SNS_QUANTITY_SELECT_MOBILE:"snsQuantitySelectMobile",SNS_SWITCH_WIDGET_SEE_PRODUCTS_ONMLV2_METRICS:"snsSwitchWidgetSeeProductsOnmlv2",SNS_SWITCH_WIDGET_SEE_PRODUCTS_LEGACY_METRICS:"snsSwitchWidgetSeeProductsLegacy",
SNS_SWITCH_WIDGET_CONTINUE_LEGACY_METRICS:"snsSwitchWidgetContinueLegacy",SNS_SWITCH_WIDGET_CONTINUE_WITH_ONE_NOW_METRICS:"snsSwitchWidgetContinueWithOneNow",SNS_SWITCH_WIDGET_CONTINUE_WITH_SNS_METRICS:"snsSwitchWidgetContinueWithSns",SNS_ONMLV2_SUBSCRIBE_NOW_WITH_SAME_FREQ_AS_DEFAULT_FREQ:"snsOnmlv2SubscribeNowWithSameFreq",SNS_ONMLV2_SUBSCRIBE_NOW_WITH_DIFFERENT_FREQUENCY_OTHER_THAN_DEFAULT_FREQ:"snsOnmlv2SubscribeNowWithDifferentFreq",SNS_INVALID_FREQUENCY_ACCORDION_ROW:"snsInvalidFrequencyAccordionRow",
SNS_ONML_FREQUENCY_POPOVER_SELECTED:"snsOnmlFrequencyPopoverSelected",SNS_FREQUENCY_POPOVER_SELECTED:"snsFrequencyPopoverSelected",SNS_SHOW_MORE_FREQUENCY_OPTIONS_BTN_CLICKED:"snsShowMoreFrequencyOptionsBtnClicked",ONML_SHOW_MORE_FREQUENCY_OPTIONS_BTN_CLICKED:"onmlShowMoreFrequencyOptionsBtnClicked",SNS_ONML_FREQUENCY_LABEL_INGRESS_CLICKED:"snsOnmlFrequencyLabelIngressClicked",SNS_FREQUENCY_LABEL_INGRESS_CLICKED:"snsFrequencyLabelIngressClicked",SNS_ONML_FREQUENCY_INFO_LABEL_INGRESS_CLICKED:"snsOnmlFrequencyInfoLabelIngressClicked",
SNS_FREQUENCY_INFO_LABEL_INGRESS_CLICKED:"snsFrequencyInfoLabelIngressClicked",SNS_INVALID_FREQUENCY_POPOVER_INPUTS:"snsInvalidFrequencyPopoverInputs",SNS_INVALID_FREQUENCY_POPOVER_DATA_STRUCTURE:"snsInvalidFrequencyPopoverDataStructure",SNS_CREATE_SUBSCRIPTION_WITH_FREQUENCY:"snsCreateSubscriptionWithFrequency-",SNS_FREQUENCY_BOTTOMSHEET_SELECTED:"snsFrequencyBottomsheetSelected",SNS_ONML_FREQUENCY_BOTTOMSHEET_SELECTED:"snsOnmlFrequencyBottomsheetSelected",SNS_FREQUENCY_BOTTOMSHEET_UNIT_WEEKS_SELECTED:"snsFrequencyBottomsheetUnitWeeksSelected",
SNS_FREQUENCY_BOTTOMSHEET_UNIT_MONTHS_SELECTED:"snsFrequencyBottomsheetUnitMonthsSelected",SNS_ONML_FREQUENCY_BOTTOMSHEET_UNIT_WEEKS_SELECTED:"snsOnmlFrequencyBottomsheetUnitWeeksSelected",SNS_ONML_FREQUENCY_BOTTOMSHEET_UNIT_MONTHS_SELECTED:"snsOnmlFrequencyBottomsheetUnitMonthsSelected",SNS_FREQUENCY_VALUE_SELECTED:"snsFrequencyValueSelected",SNS_ONML_FREQUENCY_VALUE_SELECTED:"snsOnmlFrequencyValueSelected"}});p.when("A","sns-utils","sns-metrics-constants","sns-buybox-constants").register("sns-metrics-helper",
function(d,b,a,e){return{init:function(){d.declarative("sns-opt-in-checked","change",function(){var f=d.$(e.SNS_OPT_IN_CHECKBOX).is(":checked");m.ue&&(f?b.isSnsCustomer()?m.ue.count(a.SNS_ONML_EXISTING_SNS_CUSTOMER_CHECK_METRICS,(ue.count(a.SNS_ONML_EXISTING_SNS_CUSTOMER_CHECK_METRICS)||0)+1):m.ue.count(a.SNS_ONML_NEW_SNS_CUSTOMER_CHECK_METRICS,(ue.count(a.SNS_ONML_NEW_SNS_CUSTOMER_CHECK_METRICS)||0)+1):b.isSnsCustomer()?m.ue.count(a.SNS_ONML_EXISTING_SNS_CUSTOMER_UNCHECK_METRICS,(ue.count(a.SNS_ONML_EXISTING_SNS_CUSTOMER_UNCHECK_METRICS)||
0)+1):m.ue.count(a.SNS_ONML_NEW_SNS_CUSTOMER_UNCHECK_METRICS,(ue.count(a.SNS_ONML_NEW_SNS_CUSTOMER_UNCHECK_METRICS)||0)+1))});d.$(document).delegate(".sns-buybox-upsell-trigger","click",function(b){m.ue&&m.ue.count(a.SNS_ONML_UPSELL_MESSAGE_METRICS,(ue.count(a.SNS_ONML_UPSELL_MESSAGE_METRICS)||0)+1)});d.$(document).delegate("#sns-dp-frequency-trigger","click",function(b){m.ue&&m.ue.count(a.SNS_ONML_FREQUENCY_LABEL_CLICK_METRICS,(ue.count(a.SNS_ONML_FREQUENCY_LABEL_CLICK_METRICS)||0)+1)});d.$(document).delegate("#snsSelectedFrequencyLabel",
"click",function(b){m.ue&&m.ue.count(a.SNS_ONML_FREQUENCY_LABEL_CLICK_METRICS,(ue.count(a.SNS_ONML_FREQUENCY_LABEL_CLICK_METRICS)||0)+1)});d.on("a:accordion:sns-dp-frequency-accordion:select",function(){m.ue&&m.ue.count(a.SNS_ONML_FREQUENCY_CHANGE_METRICS,(ue.count(a.SNS_ONML_FREQUENCY_CHANGE_METRICS)||0)+1)});d.$(document).delegate("#snsFrequencyBottomSheet button","click",function(b){m.ue&&m.ue.count(a.SNS_ONML_FREQUENCY_CHANGE_METRICS,(ue.count(a.SNS_ONML_FREQUENCY_CHANGE_METRICS)||0)+1)});d.$(document).delegate("#subscribe-only",
"click",function(b){m.ue&&m.ue.count(a.SNS_ONML_SUBSCRIBE_ONLY_METRICS,(ue.count(a.SNS_ONML_SUBSCRIBE_ONLY_METRICS)||0)+1)});d.$(document).delegate("#replenishment-onml-frequency-popover","click",function(b){m.ue&&m.ue.count(a.SNS_ONML_FREQUENCY_LABEL_INGRESS_CLICKED,(ue.count(a.SNS_ONML_FREQUENCY_LABEL_INGRESS_CLICKED)||0)+1)});d.$(document).delegate("#replenishment-sns-frequency-popover","click",function(b){m.ue&&m.ue.count(a.SNS_FREQUENCY_LABEL_INGRESS_CLICKED,(ue.count(a.SNS_FREQUENCY_LABEL_INGRESS_CLICKED)||
0)+1)});d.$(document).delegate("#replenishment-onml-frequency-info-popover","click",function(b){m.ue&&m.ue.count(a.SNS_ONML_FREQUENCY_INFO_LABEL_INGRESS_CLICKED,(ue.count(a.SNS_ONML_FREQUENCY_INFO_LABEL_INGRESS_CLICKED)||0)+1)});d.$(document).delegate("#replenishment-sns-frequency-info-popover","click",function(b){m.ue&&m.ue.count(a.SNS_FREQUENCY_INFO_LABEL_INGRESS_CLICKED,(ue.count(a.SNS_FREQUENCY_INFO_LABEL_INGRESS_CLICKED)||0)+1)})}}});p.when("A","sns-onmlv2-utils","sns-metrics-constants","sns-buybox-constants",
"sns-constants","sns-onmlv2-cache","sns-vmf-utils").register("sns-onmlv2-metrics-helper",function(d,b,a,e,f,g,c){var k=d.$,l="",h="";a.SNS_ONMLV2_POPOVER_TRIGGERS.forEach(function(a){l+=" a:popover:beforeShow:"+a});a.SNS_ONMLV2_BOTTOMSHEET_TRIGGERS.forEach(function(a){h+=" a:sheet:beforeShow:"+a});d.declarative("sns-delivery-date","click",function(a){g.incrementDeliveryOptionClickCounter()});d.declarative("sns-delivery-date-bottom-sheet","click",function(a){g.incrementDeliveryOptionClickCounterMobile()});
d.declarative("sns-delivery-change-btn","click",function(a){k(e.SNS_DELIVERY_OPTION_DIV).is(":checked")?g.incrementDeliveryOptionSwitchToSnsCounter():k(e.ONML_DELIVERY_OPTION_DIV).is(":checked")&&g.incrementDeliveryOptionSwitchToOnmlCounter()});d.on("a:popover:beforeHide:sns-delivery-modal",function(b){q(a.SNS_ONMLV2_DELIVERY_OPTION_CLICK_METRICS,g.getDeliveryOptionClickCounter());q(a.SNS_ONMLV2_SWITCH_TO_SNS_METRICS,g.getDeliveryOptionSwitchToSnsCounter());q(a.SNS_ONMLV2_SWITCH_TO_ONML_METRICS,g.getDeliveryOptionSwitchToOnmlCounter());
q(a.SNS_QUANTITY_SELECT_DESKTOP,g.getQuantityClickCounterDesktop())});d.on("a:sheet:beforeHide:sns_delivery_bottom_sheet",function(){q(a.SNS_ONMLV2_DELIVERY_OPTION_CLICK_MOBILE_METRICS,g.getDeliveryOptionClickCounterMobile());k(e.SNS_DELIVERY_OPTION_DIV).is(":checked")?g.incrementDeliveryOptionSwitchToSnsCounterMobile():k(e.ONML_DELIVERY_OPTION_DIV).is(":checked")&&g.incrementDeliveryOptionSwitchToOnmlCounterMobile();q(a.SNS_ONMLV2_SWITCH_TO_SNS_MOBILE_METRICS,g.getDeliveryOptionSwitchToSnsCounterMobile());
q(a.SNS_ONMLV2_SWITCH_TO_ONML_MOBILE_METRICS,g.getDeliveryOptionSwitchToOnmlCounterMobile());q(a.SNS_QUANTITY_SELECT_MOBILE,g.getQuantityClickCounterMobile())});d.on(l,function(){n(a.SNS_ONMLV2_DESKTOP_POPOVER_SHOW_METRICS)});d.on(h,function(){n(a.SNS_ONMLV2_MOBILE_BOTTOMSHEET_SHOW_METRICS)});d.$(document).delegate("#sns-submit-declarative","click",function(c){c=g.getDeliveryOption();var e=b.isMobileDevice();c===f.DELIVERY_OPTION.SNS?e?n(a.SNS_ONMLV2_SUBSCRIBE_NOW_WITH_SNS_DELIVERY_MOBILE_METRICS):
n(a.SNS_ONMLV2_SUBSCRIBE_NOW_WITH_SNS_DELIVERY_METRICS):c===f.DELIVERY_OPTION.ONML&&(e?n(a.SNS_ONMLV2_SUBSCRIBE_NOW_WITH_ONML_DELIVERY_MOBILE_METRICS):n(a.SNS_ONMLV2_SUBSCRIBE_NOW_WITH_ONML_DELIVERY_METRICS))});d.$(document).delegate("#sns-submit-btn-declarative","click",function(e){e=b.getSelectedDeliveryOption();e="defaultedWith"+a.METRIC_DELIMITER+b.getDefaultDeliveryOption()+a.METRIC_DELIMITER+"signUpWith"+a.METRIC_DELIMITER+e+a.METRIC_DELIMITER+"EnhancedDeliveryChangeLinkExperience";b.emitMetric(e);
c.isSelectedFreqSameAsDefaultFreq()?b.emitMetric(a.SNS_ONMLV2_SUBSCRIBE_NOW_WITH_SAME_FREQ_AS_DEFAULT_FREQ):b.emitMetric(a.SNS_ONMLV2_SUBSCRIBE_NOW_WITH_DIFFERENT_FREQUENCY_OTHER_THAN_DEFAULT_FREQ)});d.$(document).delegate(e.SNS_ONMLV2_QUANTITY_TRIGGER_DESKTOP,"change",function(b){g.incrementQuantityClickCounterDesktop();q(a.SNS_QUANTITY_SELECT_DESKTOP,g.getQuantityClickCounterDesktop())});d.$(document).delegate(e.SNS_ONMLV2_QUANTITY_TRIGGER_MOBILE,"change",function(b){g.incrementQuantityClickCounterMobile();
q(a.SNS_QUANTITY_SELECT_MOBILE,g.getQuantityClickCounterMobile())});var n=function(a){m.ue&&m.ue.count(a,(ue.count(a)||0)+1)},q=function(a,b){m.ue&&m.ue.count(a,b)}});p.when("A","sns-onmlv2-utils","sns-buybox-constants").register("sns-onmlv2-cache",function(d,b,a){var e=d.$,f=0,g=0,c=0,k=0,l=0,h=0,n=0,m=0;return{getDeliveryOptionClickCounter:function(){return f},incrementDeliveryOptionClickCounter:function(){f++},getDeliveryOptionClickCounterMobile:function(){return g},incrementDeliveryOptionClickCounterMobile:function(){g++},
getDeliveryOptionSwitchToSnsCounter:function(){return c},incrementDeliveryOptionSwitchToSnsCounter:function(){c++},getDeliveryOptionSwitchToSnsCounterMobile:function(){return k},incrementDeliveryOptionSwitchToSnsCounterMobile:function(){k++},getDeliveryOptionSwitchToOnmlCounterMobile:function(){return h},incrementDeliveryOptionSwitchToOnmlCounterMobile:function(){h++},getDeliveryOptionSwitchToOnmlCounter:function(){return l},incrementDeliveryOptionSwitchToOnmlCounter:function(){l++},getDeliveryOption:function(){return e(a.SNS_ONMLV2_DELIVERY_OPTION_FORM_FIELD).val()},
getQuantityClickCounterDesktop:function(){return n},incrementQuantityClickCounterDesktop:function(a){n++},getQuantityClickCounterMobile:function(){return m},incrementQuantityClickCounterMobile:function(a){m++}}});p.when("A","ready").execute("sns-detail-page-impressions",function(d){function b(a){m.ue&&m.ue.count(a,(ue.count(a)||0)+1)}var a=d.$;d.on.load(function(){if(a("#snsAccordionRowMiddle").length)try{b("snsBuyBoxVisibleOnDetailPage"),a("#sns-pill").length&&a("#sns-pill").text().trim()&&b("snsBuyBoxPillVisibleOnDetailPage"),
a("#snsAccordionRowMiddle #a-popover-learnMorePopover").length&&a("#snsAccordionRowMiddle #a-popover-learnMorePopover").text().trim()&&b("snsBuyBoxLearnMoreVisibleOnDetailPage"),a("#sns-base-price").length&&a("#sns-base-price").text().trim()&&b("snsBuyBoxPriceVisibleOnDetailPage"),a("#sns-delivery-buybox-upsell").length&&a("#sns-delivery-buybox-upsell").text().trim()&&b("snsBuyBoxDeliveryUpsellVisibleOnDetailPage"),a("#sns-delivery-buybox-upsell").length&&a("#sns-delivery-buybox-upsell").text().trim().includes("1 more")?
b("snsBuyBoxDeliveryUpsell_2_MoreSubsToGo"):a("#sns-delivery-buybox-upsell").length&&a("#sns-delivery-buybox-upsell").text().trim().includes("2 more")?b("snsBuyBoxDeliveryUpsell_3_MoreSubsToGo"):a("#sns-delivery-buybox-upsell").length&&a("#sns-delivery-buybox-upsell").text().trim().includes("3 more")?b("snsBuyBoxDeliveryUpsell_4_MoreSubsToGo"):a("#sns-delivery-buybox-upsell").length&&a("#sns-delivery-buybox-upsell").text().trim().includes("Unlock extra savings")?b("snsBuyBoxDeliveryUpsellAlmostTieredCustomer"):
a("#sns-delivery-buybox-upsell").length&&a("#sns-delivery-buybox-upsell").text().trim().includes("You've unlocked extra savings")?b("snsBuyBoxDeliveryUpsellTieredCustomer"):a("#sns-delivery-buybox-upsell").length&&(a("#sns-delivery-buybox-upsell").text().trim().includes("No fees")||a("#sns-delivery-buybox-upsell").text().trim().includes("Cancel anytime"))&&b("snsBuyBoxDeliveryUpsellNewOrUnrecognizedCustomer"),a(".sns-delivery-link").length&&a(".sns-delivery-link").text().trim()&&b("snsBuyBoxFRDDVisibleOnDetailPage"),
a("#snsAccordionRowMiddle #availability").length&&a("#snsAccordionRowMiddle #availability").text().trim()&&a("#snsAccordionRowMiddle #availability").text().trim().includes("In Stock")&&b("snsBuyBoxAvailabilityInStockVisibleOnDetailPage"),(a("#rcxOrdFreqSnsWrapper").length&&a("#rcxOrdFreqSnsWrapper").text().trim()||a("#replenishment-sns-frequency-accordion").length)&&b("snsBuyBoxFrequencySelectorVisibleOnDetailPage"),a("#rcx-subscribe-submit-button").length&&a("#rcx-subscribe-submit-button").text().trim()?
b("snsBuyBoxSubscribeNowButtonVisibleOnDetailPage"):b("snsBuyBoxSubscribeNowButtonNotVisibleOnDetailPage")}catch(e){b("snsBuyBoxImpressionMetricException")}else if(a("#snsAccordionRowMobileMiddle").length)try{b("snsBuyBoxVisibleOnDetailPageMobile"),a("#sns-pill").length&&a("#sns-pill").text().trim()&&b("snsBuyBoxPillVisibleOnDetailPageMobile"),a("#snsAccordionRowMobileMiddle #a-popover-learnMorePopover").length&&a("#snsAccordionRowMobileMiddle #a-popover-learnMorePopover").text().trim()&&b("snsBuyBoxLearnMoreVisibleOnDetailPageMobile"),
a("#sns-base-price").length&&a("#sns-base-price").text().trim()&&b("snsBuyBoxPriceVisibleOnDetailPageMobile"),a("#sns-delivery-buybox-upsell").length&&a("#sns-delivery-buybox-upsell").text().trim()&&b("snsBuyBoxDeliveryUpsellVisibleOnDetailPageMobile"),a("#sns-delivery-buybox-upsell").length&&a("#sns-delivery-buybox-upsell").text().trim().includes("1 more")?b("snsBuyBoxDeliveryUpsell_2_MoreSubsToGoMobile"):a("#sns-delivery-buybox-upsell").length&&a("#sns-delivery-buybox-upsell").text().trim().includes("2 more")?
b("snsBuyBoxDeliveryUpsell_3_MoreSubsToGoMobile"):a("#sns-delivery-buybox-upsell").length&&a("#sns-delivery-buybox-upsell").text().trim().includes("3 more")?b("snsBuyBoxDeliveryUpsell_4_MoreSubsToGoMobile"):a("#sns-delivery-buybox-upsell").length&&a("#sns-delivery-buybox-upsell").text().trim().includes("Unlock extra savings")?b("snsBuyBoxDeliveryUpsellAlmostTieredCustomerMobile"):a("#sns-delivery-buybox-upsell").length&&a("#sns-delivery-buybox-upsell").text().trim().includes("You've unlocked extra savings")?
b("snsBuyBoxDeliveryUpsellTieredCustomerMobile"):a("#sns-delivery-buybox-upsell").length&&(a("#sns-delivery-buybox-upsell").text().trim().includes("No fees")||a("#sns-delivery-buybox-upsell").text().trim().includes("Cancel anytime"))&&b("snsBuyBoxDeliveryUpsellNewOrUnrecognizedCustomerMobile"),a(".sns-delivery-link").length&&a(".sns-delivery-link").text().trim()&&b("snsBuyBoxFRDDVisibleOnDetailPageMobile"),a("#snsAccordionRowMobileMiddle #availability").length&&a("#snsAccordionRowMobileMiddle #availability").text().trim()&&
a("#snsAccordionRowMobileMiddle #availability").text().trim().includes("In Stock")&&b("snsBuyBoxAvailabilityInStockVisibleOnDetailPageMobile"),(a("#rcxOrdFreqSnsWrapper").length&&a("#rcxOrdFreqSnsWrapper").text().trim()||a("#replenishment-sns-frequency-accordion").length)&&b("snsBuyBoxFrequencySelectorVisibleOnDetailPageMobile"),a("#rcx-subscribe-submit-button").length&&a("#rcx-subscribe-submit-button").text().trim()?b("snsBuyBoxSubscribeNowButtonVisibleOnDetailPageMobile"):b("snsBuyBoxSubscribeNowButtonNotVisibleOnDetailPageMobile")}catch(e){b("snsBuyBoxImpressionMetricExceptionMobile")}else b("snsBuyBoxNotVisibleOnDetailPage")})});
p.when("sns-atc","sns-frequency-bottom-sheet","sns-frequency-popover","sns-opt-in-checkbox","sns-event-handler","sns-metrics-helper","sns-price-refresh").execute("sns-execute",function(d,b,a,e,f,g,c){d.init();b.init();a.init();e.init();f.init();g.init();c.init()});p.when("moq-core").register("sns-moq-helper",function(d){return{isSnsLocked:d.isSnsLocked}});p.when("A","sns-buybox-constants","sns-onmlv2-utils","sns-vmf-utils","sns-constants").register("sns-dp-widget-utils",function(d,b,a,e,f){function g(a){for(var b=
[];b.length<a;){var c=Math.floor(Math.random()*a);-1===b.indexOf(c)&&b.push(c)}return b}var c=d.$,k=!1,l;return{getSnSRecommendations:function(){var e=a.getCurrencyCode();c.ajax({url:b.GET_MYD_RECOMMENDATIONS_URL,type:"GET",data:{currencyCode:e,shipId:"undef",sourcePage:b.SOURCE_PAGE},dataType:"json",success:function(a){l=g(20);c("#snsHighUpsellCartRecs").replaceWith(a.recommendationsDiv);for(a=0;3>a;a++)c("#recItem"+l[a]).removeClass("aok-hidden")},error:function(b){a.emitSsbMetrics("ssb-get-recs-ajax-error",
"snsHighUpsellCartRecs");c("#snsHighUpsellCartRecs").remove()}})},createImage:function(a){return'\x3cimg id\x3d"hucATCProductImage" src\x3d"'+a+'" class\x3d"'+(d.capabilities.mobile?"huc-confirmation-image-mobile":"huc-confirmation-image")+'"/\x3e'},isSSBDataPresent:function(){return null!=a.getAStateFromDomWithoutJson(t,"sns-huc-data","currencyCode")},updateDeliveryOptionWidget:function(){k||(k=!0,c("#sns-only-delivery-option-text").html(c("#sns-only-delivery-option-text").html().replace(/%_month_%/g,
"\x3cspan class \x3d'sns-only-month'\x3e\x3c/span\x3e")),c("#sns-only-delivery-option-text").html(c("#sns-only-delivery-option-text").html().replace(/%_day_%/g,"\x3cspan class \x3d'sns-only-day'\x3e\x3c/span\x3e")),c("#sns-only-delivery-option-text").html(c("#sns-only-delivery-option-text").html().replace(/%_upsell_information_%/g,"\x3cspan class \x3d'sns-upsell-message'\x3e\x3c/span\x3e")),c("#onml-later-delivery-option-text").html(c("#onml-later-delivery-option-text").html().replace(/%_frequency_%/g,
"\x3cspan class \x3d'sns-frequency'\x3e\x3c/span\x3e")),c("#onml-later-delivery-option-text").html(c("#onml-later-delivery-option-text").html().replace(/%_date-more-later_%/g,"\x3cspan class \x3d'sns-ml-date'\x3e\x3c/span\x3e")));var b=a.getDeliveryInfoParam(),d=a.getSnsFrequencyParam(),g=a.getOnmlFrequencyParam(),l=e.getFrequencyIndex(f.DELIVERY_OPTION.SNS),m=e.getFrequencyIndex(f.DELIVERY_OPTION.ONML),p=b.snsDates[l].split(" "),t=p[0],p=p[1],d=d[l].upsellInformation.message,b=b.onmlDates[m],g=g[l].label.split(" "),
g=g[0]+" "+g[1];c(".sns-ml-date").html(b);c(".sns-frequency").html(g);c(".sns-only-month").html(t);c(".sns-only-day").html(p);c(".sns-upsell-message").html(d)},isDeliveryOptionEnabled:function(){return!1},getRandomizeRecList:function(){return 0!==l.length?l:g(20)},disableButton:function(a){p.when("a-button").execute(function(b){b("#"+a).disable()})},enableButton:function(a){p.when("a-button").execute(function(b){b("#"+a).enable()})},SUBSCRIBE_ADD_TO_CART_FORM_ATTRIBUTES:{name:"sns-onmlv2-add-to-cart",
id:"sns-onmlv2-add-to-cart",method:"POST",action:"/gp/subscribe-and-save/atc/sns-atc.html"},SUBSCRIBE_FORM_ATTRIBUTES:{name:"sns-onmlv2-subscribe",id:"sns-onmlv2-subscribe",method:"POST",action:"/gp/subscribe-and-save/atc/sns-atc.html"}}});p.when("A","sns-buybox-constants","sns-onmlv2-utils","sns-dp-widget-utils").register("sns-high-upsell-cart-widget",function(d,b,a,e){function f(d){var f,m;f=g("\x3cform\x3e",{method:e.SUBSCRIBE_FORM_ATTRIBUTES.method,action:e.SUBSCRIBE_FORM_ATTRIBUTES.action,id:e.SUBSCRIBE_FORM_ATTRIBUTES.id,
name:e.SUBSCRIBE_FORM_ATTRIBUTES.name});m=e.SUBSCRIBE_FORM_ATTRIBUTES.id;var r="";d="#hucRecFields"+d;var p=g(d+" [name\x3d'snsRecsMcf']").val()+b.SNS_ONML_MONTH,r=r+a.createHiddenInput("snsAsin",g(d+" [name\x3d'snsRecsAsin']").val()),r=r+a.createHiddenInput("rcxOrdFreqOnml",p),r=r+a.createHiddenInput("onmlSelected","true"),r=r+a.createHiddenInput("vmfEnabled","true"),r=r+a.createHiddenInput("quantity","1"),r=r+a.createHiddenInput("ref","sns-subscribe-btn-dp-vmf-onml"),r=r+a.createHiddenInput("submit.subscribe",
"1"),r=r+a.createHiddenInput("merchantId",g(d+" [name\x3d'snsRecsMerchantID']").val()),r=r+a.createHiddenInput("offerListingID",g(d+" [name\x3d'snsRecsOfferListingID']").val()),r=r+a.createHiddenInput("hucWidgetEnabled","1");f.html(r);g("body").append(f);f=g("#"+m).serialize();g.ajax({url:e.SUBSCRIBE_FORM_ATTRIBUTES.action,type:e.SUBSCRIBE_FORM_ATTRIBUTES.method,data:f,success:function(a){a=e.getRandomizeRecList();g("#hucATCProductImage").replaceWith(e.createImage(l));g("#"+k).addClass("aok-hidden");
g("#recItem"+a[c]).insertAfter("#"+k);g("#recItem"+a[c]).removeClass("aok-hidden");c++},error:function(){a.emitSsbMetrics("ssb-rec-atc-ajax-error","sns-huc-add-to-cart")}});g("#"+m).remove()}var g=d.$,c=3,k,l;d.declarative("sns-huc-add-to-cart","click",function(b){a.emitSsbMetrics(d.capabilities.mobile?"ssb_recs_atc_mobile":"ssb_recs_atc_desktop","sns-huc-add-to-cart");k=b.data.recId;var c=b.data.recIndex;l=b.data.productImageURL;e.disableButton((d.capabilities.mobile?"recs-atc-mobile":"recs-atc-desktop")+
c);f(c)});d.declarative("sns-huc-go-to-cart","click",function(c){a.emitSsbMetrics(d.capabilities.mobile?"ssb_go_to_cart_mobile":"ssb_go_to_cart_desktop","sns-huc-go-to-cart");m.location.href=b.VIEW_CART_URL});d.declarative("sns-huc-go-to-checkout","click",function(c){a.emitSsbMetrics(d.capabilities.mobile?"ssb_go_to_checkout_mobile":"ssb_go_to_checkout_desktop","sns-huc-go-to-checkout");m.location.href=b.GO_TO_CHECKOUT_URL})});p.when("A","a-dropdown","sns-vmf-utils","sns-onmlv2-utils","sns-metrics-constants",
"ready").execute("b2b-onmlv2-frequency-update",function(d,b,a,e,f){function g(a){m.ue&&m.ue.count(a,(ue.count(a)||0)+1)}var c=d.$;c("#rcxOrdFreq").change(function(){if(c("#b2brd").length&&!0===e.getIsRDProgramWinner()&&"rcxOrdFreqOnml"===c("#rcxOrdFreq").attr("name")!==!1){var a;a=!0===e.getIsCustomerPrimeMap()?e.getOnmlFrequencyParamForB2B():e.getSnsFrequencyParamForB2B();var b=c("[name\x3drcxOrdFreqOnml]").prop("selectedIndex"),d=c("[name\x3drcxOrdFreqOnml]")[0].options[b].value;c('[name\x3d"rcxOrdFreqOnml"]').val(d);
a=a[b];c(".b2brd-delivery-buybox-upsell-message").html(a.upsellInformation.message);c(".b2brd-delivery-buybox-upsell-additional-message-title").html(a.upsellInformation.additionalMessageTitle);c(".b2brd-delivery-buybox-upsell-additional-message").html(a.upsellInformation.additionalMessage);0===a.highlightedDiscount?(c("#rd-base-price").removeClass("aok-hidden"),c("#rd-tiered-price").addClass("aok-hidden")):(c("#rd-base-price").addClass("aok-hidden"),c("#rd-tiered-price").removeClass("aok-hidden"));
a=c("[name\x3drcxOrdFreqOnml]").val();g(f.B2B_BUY_BOX_MESSAGE_UPDATE_SUCCESSFUL);0<a.search("W")?g(f.B2B_ONML_WEEKLY_FREQUENCY_SELECT_METRICS):g(f.B2B_ONML_MONTHLY_FREQUENCY_SELECT_METRICS)}}).error(function(){g(f.B2B_BUY_BOX_MESSAGE_UPDATE_FAILED)})});p.when("A","a-popover","sns-onmlv2-utils","sns-common-utils").register("sns-savings-utils",function(d,b,a,e){function f(a){m.ue&&m.ue.count(a,(ue.count(a)||0)+1)}function g(){var a=d.$("#sns-annual-savings"),b=d.$("#sns-annual-savings-learn-more");
a.addClass("aok-hidden");b.addClass("aok-hidden");e.updateLearnMoreUpsellHeight(!1)}function c(a){return a!==t&&null!=a}var k=function(b){var k=a.getAnnualSavingsParamMap(),l=a.getAnnualSavingsWeblabTreatment(),m=a.getDefaultSavingsValue(),p=a.getQuantityIndex();k&&0!==Object.keys(k).length?c(m)&&""!==m?c(p)?c(l)?"C"===l?(f("snsAnnualSavingsWeblabInControl"),g()):c(b)?k.hasOwnProperty(b)&&c(k[b][p])&&0!==k[b][p].length?(b=k[b][p],k=d.$("#sns-annual-savings"),l=d.$("#sns-annual-savings-learn-more"),
d.$("#sns-annual-savings-value").text(b),k.removeClass("aok-hidden"),l.removeClass("aok-hidden"),e.updateLearnMoreUpsellHeight(!0),f("snsAnnualSavingsShown")):(f("snsAnnualSavingsValueAbsent"),g()):(f("snsFrequencyValueAbsent"),g()):(f("snsAnnualSavingsWeblabTreatmentAbsent"),g()):(f("snsQuantityIndexAbsent"),g()):(f("snsDefaultSavingsValueAbsent"),g()):(f("snsAnnualSavingsMapIsNotPresent"),g())},l=function(b){d.$("#sns-potential-savings").addClass("aok-hidden");d.$("#sns-frequency-upsell").removeClass("aok-hidden");
d.$("#sns-annual-savings-learn-more").addClass("aok-hidden");e.updateLearnMoreUpsellHeight(!1);k(a.getFrequencyValueExcludingDeliveryType(b))};return{checkPreConditionsAndUpdateAnnualSavings:k,checkPreConditionsAndUpdatePotentialSavings:function(b){var g=a.getPotentialSavingsParamMap(),k=a.getQuantityIndex();g&&0!==Object.keys(g).length?c(k)?c(b)?(k+=1,g.hasOwnProperty(b)&&c(g[b][k])&&0!==g[b][k].length?(b=g[b][k],g=d.$("#sns-potential-savings"),k=d.$("#sns-annual-savings-learn-more"),g.html(b),g.removeClass("aok-hidden"),
k.removeClass("aok-hidden"),d.$("#sns-frequency-upsell").addClass("aok-hidden"),d.$("#sns-annual-savings").addClass("aok-hidden"),e.updateLearnMoreUpsellHeight(!0),f("snsPotentialSavingsShown")):(f("snsPotentialSavingsValueAbsent"),l(b))):(f("snsFrequencyValueAbsent"),l(b)):(f("snsQuantityIndexAbsent"),l(b)):(f("snsPotentialSavingsMapIsNotPresent"),l(b))}}});p.when("A","a-dropdown","sns-vmf-utils","sns-onmlv2-utils","sns-savings-utils","sns-constants","sns-buybox-constants","ready").execute("sns-quantity-update",
function(d,b,a,e,f,g,c){var k=d.$;d.on("a:dropdown:rcxsubsQuan:select",function(b){b=k("#rcxOrdFreqOnmlWrapper").hasClass("aok-hidden")||k(c.REPLENISHMENT_ONML_FREQUENCY_POPOVER_ID).hasClass("aok-hidden")||k(c.REPLENISHMENT_ONML_FREQUENCY_INFO_POPOVER_ID).hasClass("aok-hidden")?a.getFrequencyValue(g.DELIVERY_OPTION.SNS):a.getFrequencyValue(g.DELIVERY_OPTION.ONML);var d=e.getFrequencyValueExcludingDeliveryType(b);f.checkPreConditionsAndUpdateAnnualSavings(d);f.checkPreConditionsAndUpdatePotentialSavings(b)})});
p.when("A","sns-onmlv2-utils","ready").execute("sns-udm-delivery-block-styling",function(d,b){function a(){try{var a=e("div[id^\x3d'snsAccordionRow'] div#mir-layout-DELIVERY_BLOCK");a&&a.each(function(){var a=e(this).find("div:last");a&&a.removeClass(function(a,b){return(b.match(/(^|\s)a-spacing-\S+/g)||[]).join(" ")}).addClass("a-spacing-none")})}catch(d){b.emitMetric("snsUdmDeliveryBlockSpacingAdjustmentFailed"),b.logErrorWithAttribution("sns-delivery-block-apply-styling","Error occurred while applying delivery block styling "+
d)}}var e=d.$;a();d.on("a:pageUpdate",function(b){a()})})});
/* ******** */
