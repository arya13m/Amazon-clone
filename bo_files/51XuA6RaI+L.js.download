(function(k){var q=window.AmazonUIPageJS||window.P,z=q._namespace||q.attributeErrors,d=z?z("DetailPageMiniDPAssets",""):q;d.guardFatal?d.guardFatal(k)(d,window):d.execute(function(){k(d,window)})})(function(k,q,z){k.when("A","hctp-configs","hctp-attach-constants","hctp-attach-logger","amazon-api-cart-hctp-add-items","amazon-api-cart-hctp-summary","hctp-media-builder","hctp-productV2","hctp-price-formatter","atf").register("hctp-utils",function(d,a,c,e,b,t,l,n,m){function g(a,c){h(a)&&h(a).val(c)}
function r(){h(c.SELECTORS.CART_INFO_SPINNER).hide();h(c.SELECTORS.CART_INFO_CONTENT).show()}function p(a,b){var u=h(c.SELECTORS.UPSELL_ATC_CONTAINER_PREFIX+a);if(!u)return null;h(u).children(c.SELECTORS.UPSELL_ATC_SPINNER).hide();b?(f(a,!0),h(u).children(c.SELECTORS.UPSELL_ATC_SUCCESS).show(),e.logClientSideMetric(c.CSA_EVENT_METRIC.METRIC_TYPE.CLICK,c.CSA_EVENT_METRIC.METRIC_NAME.ATTACH_UPSELL_ATC_SUCCESS,!1)):(f(a,!1),h(u).children(c.SELECTORS.UPSELL_ATC_ERROR).show(),e.logClientSideMetric(c.CSA_EVENT_METRIC.METRIC_TYPE.CLICK,
c.CSA_EVENT_METRIC.METRIC_NAME.ATTACH_UPSELL_ATC_FAILURE,!1));e.endLatencyCapture(c.CSA_EVENT_METRIC.METRIC_NAME.ATTACH_UPSELL_ATC_LATENCY)}function q(a){k.when("nav.setCartCount").execute(function(c){c(a)})}function x(b,d,p){try{q(b.itemCount);var u=b.itemCount,w=b.subtotal.displayString,f=a.getHctpConfig();b="";var l=f.proceedToCheckOutTitle;b=1>=u?f.itemTitle:f.itemsTitle;h(c.SELECTORS.CART_INFO_SUMMARY_FAILURE).hide();h(c.SELECTORS.CART_INFO_CART_SUB_TOTAL).show();h(c.SELECTORS.CART_INFO_CART_QUANTITY).html("("+
u+" "+b+"):");h(c.SELECTORS.CART_INFO_PTC_TEXT).html(l+" ("+u+" "+b+")");h(c.SELECTORS.CART_INFO_CART_VALUE).html(w);h(c.SELECTORS.CART_INFO_CART_VALUE).show();r();if(p&&p.accessoryItemAsin){var g=p.accessoryItemAsin,m=h(c.SELECTORS.ADDED_UPSELL_ASIN_SELECTOR);if(m){var B=m.val();m.val((B?B:"")+g+c.COMMON.COMMA)}}}catch(C){e.logClientSideMetric(c.CSA_EVENT_METRIC.METRIC_TYPE.CLICK,c.CSA_EVENT_METRIC.METRIC_NAME.ATTACH_ADD_CART_NAV_FAILURE,!1)}}function y(a,b){h(c.SELECTORS.CART_INFO_CART_SUB_TOTAL).hide();
h(c.SELECTORS.CART_INFO_CART_VALUE).hide();h(c.SELECTORS.CART_INFO_SUMMARY_FAILURE).show();r()}function v(){e.beginLatencyCapture(c.CSA_EVENT_METRIC.METRIC_NAME.ATTACH_GET_CART_SUMMARY_LATENCY);return t.get(["RETAIL"]).then(function(b){if(!b||!b.entity||!b.entity.summary)throw Error("No retail cart summary found");if(b.entity.summary[0])b=b.entity.summary[0];else{b=w;var d=a.getHctpConfig();b.subtotal.displayString=m.formatPrice(0,d.currencyOfPreference,d.languageOfPreference)}e.logClientSideMetric(c.CSA_EVENT_METRIC.METRIC_TYPE.CLICK,
c.CSA_EVENT_METRIC.METRIC_NAME.ATTACH_GET_CART_SUMMARY_SUCCESS,!1);e.endLatencyCapture(c.CSA_EVENT_METRIC.METRIC_NAME.ATTACH_GET_CART_SUMMARY_LATENCY);return b}).catch(function(a){e.logClientSideMetric(c.CSA_EVENT_METRIC.METRIC_TYPE.CLICK,c.CSA_EVENT_METRIC.METRIC_NAME.ATTACH_GET_CART_SUMMARY_FAILURE,!1);e.endLatencyCapture(c.CSA_EVENT_METRIC.METRIC_NAME.ATTACH_GET_CART_SUMMARY_LATENCY);throw a;})}function f(a,b){g(c.SELECTORS.UPSELL_ATC_STATUS_PREFIX+a,b?"SUCCEEDED":"FAILED")}var h=d.$,w={itemCount:0,
subtotal:{displayString:"0.00"}};return{isFunction:function(a){return"function"===typeof a},elementExists:function(a){return a?a instanceof d.$?0!==a.length:0!==d.$(a).length:!1},updateInputElement:g,addUpsellAsinToCart:function(e,d,f){d||(d=a.getHctpConfig());b.addItems([{asin:e.accessoryItemAsin,offerListingId:e.accessoryItemOfferingId,quantity:e.accessoryItemQuantity,additionalParameters:{itemAssociation:{associatedItemId:d.baseAsin,programType:"Attach",renderType:"renderAll",deleteConstraint:{mutuallyInclusive:!1}}}}],
c.REF_TAGS.ATTACH_UPSELL_ATC+f).then(function(a){if(a.type===c.RESPONSE_TYPE.ADD_ITEMS_INCOMPLETE_ADD)throw Error(a.entity.details.message);p(f,!0);v().then(function(a){x(a,d,e)}).catch(function(a){y(a,d)})}).catch(function(a){p(f,!1)})},getAttachBaseAsinData:function(a){return{customFields:{field1:a.baseAsin}}},getAttachAccessoryData:function(a,b){return{customFields:{field1:b.baseAsin,field2:a.accessoryItemAsin,field3:a.accessoryItemPrice}}},updateCartInfoForBaseAsinATC:function(b){var f=a.getHctpConfig();
b&&(b=b.request.getAsins(),n.getProductsBatch(b,[n.RESOURCE_INCLUSIONS.PRODUCT_IMAGES]).then(function(a){a.entities&&(a.entities.forEach(function(a){if(a.type===n.RESPONSE_TYPE_SUCCESS){var b=a.entity;if(b&&b.productImages&&b.productImages.entity&&b.productImages.entity.images&&b.productImages.entity.images.length){var e=b.productImages.entity;a=e.altText;e=l.init(e.images[0].lowRes).scaleToSquare(60).build().url;b="/dp/"+b.asin;a=d.$("\x3cimg\x3e\x3c/img\x3e").attr("src",e).attr("alt",a);a=d.$("\x3ca\x3e\x3c/a\x3e").attr("href",
b).append(a);a=d.$("\x3cdiv\x3e\x3c/div\x3e").addClass("attach-base-product-image-wrapper").append(a)}else a=d.$();h(c.SELECTORS.CART_INFO_BASE_PRODUCT_IMAGE_CONTAINER).append(a)}}),e.logClientSideMetric(c.CSA_EVENT_METRIC.METRIC_TYPE.CLICK,c.CSA_EVENT_METRIC.METRIC_NAME.ATTACH_BASE_PRODUCT_IMAGE_FETCH_SUCCESS,!1))}).catch(function(a){h(c.SELECTORS.CART_INFO_BASE_PRODUCT_IMAGE_CONTAINER).hide();e.logClientSideMetric(c.CSA_EVENT_METRIC.METRIC_TYPE.CLICK,c.CSA_EVENT_METRIC.METRIC_NAME.ATTACH_BASE_PRODUCT_IMAGE_FETCH_FAILURE,
!1)}));v().then(function(a){x(a,f)}).catch(function(a){y(a,f)})},manuallyLoadUpsellAsinImages:function(){var a=h(c.SELECTORS.SIDE_SHEET_UPSELL_ASIN_ITEM);d.loadImageManually(a.find(c.SELECTORS.UPSELL_ASIN_IMAGE))}}});"use strict";k.when("A","hctp-attach-logger","hctp-utils","hctp-configs","hctp-attach-constants").execute(function(d,a,c,e,b){function t(d,m){var p=d.data;d=p.asinIndex;var r=e.getHctpConfig(),n=g(b.SELECTORS.UPSELL_ATC_CONTAINER_PREFIX+d);g(n).children(b.SELECTORS.UPSELL_ATC_BUTTON).hide();
g(n).children(b.SELECTORS.UPSELL_ATC_SUCCESS).hide();g(n).children(b.SELECTORS.UPSELL_ATC_ERROR).hide();g(n).children(b.SELECTORS.UPSELL_ATC_SPINNER).css("display","inline-block");l();p={accessoryItemAsin:p.asin,accessoryItemOfferingId:p.offerListingId,accessoryItemQuantity:1,accessoryItemPrice:p.offerPrice};c.addUpsellAsinToCart(p,r,d);r=c.getAttachAccessoryData(p,r);m?a.logClientSideMetric(b.CSA_EVENT_METRIC.METRIC_TYPE.CLICK,b.CSA_EVENT_METRIC.METRIC_NAME.MINI_DP_ATC_CLICK+d,!0,r):a.logClientSideMetric(b.CSA_EVENT_METRIC.METRIC_TYPE.CLICK,
b.CSA_EVENT_METRIC.METRIC_NAME.MINI_DP_TRY_AGAIN_CLICK+d,!0,r);a.endLatencyCapture(b.CSA_EVENT_METRIC.METRIC_NAME.MINI_DP_DWELL_TIME)}function l(){g(b.SELECTORS.MINI_DP_CONTAINER).hide();g(b.SELECTORS.MINI_DP_SPINNER).show();g(b.SELECTORS.MINI_DP_PLACEHOLDER).hide();g(b.SELECTORS.SIDE_SHEET_CATEGORIZED_UPSELL_ASINS).slideDown(700,"linear");g(b.SELECTORS.MINI_DP_ERROR).hide()}function n(){g(b.SELECTORS.MINI_DP_SPINNER).hide();g(b.SELECTORS.MINI_DP_ERROR).show()}function m(c){g(b.SELECTORS.MINI_DP_IMAGE_HIGHLIGHT).attr(b.ATTRIBUTE.SRC,
c.data.imageUrl);a.logClientSideMetric(b.CSA_EVENT_METRIC.METRIC_TYPE.CLICK,b.CSA_EVENT_METRIC.METRIC_NAME.MINI_DP_THUMBNAIL_FOCUS,!1)}var g=d.$,r=self.windowSpecs={PRODUCT_DOCUMENT_WINDOW_NAME:"ProductDocumentDisplay",PRODUCT_DOCUMENT_WINDOW_SPECS:"width\x3d500,height\x3d500,dependent\x3dyes,directories\x3dno,location\x3dno,menubar\x3dno,resizable\x3dyes,scrollbar\x3dyes,toolbar\x3dno"};d.declarative(b.DECLARATIVE.MINI_DP_TRY_AGAIN,b.EVENT.TYPE.CLICK,function(a){t(a,!1)});d.declarative(b.DECLARATIVE.MINI_DP_ATC,
b.EVENT.TYPE.CLICK,function(a){t(a,!0)});d.declarative(b.DECLARATIVE.MINI_DP_TRIGGER,b.EVENT.TYPE.CLICK,function(c){g(b.SELECTORS.SIDE_SHEET_CATEGORIZED_UPSELL_ASINS).hide();g(b.SELECTORS.MINI_DP_CONTAINER).slideDown(700,"linear");c=c.data;c={asin:c.asin,asinIndex:c.asinIndex,isV2:!0,clientName:"ValueAddsAttachDesktop",variations:[],atcButtonState:g(b.SELECTORS.UPSELL_ATC_STATUS_PREFIX+c.asinIndex).val()};a.logClientSideMetric(b.CSA_EVENT_METRIC.METRIC_TYPE.CLICK,b.CSA_EVENT_METRIC.METRIC_NAME.MINI_DP_TRIGGER,
!1);a.beginLatencyCapture(b.CSA_EVENT_METRIC.METRIC_NAME.MINI_DP_DWELL_TIME);a.beginLatencyCapture(b.CSA_EVENT_METRIC.METRIC_NAME.MINI_DP_CALL_LATENCY);d.get(b.ENDPOINTS.MINI_DP_URL_PREFIX+g.param(c),{success:function(c){var e=g(b.SELECTORS.MINI_DP_PLACEHOLDER);0<e.length?(e[0].innerHTML=c,g(b.SELECTORS.MINI_DP_SPINNER).hide(),e.show(),d.loadImageManually(g(b.SELECTORS.MINI_DP_THUMBNAIL_IMAGE)),d.loadImageManually(g(b.SELECTORS.MINI_DP_IMAGE_HIGHLIGHT))):n();a.logClientSideMetric(b.CSA_EVENT_METRIC.METRIC_TYPE.CLICK,
b.CSA_EVENT_METRIC.METRIC_NAME.MINI_DP_CALL_SUCCESS,!1);a.endLatencyCapture(b.CSA_EVENT_METRIC.METRIC_NAME.MINI_DP_CALL_LATENCY)},error:function(c){n();a.logClientSideMetric(b.CSA_EVENT_METRIC.METRIC_TYPE.CLICK,b.CSA_EVENT_METRIC.METRIC_NAME.MINI_DP_CALL_FAILURE,!1);a.endLatencyCapture(b.CSA_EVENT_METRIC.METRIC_NAME.MINI_DP_CALL_LATENCY)}})});d.declarative(b.DECLARATIVE.MINI_DP_BACK,b.EVENT.TYPE.CLICK,function(c){l();a.logClientSideMetric(b.CSA_EVENT_METRIC.METRIC_TYPE.CLICK,b.CSA_EVENT_METRIC.METRIC_NAME.MINI_DP_BACK_CLICK,
!1);a.endLatencyCapture(b.CSA_EVENT_METRIC.METRIC_NAME.MINI_DP_DWELL_TIME)});d.declarative(b.DECLARATIVE.MINI_DP_THUMBNAIL_FOCUS,b.EVENT.TYPE.MOUSE_ENTER,function(a){m(a)});d.declarative(b.DECLARATIVE.MINI_DP_THUMBNAIL_FOCUS,b.EVENT.TYPE.KEY_DOWN,function(a){a.$event&&a.$event.originalEvent&&a.$event.originalEvent.key===b.KEY.ENTER&&m(a)});d.declarative(b.DECLARATIVE.MINI_DP_PRODUCT_DOC_OPEN,b.EVENT.TYPE.CLICK,function(c){q.open(c.data.url,r.PRODUCT_DOCUMENT_WINDOW_NAME,r.PRODUCT_DOCUMENT_WINDOW_SPECS);
a.logClientSideMetric(b.CSA_EVENT_METRIC.METRIC_TYPE.CLICK,b.CSA_EVENT_METRIC.METRIC_NAME.MINI_DP_PRODUCT_DOC_OPEN,!1)});d.declarative(b.DECLARATIVE.MINI_DP_NO_THANKS,b.EVENT.TYPE.CLICK,function(c){l();a.logClientSideMetric(b.CSA_EVENT_METRIC.METRIC_TYPE.CLICK,b.CSA_EVENT_METRIC.METRIC_NAME.MINI_DP_NO_THANKS_CLICK,!1);a.endLatencyCapture(b.CSA_EVENT_METRIC.METRIC_NAME.MINI_DP_DWELL_TIME)})});"use strict";k.when("A","atf").register("hctp-configs",function(d){var a=d.$;return{getHctpConfig:function(){var c=
a("#hctpConfigStateData").data(),e=a("#hctpAttachPreATCStateData").data();if(!e)return null;var b=e.baseAsinOfferListingId;null===b&&(b=a("#addToCart_feature_div").parent().find("#oid").val());return c?{marketplaceId:c.marketplaceId,customerId:c.customerId,sessionId:c.sessionId,languageOfPreference:c.languageOfPreference,currencyOfPreference:c.currencyOfPreference,baseAsin:c.baseAsin,baseAsinOfferListingId:b,baseAsinThumbnailUrl:c.baseAsinThumbnailUrl,attachEligible:c.attachEligible,deviceType:e.deviceType,
itemsTitle:c.itemsTitle,itemTitle:c.itemTitle,verificationSessionId:"",csrfAddCart:c.csrfAddCart,cartAapiEndpoint:c.cartAapiEndpoint,bottomSheetCloseMsg:c.bottomsheetCloseMsg,requestId:e.requestId,proceedToCheckOutTitle:c.proceedToCheckOutTitle,latencyReductionWeblabTreatment:e.latencyReductionWeblabTreatment}:{verificationSessionId:"",baseAsin:e.baseAsin,requestId:e.requestId,deviceType:e.deviceType,csrfAddCart:e.csrfAddCart,attachEligible:e.attachEligible,cartAapiEndpoint:e.cartAapiEndpoint,languageOfPreference:e.languageOfPreference,
latencyReductionWeblabTreatment:e.latencyReductionWeblabTreatment}}}});"use strict";k.when("A").register("hctp-attach-constants",function(d){return{ENDPOINTS:{CART_BASE:"/cart",MINI_DP_URL_PREFIX:"/hctp/minidp?",GURUPA_CART_BASE:"/gp/cart/view.html",GXA_BASE:"/gp/product/ajax/valueAddsGxa?",CHECKOUT_BASE:"/checkout/entry/cart?ie\x3dUTF8\x26proceedToCheckout\x3d1\x26useDefaultCart\x3d1\x26pipelineType\x3dChewbacca\x26sessionID\x3d"},CSA_EVENT_METRIC:{PRODUCER_ID:"valueshopping",FEATURE_NAME:"attach",
SCHEMA_ID:"valueShopping.ClientSideMetrics.2",METRIC_TYPE:{CLICK:"click"},METRIC_NAME:{ATTACH_CHECKOUT_CLICK:"hctpAttachCheckoutClick",ATTACH_VIEW_CART_CLICK:"hctpAttachViewCartClick",ATTACH_SIDE_SHEET_CLOSE:"hctpAttachSideSheetClose",ATTACH_SHOW_MORE:"hctpAttachShowMore",ATTACH_SHOW_LESS:"hctpAttachShowLess",ATTACH_ADD_CART_NAV_FAILURE:"hctpAttachAddCartNavFailure",FORMAT_INTL:"priceFormatterUsedIntlNumberFormat",FORMAT_SIMPLE:"priceFormatterUsedSimpleFormat",ATTACH_GXA_CALL_SUCCESS:"hctpAttachGxaCallSuccess",
ATTACH_GXA_CALL_FAILURE:"hctpAttachGxaCallFailure",ATTACH_GXA_CALL_LATENCY:"hctpAttachGxaLatency",ATTACH_GAP_ATC_TO_SIDE_SHEET:"hctpAttachGapAtcToSideSheet",ATTACH_DISPLAY_SUCCESS:"hctpAttachSuccessWhileLaunchingSideSheet",ATTACH_DISPLAY_FAILURE:"hctpAttachFailureWhileLaunchingSideSheet",ATTACH_BASE_ATC_CLICK:"hctpAttachBaseATCClick",ATTACH_BASE_ATC_SUCCESS:"hctpAttachBaseAsinATCSuccess",ATTACH_BASE_ATC_FAILURE:"hctpAttachBaseAsinATCFailure",ATTACH_BASE_ATC_LATENCY:"hctpAttachBaseAsinATCLatency",
ATTACH_BASE_ATC_TRY_AGAIN:"hctpAttachBaseAsinATCTryAgain",MINI_DP_TRIGGER:"hctpAttachMiniDPTrigger",MINI_DP_CALL_SUCCESS:"hctpAttachMiniDPCallSuccess",MINI_DP_CALL_FAILURE:"hctpAttachMiniDPCallFailure",MINI_DP_CALL_LATENCY:"hctpAttachMiniDPCallLatency",MINI_DP_ATC_CLICK:"hctpAttachMiniDPATC-",MINI_DP_TRY_AGAIN_CLICK:"hctpAttachMiniDPTryAgain",MINI_DP_BACK_CLICK:"hctpAttachMiniDPBackClick",MINI_DP_NO_THANKS_CLICK:"hctpAttachMiniDPNoThanksClick",MINI_DP_DWELL_TIME:"hctpAttachMiniDPDwellTime",MINI_DP_THUMBNAIL_FOCUS:"hctpAttachMiniDPThumbnailFocus",
MINI_DP_PRODUCT_DOC_OPEN:"hctpAttachMiniDPProductDocOpen",ATTACH_GET_CART_SUMMARY_SUCCESS:"hctpAttachCartSummarySuccess",ATTACH_GET_CART_SUMMARY_FAILURE:"hctpAttachCartSummaryFailure",ATTACH_GET_CART_SUMMARY_LATENCY:"hctpAttachCartSummaryLatency",ATTACH_UPSELL_ATC_CLICK:"hctpSideSheetUpsellATC-",ATTACH_UPSELL_ATC_SUCCESS:"hctpAttachUpsellATCSuccess",ATTACH_UPSELL_ATC_FAILURE:"hctpAttachUpsellATCFailure",ATTACH_UPSELL_ATC_LATENCY:"hctpAttachUpsellATCLatency",ATTACH_UPSELL_ATC_TRY_AGAIN:"hctpAttachUpsellATCTryAgain",
ATTACH_BASE_PRODUCT_IMAGE_FETCH_SUCCESS:"hctpAttachBaseProductImageFetchSuccess",ATTACH_BASE_PRODUCT_IMAGE_FETCH_FAILURE:"hctpAttachBaseProductImageFetchFailure"}},REF_TAGS:{ATTACH_CART_REDIRECT:"hctp_attach_dss_cart",ATTACH_CHECKOUT:"hctp_attach_dss_ptc",ATTACH_UPSELL_ATC:"hctp_attach_dss_atc_"},COMMON:{DOT:".",COMMA:","},EVENT:{PAGE_UPDATE:"a:pageUpdate",TYPE:{CLICK:"click",KEY_DOWN:"keydown",MOUSE_ENTER:"mouseenter"}},CLASSES:{AOK_HIDDEN:"aok-hidden",BUTTON_PRIMARY:"a-button-primary"},SELECTORS:{SHOW_MORE:".attach-show-more",
SHOW_LESS:".attach-show-less",CARD_EXPAND_CONTENT:".attach-card-expand-content",ADD_TO_CART_BUTTON:"#add-to-cart-button",ATTACH_UNIFICATION_FLAG:"#attach-unification",ADDED_UPSELL_ASIN_SELECTOR:"#hctp-attach-added-upsell-asins",ATTACH_DSS_MODAL_LAYER:"#hctp-attach-dss-modal-layer",ATTACH_DSS_BACK_DROP:"#hctp-attach-dss-modal-layer #hctp-attach-popover-light-box",ATTACH_DSS_PLACEHOLDER:"#hctp-attach-side-sheet-placeholder",SIDE_SHEET:"#hctp-attach-side-sheet",SIDE_SHEET_SHOW_MORE:"#hctp-attach-side-sheet .attach-show-more",
SIDE_SHEET_SHOW_LESS:"#hctp-attach-side-sheet .attach-show-less",SIDE_SHEET_UPSELL_ATC:"#hctp-attach-side-sheet .upsell-atc-button",SIDE_SHEET_CLOSE_BUTTON:"#hctp-attach-side-sheet .attach-close-button",SIDE_SHEET_UPSELL_ATC_RETRY:"#hctp-attach-side-sheet .upsell-atc-retry",SIDE_SHEET_UPSELL_ASIN_ITEM:"#hctp-attach-side-sheet .upsell-asin-item",SIDE_SHEET_CART_BUTTON:"#attach-cart-info-content .attach-view-cart-button",SIDE_SHEET_CHECKOUT_BUTTON:"#attach-cart-info-content .attach-checkout-button",
SIDE_SHEET_UPSELL_PRODUCTS_LIST:"#hctp-attach-side-sheet ul.attach-upsell-list",SIDE_SHEET_BASE_ATC_TRY_AGAIN:"#hctp-attach-side-sheet .attach-base-atc-try-again",SIDE_SHEET_PRIMARY_CART_BUTTON:"#attach-cart-info-content .attach-primary-cart-button",SIDE_SHEET_VERTICAL_SCROLL:"#hctp-attach-side-sheet .attach-side-sheet-vertical-scroll",SIDE_SHEET_CATEGORIZED_UPSELL_ASINS:"#hctp-attach-side-sheet .attach-categorized-upsell-asins",SIDE_SHEET_BASE_ATC_ALERT_CONTAINER:"#hctp-attach-side-sheet .attach-base-atc-alert-error-container",
SIDE_SHEET_BASE_ATC_PARTIAL_ERROR_MSG:"#hctp-attach-side-sheet .attach-base-atc-partial-error-msg",SIDE_SHEET_BASE_ATC_PROCESSING_ERROR_MSG:"#hctp-attach-side-sheet .attach-base-atc-processing-error-msg",CART_INFO_CART_VALUE:"#attach-cart-info-content .attach-cart-value",CART_INFO_SPINNER:"#hctp-attach-side-sheet #attach-cart-info-spinner",CART_INFO_CONTENT:"#hctp-attach-side-sheet #attach-cart-info-content",CART_INFO_CART_QUANTITY:"#attach-cart-info-content .attach-cart-quantity",CART_INFO_CART_SUB_TOTAL:"#attach-cart-info-content .attach-cart-subtotal",
CART_INFO_BASE_ATC_ERROR:"#attach-cart-info-content .attach-base-atc-error",CART_INFO_PTC_TEXT:"#attach-cart-info-content .attach-proceed-to-checkout-text",CART_INFO_BASE_ATC_SUCCESS:"#attach-cart-info-content .attach-base-atc-success",CART_INFO_SUMMARY_FAILURE:"#attach-cart-info-content .attach-cart-summary-failure",CART_INFO_BASE_PRODUCT_IMAGE_CONTAINER:"#attach-cart-info-content .attach-base-product-image-container",UPSELL_ATC_ERROR:".upsell-atc-error",UPSELL_ATC_BUTTON:".upsell-atc-button",UPSELL_ASIN_IMAGE:".upsell-asin-image",
UPSELL_ATC_SPINNER:".upsell-atc-spinner",UPSELL_ATC_SUCCESS:".upsell-atc-success",UPSELL_ATC_CONTAINER:".upsell-atc-container",UPSELL_ATC_CONTAINER_PREFIX:"#upsell-atc-container-",UPSELL_ATC_STATUS_PREFIX:"#attach-upsell-atc-status-",MINI_DP_CONTAINER:"#attach-mini-dp-container",MINI_DP_ERROR:"#attach-mini-dp-container .attach-mini-dp-error",MINI_DP_BACK_BUTTON:"#hctp-attach-side-sheet .attach-mini-dp-back-button",MINI_DP_SPINNER:"#attach-mini-dp-container .attach-mini-dp-spinner",MINI_DP_PLACEHOLDER:"#attach-mini-dp-container .attach-mini-dp-placeholder",
MINI_DP_THUMBNAIL_IMAGE:"#hctp-attach-mini-dp .hctp-mini-dp-thumbnail-image",MINI_DP_THUMBNAIL_BUTTON:"#hctp-attach-mini-dp .hctp-mini-dp-thumbnail-button",MINI_DP_IMAGE_HIGHLIGHT:"#hctp-attach-mini-dp .hctp-mini-dp-product-image-highlight"},DECLARATIVE:{MINI_DP_ATC:"hctp-mini-dp-atc",MINI_DP_BACK:"attach-mini-dp-back",MINI_DP_TRIGGER:"hctp-mini-dp-trigger",MINI_DP_TRY_AGAIN:"hctp-mini-dp-try-again",MINI_DP_NO_THANKS:"hctp-mini-dp-no-thanks",MINI_DP_THUMBNAIL_FOCUS:"hctp-mini-dp-thumbnail-focus",
MINI_DP_PRODUCT_DOC_OPEN:"hctp-mini-dp-product-docs-open"},KEY:{ENTER:"Enter"},ATTRIBUTE:{SRC:"src"},NAMESPACE:{HCTP_ATTACH_ATC_CLICK_NAMESPACE:"click.hctpAttach"},ERROR:{ATTACH_SIDE_SHEET_NOT_FOUND:"HCTP Attach side sheet not found",ATTACH_PLACEHOLDER_NOT_FOUND:"HCTP Attach placeholder not found"},DATA_FIELD:{CATEGORY:"category"},RESPONSE_TYPE:{ADD_ITEMS_INCOMPLETE_ADD:"add-items.incomplete-add.error/v1"}}});"use strict";k.register("hctp-focus-management",function(){var d={attemptFocus:function(a){try{a.focus()}catch(c){}return a===
document.activeElement},focusDescendant:function(a,c){if(a&&a.children)for(var e=0;e<a.children.length;e++){var b=a.children.item("last"===c?a.children.length-e-1:e);if(d.attemptFocus(b)||d.focusDescendant(b,c))return!0}return!1}};return d});"use strict";k.when("A","hctp-attach-constants","hctp-configs","hctp-attach-logger","hctp-utils","hctp-focus-management").register("hctp-attach-side-sheet",function(d,a,c,e,b,t){function l(b){b.preventDefault();var c=this.dataset.category;b=f(a.SELECTORS.SIDE_SHEET_UPSELL_PRODUCTS_LIST);
var d;f(b).each(function(b,e){if(f(e).data(a.DATA_FIELD.CATEGORY)===c)return d=e,!1});if(d){b=f(d).find(a.SELECTORS.SHOW_LESS);var l=f(d).find(a.SELECTORS.SHOW_MORE),m=f(d).find(a.SELECTORS.CARD_EXPAND_CONTENT);f(m).slideDown(400,"linear");f(l).hide();f(b).show()}e.logClientSideMetric(a.CSA_EVENT_METRIC.METRIC_TYPE.CLICK,a.CSA_EVENT_METRIC.METRIC_NAME.ATTACH_SHOW_MORE,!1)}function n(b){b.preventDefault();var c=this.dataset.category;b=f(a.SELECTORS.SIDE_SHEET_UPSELL_PRODUCTS_LIST);var d;f(b).each(function(b,
e){if(f(e).data(a.DATA_FIELD.CATEGORY)===c)return d=e,!1});if(d){b=f(d).find(a.SELECTORS.SHOW_LESS);var l=f(d).find(a.SELECTORS.SHOW_MORE),m=f(d).find(a.SELECTORS.CARD_EXPAND_CONTENT);f(m).slideUp(400,"linear");f(b).hide();f(l).show()}e.logClientSideMetric(a.CSA_EVENT_METRIC.METRIC_TYPE.CLICK,a.CSA_EVENT_METRIC.METRIC_NAME.ATTACH_SHOW_LESS,!1)}function m(d){d.preventDefault();e.beginLatencyCapture(a.CSA_EVENT_METRIC.METRIC_NAME.ATTACH_UPSELL_ATC_LATENCY);d=f(this).closest(a.SELECTORS.UPSELL_ATC_CONTAINER).data().asinIndex;
var l=f(this).closest("li.upsell-asin-item"),m=f(l).data("upsellasin"),g=f(l).data("offerlistingid"),r=f(l).data("offerprice").toString();f(this).hide();f(this).siblings(a.SELECTORS.UPSELL_ATC_SPINNER).css("display","inline-block");l=c.getHctpConfig();m={accessoryItemAsin:m,accessoryItemOfferingId:g,accessoryItemQuantity:1,accessoryItemPrice:r};b.addUpsellAsinToCart(m,l,d);m=b.getAttachAccessoryData(m,l);e.logClientSideMetric(a.CSA_EVENT_METRIC.METRIC_TYPE.CLICK,a.CSA_EVENT_METRIC.METRIC_NAME.ATTACH_UPSELL_ATC_CLICK+
d,!0,m)}function g(b){if(!h.isManagingFocus){var c=f(a.SELECTORS.SIDE_SHEET)[0];c.contains(b.target)?h.lastFocusElement=b.target:(h.isManagingFocus=!0,t.focusDescendant(c,"first"),h.lastFocusElement===document.activeElement&&t.focusDescendant(c,"last"),h.isManagingFocus=!1,h.lastFocusElement=document.activeElement)}}function r(){document.body.style.overflow="";h.$preFocusTrap.remove();h.$postFocusTrap.remove();document.removeEventListener("focus",g,!0);f(a.SELECTORS.SIDE_SHEET).animate({right:"-700px"},
300,"linear");h.originalFocusSource.focus();d.delay(function(){f(a.SELECTORS.ATTACH_DSS_MODAL_LAYER).hide();f(a.SELECTORS.ATTACH_DSS_BACK_DROP).hide()},300)}function p(d){d.stopPropagation();d.preventDefault();d=c.getHctpConfig();d=b.getAttachBaseAsinData(d);b.updateInputElement(a.SELECTORS.ADDED_UPSELL_ASIN_SELECTOR,"");e.logClientSideMetric(a.CSA_EVENT_METRIC.METRIC_TYPE.CLICK,a.CSA_EVENT_METRIC.METRIC_NAME.ATTACH_VIEW_CART_CLICK,!0,d);q.location.href=a.ENDPOINTS.CART_BASE+"?ref\x3d"+a.REF_TAGS.ATTACH_CART_REDIRECT}
function k(b){(b.originalEvent?b.originalEvent.key:b.key)===a.KEY.ENTER&&(f(a.SELECTORS.MINI_DP_CONTAINER).hide(),f(a.SELECTORS.SIDE_SHEET_CATEGORIZED_UPSELL_ASINS).slideDown(700,"linear"),f(a.SELECTORS.MINI_DP_SPINNER).show(),f(a.SELECTORS.MINI_DP_PLACEHOLDER).hide(),f(a.SELECTORS.MINI_DP_ERROR).hide())}function x(d){d.stopPropagation();d.preventDefault();d=a.REF_TAGS.ATTACH_CHECKOUT;var l=c.getHctpConfig(),f=b.getAttachBaseAsinData(l);b.updateInputElement(a.SELECTORS.ADDED_UPSELL_ASIN_SELECTOR,
"");e.logClientSideMetric(a.CSA_EVENT_METRIC.METRIC_TYPE.CLICK,a.CSA_EVENT_METRIC.METRIC_NAME.ATTACH_CHECKOUT_CLICK,!0,f);q.location.href=a.ENDPOINTS.CHECKOUT_BASE+l.sessionId+"\x26ref\x3d"+d}function y(b){b.preventDefault();b=f(this).closest(a.SELECTORS.UPSELL_ATC_CONTAINER);var c=b.find(a.SELECTORS.UPSELL_ATC_BUTTON);b.find(a.SELECTORS.UPSELL_ATC_ERROR).hide();e.logClientSideMetric(a.CSA_EVENT_METRIC.METRIC_TYPE.CLICK,a.CSA_EVENT_METRIC.METRIC_NAME.ATTACH_UPSELL_ATC_TRY_AGAIN,!1);c.click()}function v(b){b.preventDefault();
r();e.logClientSideMetric(a.CSA_EVENT_METRIC.METRIC_TYPE.CLICK,a.CSA_EVENT_METRIC.METRIC_NAME.ATTACH_SIDE_SHEET_CLOSE,!1)}var f=d.$,h={$preFocusTrap:null,$postFocusTrap:null,isManagingFocus:!1,lastFocusElement:null,originalFocusSource:null};return{show:function(){f(a.SELECTORS.SIDE_SHEET_SHOW_MORE).unbind(a.EVENT.TYPE.CLICK,l).click(l);f(a.SELECTORS.SIDE_SHEET_SHOW_LESS).unbind(a.EVENT.TYPE.CLICK,n).click(n);f(a.SELECTORS.SIDE_SHEET_CART_BUTTON).unbind(a.EVENT.TYPE.CLICK,p).click(p);f(a.SELECTORS.SIDE_SHEET_PRIMARY_CART_BUTTON).unbind(a.EVENT.TYPE.CLICK,
p).click(p);f(a.SELECTORS.SIDE_SHEET_CHECKOUT_BUTTON).unbind(a.EVENT.TYPE.CLICK,x).click(x);f(a.SELECTORS.SIDE_SHEET_UPSELL_ATC).unbind(a.EVENT.TYPE.CLICK,m).click(m);f(a.SELECTORS.SIDE_SHEET_CLOSE_BUTTON).unbind(a.EVENT.TYPE.CLICK,v).click(v);f(a.SELECTORS.ATTACH_DSS_BACK_DROP).unbind(a.EVENT.TYPE.CLICK,v).click(v);f(a.SELECTORS.SIDE_SHEET_UPSELL_ATC_RETRY).unbind(a.EVENT.TYPE.CLICK,y).click(y);f(a.SELECTORS.MINI_DP_BACK_BUTTON).unbind(a.EVENT.TYPE.KEY_DOWN,k).keydown(k);var c=f(a.SELECTORS.SIDE_SHEET);
if(0===c.length)throw Error(a.ERROR.ATTACH_SIDE_SHEET_NOT_FOUND);h.originalFocusSource=document.activeElement;document.addEventListener("focus",g,!0);c=c[0];h.$preFocusTrap=d.$('\x3cdiv tabindex\x3d"0"\x3e\x3c/div\x3e').insertBefore(c);h.$postFocusTrap=d.$('\x3cdiv tabindex\x3d"0"\x3e\x3c/div\x3e').insertAfter(c);document.body.style.overflow="hidden";f(a.SELECTORS.ATTACH_DSS_MODAL_LAYER).show();f(a.SELECTORS.ATTACH_DSS_BACK_DROP).show();f(a.SELECTORS.SIDE_SHEET).animate({right:0},500,"linear");e.endLatencyCapture(a.CSA_EVENT_METRIC.METRIC_NAME.ATTACH_GAP_ATC_TO_SIDE_SHEET);
c=f(a.SELECTORS.SIDE_SHEET_VERTICAL_SCROLL);0<c.length&&c[0].focus();b.manuallyLoadUpsellAsinImages();e.logClientSideMetric(a.CSA_EVENT_METRIC.METRIC_TYPE.CLICK,a.CSA_EVENT_METRIC.METRIC_NAME.ATTACH_DISPLAY_SUCCESS,!1)}}});"use strict";k.when("A","hctp-attach-constants","hctp-attach-logger","hctp-natc-parameter-parser","amazon-api-cart-hctp-add-items").register("hctp-base-product",function(d,a,c,e,b){var t=d.createClass({_container:null,_rawNatcParameters:null,_cartItems:[],init:function(a){var b=
d.$(a);this._container=a;a=b.serializeArray();b={};for(var c=0;c<a.length;c++){var l=a[c];b[l.name]=l.value}this._rawNatcParameters=b;this._cartItems=e.createAddItemsRequestItems(this._rawNatcParameters)},isValid:function(){return e.checkValidParameters(this._rawNatcParameters)&&this.shouldUseNatc()},shouldUseNatc:function(){var a=d.$(this._container).find("[data-a-state*\x3datc-page-state]");0< !a.length&&(a=d.$(this._container).siblings("[data-a-state*\x3datc-page-state]"));0< !a.length&&(a=d.$("[data-a-state*\x3datc-page-state]"),
0<a.length&&(a=a.first()));return 0<a.length&&(a=JSON.parse(a.text()))&&a.hasOwnProperty("shouldUseNatc")?a.shouldUseNatc:!0},getAsins:function(){return this._cartItems.map(function(a){return a.asin})},execute:function(d){var e=this;d=d?d:"dp_atch_dss_base";c.beginLatencyCapture(a.CSA_EVENT_METRIC.METRIC_NAME.ATTACH_BASE_ATC_LATENCY);return b.addItems(this._cartItems,d).then(function(b){c.endLatencyCapture(a.CSA_EVENT_METRIC.METRIC_NAME.ATTACH_BASE_ATC_LATENCY);return{request:e,response:b}}).catch(function(b){c.endLatencyCapture(a.CSA_EVENT_METRIC.METRIC_NAME.ATTACH_BASE_ATC_LATENCY);
return{request:e,response:b?b.data:z,error:b}})}});return{createRequest:function(a){return new t(a)}}});"use strict";k.when("A").register("hctp-natc-parameter-parser",function(d){var a={},c=/items?\[(\d+(?:\.\w+)?)\]\.?(.*)/,e=/\w+/g,b={asin:"string",offerListingId:"string",quantity:"integer","additionalParameters.giftOptions.includeGiftReceipt":"boolean","additionalParameters.installments.programId":"string","additionalParameters.pickupOption.addressId":"string","additionalParameters.pickupOption.locationId":"string"};
a.attemptTypeCoercion=function(a,c){if(b.hasOwnProperty(a))switch(b[a]){case "string":return c;case "integer":return parseInt(c);case "boolean":return"true"===c}try{var e=JSON.parse(c);return null===e||"string"===typeof e||d.$.isPlainObject(e)?c:e}catch(m){}return c};a.checkValidParameters=function(a){return a.hasOwnProperty("items[0.base][asin]")||a.hasOwnProperty("item[0].asin")};a.createAddItemsRequestItems=function(b){var d=[],n={},m;for(m in b)if(b.propertyIsEnumerable(m)){var g=b[m],r=c.exec(m);
if(r){var p=r[1];if(r=r[2].match(e)){n.hasOwnProperty(p)||(n[p]={});p=n[p];for(var t=r.join("."),q=0;q<r.length;q++){var k=r[q];q===r.length-1?p[k]=a.attemptTypeCoercion(t,g):(p.hasOwnProperty(k)||(p[k]={}),p=p[k])}}}}for(var v in n)n.propertyIsEnumerable(v)&&(b=n[v],"0.base"===v||"0"===v?d.unshift(b):d.push(b));return d};return a});"use strict";k.when("A","hctp-attach-constants").register("hctp-attach-logger",function(d,a){return{endLatencyCapture:function(a){"function"===typeof q.uex&&q.uex("ld",
a,{wb:1})},logClientSideMetric:function(c,d,b,t){"undefined"!==typeof q.csa&&"undefined"!==typeof q.ue&&"undefined"!==typeof q.ue.count&&(b&&q.csa("Events",{producerId:"valueshopping"})("log",{schemaId:a.CSA_EVENT_METRIC.SCHEMA_ID,producerId:a.CSA_EVENT_METRIC.PRODUCER_ID,featureName:a.CSA_EVENT_METRIC.FEATURE_NAME,metricType:c,messageId:d,entities:t},{ent:"all"}),q.ue&&"function"===typeof q.ue.count&&q.ue.count(d,(q.ue.count(d)||0)+1))},beginLatencyCapture:function(a){"function"===typeof q.uet&&
q.uet("bb",a,{wb:1})}}});"use strict";k.when("A","hctp-attach-constants","hctp-attach-logger").register("hctp-price-formatter",function(d,a,c){var e={};return{formatPrice:function(b,d,l){if(!q.Intl||!q.Intl.NumberFormat)return c.logClientSideMetric(a.CSA_EVENT_METRIC.METRIC_TYPE.CLICK,a.CSA_EVENT_METRIC.METRIC_NAME.FORMAT_SIMPLE,!1),d+" "+b.toFixed(2);c.logClientSideMetric(a.CSA_EVENT_METRIC.METRIC_TYPE.CLICK,a.CSA_EVENT_METRIC.METRIC_NAME.FORMAT_INTL,!1);var n=l+"/"+d;e.hasOwnProperty(n)||(e[n]=
new Intl.NumberFormat(l,{style:"currency",currency:d}));return e[n].format(b)}}});k.when("A","hctp-attach-constants","hctp-configs","hctp-attach-logger","hctp-utils","hctp-attach-side-sheet","hctp-base-product").register("hctp-atc-hijack",function(d,a,c,e,b,k,l){function n(c){b.updateCartInfoForBaseAsinATC(c);h(a.SELECTORS.CART_INFO_BASE_ATC_ERROR).addClass(a.CLASSES.AOK_HIDDEN);h(a.SELECTORS.CART_INFO_BASE_ATC_SUCCESS).removeClass(a.CLASSES.AOK_HIDDEN);e.logClientSideMetric(a.CSA_EVENT_METRIC.METRIC_TYPE.CLICK,
a.CSA_EVENT_METRIC.METRIC_NAME.ATTACH_BASE_ATC_SUCCESS,!1)}function m(c){b.updateCartInfoForBaseAsinATC(c);h(a.SELECTORS.CART_INFO_BASE_ATC_SUCCESS).addClass(a.CLASSES.AOK_HIDDEN);h(a.SELECTORS.CART_INFO_BASE_ATC_ERROR).removeClass(a.CLASSES.AOK_HIDDEN);h(a.SELECTORS.SIDE_SHEET_BASE_ATC_ALERT_CONTAINER).slideDown(700,"linear");e.logClientSideMetric(a.CSA_EVENT_METRIC.METRIC_TYPE.CLICK,a.CSA_EVENT_METRIC.METRIC_NAME.ATTACH_BASE_ATC_FAILURE,!1)}function g(b,c){h(a.SELECTORS.SIDE_SHEET_BASE_ATC_PROCESSING_ERROR_MSG).show();
b(c)}function r(b){b.preventDefault();y();e.logClientSideMetric(a.CSA_EVENT_METRIC.METRIC_TYPE.CLICK,a.CSA_EVENT_METRIC.METRIC_NAME.ATTACH_BASE_ATC_TRY_AGAIN,!1);u.click()}function p(c,d){var e=u.closest("form");e=l.createRequest(e);e.isValid()?e.execute().then(function(e){!e.error&&e.response&&e.response.type===a.RESPONSE_TYPE.ADD_ITEMS_INCOMPLETE_ADD&&b.isFunction(d)?(h(a.SELECTORS.SIDE_SHEET_BASE_ATC_PARTIAL_ERROR_MSG).show(),d(e)):!e.error&&e.response&&b.isFunction(c)?c(e):e.error&&b.isFunction(d)&&
g(d,e)}):g(d)}function t(){e.beginLatencyCapture(a.CSA_EVENT_METRIC.METRIC_NAME.ATTACH_GAP_ATC_TO_SIDE_SHEET);try{v().then(function(b){p(n,m);b=h(a.SELECTORS.ATTACH_DSS_PLACEHOLDER);if(0===b.length)throw Error(a.ERROR.ATTACH_PLACEHOLDER_NOT_FOUND);b[0].innerHTML=A;w=c.getHctpConfig();k.show();h(a.SELECTORS.SIDE_SHEET_BASE_ATC_TRY_AGAIN).unbind(a.EVENT.TYPE.CLICK,r).click(r);e.logClientSideMetric(a.CSA_EVENT_METRIC.METRIC_TYPE.CLICK,a.CSA_EVENT_METRIC.METRIC_NAME.ATTACH_GXA_CALL_SUCCESS,!1)}).catch(function(b){y();
e.logClientSideMetric(a.CSA_EVENT_METRIC.METRIC_TYPE.CLICK,a.CSA_EVENT_METRIC.METRIC_NAME.ATTACH_GXA_CALL_FAILURE,!1);e.logClientSideMetric(a.CSA_EVENT_METRIC.METRIC_TYPE.CLICK,a.CSA_EVENT_METRIC.METRIC_NAME.ATTACH_DISPLAY_FAILURE,!1);u.click()})}catch(B){y(),e.logClientSideMetric(a.CSA_EVENT_METRIC.METRIC_TYPE.CLICK,a.CSA_EVENT_METRIC.METRIC_NAME.ATTACH_DISPLAY_FAILURE,!1),u.click()}}function x(b){b.stopPropagation();b.preventDefault();u=b.target;t();e.logClientSideMetric(a.CSA_EVENT_METRIC.METRIC_TYPE.CLICK,
a.CSA_EVENT_METRIC.METRIC_NAME.ATTACH_BASE_ATC_CLICK,!1)}function y(){d.$(document.body).undelegate(a.SELECTORS.ADD_TO_CART_BUTTON,a.NAMESPACE.HCTP_ATTACH_ATC_CLICK_NAMESPACE,x)}function v(){return new Promise(function(b,f){null==A?(e.beginLatencyCapture(a.CSA_EVENT_METRIC.METRIC_NAME.ATTACH_GXA_CALL_LATENCY),w=c.getHctpConfig(),d.get(a.ENDPOINTS.GXA_BASE,{params:{experienceId:"valueAddsGxa",showFeatures:"valueAddsGxa",userExperienceType:"ATTACH",asin:w.baseAsin,sr:w.requestId,language:w.languageOfPreference},
success:function(c){e.endLatencyCapture(a.CSA_EVENT_METRIC.METRIC_NAME.ATTACH_GXA_CALL_LATENCY);0===c.trim().length?f(!1):(A=c,b(!0))},error:function(b){e.endLatencyCapture(a.CSA_EVENT_METRIC.METRIC_NAME.ATTACH_GXA_CALL_LATENCY);f(b)}})):b(!0)})}function f(){var e=h(a.SELECTORS.ADD_TO_CART_BUTTON);w=c.getHctpConfig();if(!(w&&w.attachEligible&&e.length&&b.elementExists(a.SELECTORS.ATTACH_UNIFICATION_FLAG)))return d.$(document.body).undelegate(a.SELECTORS.ADD_TO_CART_BUTTON,a.NAMESPACE.HCTP_ATTACH_ATC_CLICK_NAMESPACE,
x),null;d.$(document.body).undelegate(a.SELECTORS.ADD_TO_CART_BUTTON,a.NAMESPACE.HCTP_ATTACH_ATC_CLICK_NAMESPACE,x);d.$(document.body).delegate(a.SELECTORS.ADD_TO_CART_BUTTON,a.NAMESPACE.HCTP_ATTACH_ATC_CLICK_NAMESPACE,x)}var h=d.$,w=null,u=null,A=null;h.isFunction(q.markFeatureInteractive)&&q.markFeatureInteractive("atc",{hasComponents:!0,components:[{name:"show-hctp-attach",alwaysInteractive:!0}]});d.declarative("show-hctp-attach",["touchstart"],function(b){var c=b.$event.originalEvent;c.acknowledge&&
(c.acknowledge(0<b.$currentTarget.length?b.$currentTarget[0]:z),e.logClientSideMetric(a.CSA_EVENT_METRIC.METRIC_TYPE.CLICK,"tnr-post-ack-atc",!1))});d.on(a.EVENT.PAGE_UPDATE,function(){f()});f()});k.when("A","3p-promise","hctp-configs").register("amazon-api-cart-hctp-client-helper",function(d,a,c){function e(a,b){b=b.ENDPOINT+"/"+a.apiPath;var c=[];if(a.additionalParameters)for(var d in a.additionalParameters)a.additionalParameters.hasOwnProperty(d)&&c.push(d+"\x3d"+encodeURIComponent(a.additionalParameters[d]));
c.length&&(b+="?"+c.join("\x26"));return b}function b(a,b){var c=b.CSRF_TOKEN;var e=["application/vnd.com.amazon.api+json",'type\x3d"'+a.responseType+'"'];a.resourceInclusions&&e.push('expand\x3d"'+a.resourceInclusions.join(",")+'"');e=e.join("; ");var g=a.languageOfPreference;g||(g=b.LANGUAGE_OF_PREFERENCE);b=g.replace(/_/g,"-");c={Accept:e,"Accept-Language":b,"x-api-csrf-token":c,"x-amzn-encrypted-slate-token":d.$('meta[name\x3d"encrypted-slate-token"]').prop("content")};a.requestType&&(c["Content-Type"]=
'application/vnd.com.amazon.api+json; type\x3d"'+a.requestType+'"');return c}function k(c,g){return new a(function(a,m){var r=e(c,g),l=b(c,g),n=c.data?JSON.stringify(c.data):z;return d.$.ajax({type:c.method,url:r,headers:l,data:n,xhrFields:{withCredentials:!0},dataType:"json",success:function(b){a(b)},error:function(a){var b={statusCode:a.status,xhr:a};if(a.responseText)try{b.data=JSON.parse(a.responseText)}catch(h){b.data=a.responseText}m(b)}})})}function l(){var a=c.getHctpConfig();if(!a)return null;
var b={CSRF_TOKEN:a.csrfAddCart,ENDPOINT:a.cartAapiEndpoint,LANGUAGE_OF_PREFERENCE:a.languageOfPreference};return{makeRequest:function(a){return k(a,b)}}}var n=l();return{getClient:function(){n||(n=l());return n}}});k.when("amazon-api-cart-hctp-client-helper").register("amazon-api-cart-hctp-add-items",function(d){var a=function(a){return a},c=function(a){if(a.data&&"add-items.incomplete-add.error/v1"===a.data.type)return a.data;throw a;};return{addItems:function(e,b){e={apiPath:"cart/carts/retail/items",
requestType:"cart.add-items.request/v1",responseType:"cart.add-items/v1",method:"POST",data:{items:e},additionalParameters:{}};b&&(e.additionalParameters.ref=b);return d.getClient().makeRequest(e).then(a).catch(c)}}});k.when("amazon-api-cart-hctp-client-helper").register("amazon-api-cart-hctp-summary",function(d){var a=function(a){return a};return{get:function(c){var e={apiPath:"cart/summary",responseType:"cart.summary/v1",method:"GET",additionalParameters:{}};c&&(e.additionalParameters.cartTypes=
c);return d.getClient().makeRequest(e).then(a)}}});"use strict";k.when("amazon-api-cart-hctp-client-helper").register("hctp-productV2",function(d){var a={API_PATH:{PRODUCTS:"products/"},REQUEST_METHOD:{GET:"GET"},REQUEST_TYPE:{PRODUCT_REQUEST_V2:"product.request/v2"},RESPONSE_TYPE:{PRODUCT_V2:"product/v2",PRODUCT_COLLECTION:"collection(product/v2)/v1"},RESPONSE_TYPE_SUCCESS:"product/v2",RESOURCE_INCLUSIONS:{PRODUCT_IMAGES:"productImages(product.product-images/v2)"},getProduct:function(c,e,b,k){c=
{apiPath:a.API_PATH.PRODUCTS+c,requestType:a.REQUEST_TYPE.PRODUCT_REQUEST_V2,responseType:a.RESPONSE_TYPE.PRODUCT_V2,method:a.REQUEST_METHOD.GET,resourceInclusions:e,additionalParameters:b||{}};k&&(c.additionalParameters.ref=k);return d.getClient().makeRequest(c)},getProductsBatch:function(c,e,b,k){c={apiPath:a.API_PATH.PRODUCTS+c.join(","),requestType:a.REQUEST_TYPE.PRODUCT_REQUEST_V2,responseType:a.RESPONSE_TYPE.PRODUCT_COLLECTION,method:a.REQUEST_METHOD.GET,resourceInclusions:e,additionalParameters:b||
{}};k&&(c.additionalParameters.ref=k);return d.getClient().makeRequest(c)}};return a});"use strict";k.when("A").register("hctp-media-builder",function(d){var a={},c,e,b,k,l,n,m,g;a.init=function(d){c=d;l=k=b=e=z;n=c.width;m=c.height;g=[];c.styleCode&&g.push(encodeURIComponent(c.styleCode));return a};a.scaleToSquare=function(b){m=n=b;g.push("_SS"+b);return a};a.build=function(){var a=[];a.push("https://");a.push(e?e:"m.media-amazon.com");b?a.push("/images/G/",k,"/",b,"._CB",l):a.push("/images/I/",
c.physicalId,".");g.length&&a.push(g.join(""));(l||g.length)&&a.push("_");"."!==a[a.length-1]&&a.push(".");a.push(c.extension);return{url:a.join(""),width:n,height:m}};return a})});